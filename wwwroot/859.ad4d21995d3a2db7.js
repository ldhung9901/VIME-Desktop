"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[859],{85859:(le,H,s)=>{s.r(H),s.d(H,{TicketHauntModule:()=>ie});var p=s(44755),f=s(39401),g=s(51728),Y=s(11292),m=s(25580),I=s(99114),b=s(430),E=s(69609),v=s(17406),D=s(50877),V=s(13617),F=s(83649),x=s(31531),W=s(74473),u=s(30430),G=s(61972),N=s(22497),z=s(74050),d=s(58016),R=s(56467),J=s(12965),t=s(22223);let K=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ticket-haunt"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[x.lC],encapsulation:2}),n})();var X=s(15439),j=s.n(X),h=s(77579),$=s(78372),r=s(82722),T=s(28746),P=s(12017),tt=s(15861),et=s(45840),_=s(61135),it=s(32076),C=s(96119),nt=s(42198),k=s(82004),Z=s(71683),L=s(79925),at=s(18505),ot=s(3144);let Q=(()=>{class n{constructor(e,i){this._httpClient=e,this._fuseConfirmationService=i}getAll(e){return this._httpClient.get("api/ticket-haunts",{params:{...e}})}create(e){return this._httpClient.post("api/ticket-haunts",e)}getById(e){return this._httpClient.get(`api/ticket-haunts/${encodeURIComponent(e)}`)}checkOut(e){return this._httpClient.patch(`api/ticket-haunts/${encodeURIComponent(e)}/check-out`,null).pipe((0,at.b)(({success:i})=>{i&&(0,k.Hh)(this._fuseConfirmationService)}))}getVisitorStatus(){return this._httpClient.get("api/ticket-haunts/visitor-statuses")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ot.eN),t.LFG(Z.R))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ct=s(38642),st=s(85450),lt=s(61148),rt=s(32202),ut=s(92369),U=s(47148),q=s(90504),A=s(44867);function mt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"cm-select",47),t.NdJ("modelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.data.companyId=a)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("actionEnum","create"!==e.action?"view":"new")("listData",e.listCompanies)("model",e.data.companyId)}}function dt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"cm-select",48),t.NdJ("modelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.data.apartmentId=a)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("actionEnum","create"!==e.action?"view":"new")("listData",e.listApartments)("model",e.data.apartmentId)}}function pt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isShowWebcamIdentityCardFront=!a.isShowWebcamIdentityCardFront)}),t._UZ(2,"mat-icon",51),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"vime.openCamera")))}function gt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(48);return t.KtG(a.click())}),t._UZ(2,"mat-icon",53),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"vime.uploadPhoto")))}function ht(n,c){1&n&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"vime.regulationsImage"),")"))}function _t(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",56),t.NdJ("imageCapture",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleImage("citizenFrontImage",a))})("initError",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleInitError(a))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("height",140)("width",500)("trigger",e.getTriggerObservable("citizenFrontImage"))}}function ft(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,_t,1,3,"webcam",55),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.frontCardImageSubject.value)}}function bt(n,c){if(1&n&&t._UZ(0,"img",57),2&n){const e=t.oxw(2);t.Q6J("nzSrc",e.frontCardImageSubject.value)}}function Tt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ft,2,1,"div",37),t.YNc(2,bt,1,1,"img",54),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isShowWebcamIdentityCardFront),t.xp6(1),t.Q6J("ngIf",!e.isShowWebcamIdentityCardFront)}}function vt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deleteFile("citizenFrontImage"))}),t.qZA()}}function xt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.triggerSnapshot("citizenFrontImage"))}),t._uU(1),t.ALo(2,"transloco"),t.qZA()}2&n&&(t.Q6J("color","primary"),t.xp6(1),t.hij("",t.lcZ(2,2,"vime.takePicture")," "))}function It(n,c){if(1&n&&(t.TgZ(0,"div",58),t.ynx(1),t.YNc(2,vt,1,0,"button",59),t.YNc(3,xt,3,4,"button",60),t.BQk(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.frontCardImageSubject.value),t.xp6(1),t.Q6J("ngIf",e.isShowWebcamIdentityCardFront)}}function Ct(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isShowWebcamIdentityCardBack=!a.isShowWebcamIdentityCardBack)}),t._UZ(2,"mat-icon",51),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"vime.openCamera")))}function kt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(63);return t.KtG(a.click())}),t._UZ(2,"mat-icon",53),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"vime.uploadPhoto")))}function Zt(n,c){1&n&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"vime.regulationsImage"),")"))}function At(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",65),t.NdJ("imageCapture",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleImage("citizenBackImage",a))})("initError",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleInitError(a))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("height",140)("width",500)("trigger",e.getTriggerObservable("citizenBackImage"))}}function yt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,At,1,3,"webcam",64),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.backCardImageSubject.value)}}function wt(n,c){if(1&n&&t._UZ(0,"img",66),2&n){const e=t.oxw(2);t.Q6J("nzSrc",e.backCardImageSubject.value)}}function St(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,yt,2,1,"div",37),t.YNc(2,wt,1,1,"img",63),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isShowWebcamIdentityCardBack),t.xp6(1),t.Q6J("ngIf",!e.isShowWebcamIdentityCardBack)}}function Ht(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deleteFile("citizenBackImage"))}),t.qZA()}}function Ft(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.triggerSnapshot("citizenBackImage"))}),t._uU(1),t.ALo(2,"transloco"),t.qZA()}2&n&&(t.Q6J("color","primary"),t.xp6(1),t.Oqu(t.lcZ(2,2,"vime.takePicture")))}function Nt(n,c){if(1&n&&(t.TgZ(0,"div",58),t.ynx(1),t.YNc(2,Ht,1,0,"button",59),t.YNc(3,Ft,3,4,"button",60),t.BQk(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.backCardImageSubject.value),t.xp6(1),t.Q6J("ngIf",e.isShowWebcamIdentityCardBack)}}function zt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isShowWebcamIdentityGuestFaceImage=!a.isShowWebcamIdentityGuestFaceImage)}),t._UZ(2,"mat-icon",51),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"vime.openCamera")))}function Jt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(78);return t.KtG(a.click())}),t._UZ(2,"mat-icon",53),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"vime.uploadPhoto")))}function jt(n,c){1&n&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"vime.regulationsImage"),")"))}function Pt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",65),t.NdJ("imageCapture",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleImage("citizenImageFace",a))})("initError",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleInitError(a))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("height",140)("width",250)("trigger",e.getTriggerObservable("citizenImageFace"))}}function Lt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Pt,1,3,"webcam",64),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.citizenImageFaceSubject.value)}}function Qt(n,c){if(1&n&&t._UZ(0,"img",66),2&n){const e=t.oxw(2);t.Q6J("nzSrc",e.citizenImageFaceSubject.value)}}function Ut(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Lt,2,1,"div",37),t.YNc(2,Qt,1,1,"img",63),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isShowWebcamIdentityGuestFaceImage),t.xp6(1),t.Q6J("ngIf",!e.isShowWebcamIdentityGuestFaceImage)}}function qt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deleteFile("citizenImageFace"))}),t.qZA()}}function Ot(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.triggerSnapshot("citizenImageFace"))}),t._uU(1),t.ALo(2,"transloco"),t.qZA()}2&n&&(t.Q6J("color","primary"),t.xp6(1),t.hij("",t.lcZ(2,2,"vime.takePicture")," "))}function Mt(n,c){if(1&n&&(t.TgZ(0,"div",58),t.ynx(1),t.YNc(2,qt,1,0,"button",59),t.YNc(3,Ot,3,4,"button",60),t.BQk(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.citizenImageFaceSubject.value),t.xp6(1),t.Q6J("ngIf",e.isShowWebcamIdentityGuestFaceImage)}}function Bt(n,c){1&n&&t._UZ(0,"div",67)}function Yt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",67)(1,"button",68),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openBiostationConfig())}),t._UZ(2,"mat-icon",69),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"transloco"),t.qZA()()()}2&n&&(t.xp6(1),t.Q6J("color","primary"),t.xp6(3),t.Oqu(t.lcZ(5,2,"vime.checkInOutSettings")))}function Et(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onProceedCheckin())}),t._UZ(1,"label",71),t.qZA()}2&n&&t.Q6J("color","primary")}function Dt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onProceedCheckOut(a.data.ticketHauntId))}),t.TgZ(1,"label"),t._uU(2,"Check-out"),t.qZA()()}2&n&&t.Q6J("color","primary")}let y=(()=>{class n extends P.Y{constructor(e,i,a,o,l,w,ne,ae,oe,ce,se,S){super(a,i,e),this._dialogRef=e,this.fuseConfirmationService=i,this._translocoService=a,this._outsideCustomerService=o,this._ticketHauntService=l,this._companyService=w,this._apartmentService=ne,this._customerTypeService=ae,this._notificationService=oe,this._matDialog=ce,this._uploadService=se,this.w=window,this._unsubscribeAll=new h.x,this.listVisitor=[],this.listCompanies=[],this.listApartments=[],this.customerTypes=[],this.data={ticketHauntId:null,isCompany:!0,isApartment:!1,companyId:null,companyName:null,apartmentId:null,apartmentCode:null,content:null,arrivalTime:null,departureTime:null,isVisitor:!1,statusId:null,statusName:null,statusColor:null,statusBackgroundColor:null,outsideCustomerId:null,fullName:null,phoneNumber:null,email:null,citizenNumber:null,citizenFrontImage:null,citizenBackImage:null,citizenImageFace:null,customerTypeId:null,customerTypeName:null,description:null},this.isLoading=!1,this.triggerIdentityBack=new h.x,this.triggerIdentityFront=new h.x,this.triggerIdentityFaceImage=new h.x,this.frontCardImageSubject=new _.X(null),this.backCardImageSubject=new _.X(null),this.citizenImageFaceSubject=new _.X(null),this.guestFrontCardImageSubject=new _.X(null),this.guestBackCardImageSubject=new _.X(null),this.guestFaceImageSubject=new _.X(null),this.isShowWebcamIdentityCardFront=!1,this.isShowWebcamIdentityCardBack=!1,this.isShowWebcamIdentityGuestFaceImage=!1,this.errors=[],this.selectedVisitor=S.selectedVisitor,this.ticketHauntId=S.ticketHauntId,this.action=S.action}ngOnInit(){"create"===this.action?this.getDetailWithVisitor(this.selectedVisitor):("view"===this.action||"check-out"===this.action)&&this.getDetail(this.ticketHauntId),this.getMasterData(),this.selectedOption=this.data.isCompany?"company":"apartment"}checkBattery(){(0,it.D)(window.MauiInterop.checkBattery()).subscribe(e=>{console.log("result : ",e)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getDetailWithVisitor(e){(0,C.TF)(e)?this.initValue():(this.isLoading=!0,console.log(e),this._outsideCustomerService.getById(e).pipe((0,r.R)(this._unsubscribeAll),(0,T.x)(()=>this.isLoading=!1)).subscribe(({data:i})=>{this.data.ticketHauntId=null,this.data.isCompany=!0,this.data.isApartment=!1,this.data.companyId=null,this.data.companyName=null,this.data.apartmentId=null,this.data.apartmentCode=null,this.data.content=null,this.data.outsideCustomerId=i.outsideCustomerId,this.data.fullName=i.fullName,this.data.phoneNumber=i.phoneNumber,this.data.email=i.email,this.data.customerTypeId=i.customerTypeId,this.data.citizenNumber=i.citizenNumber,this.data.citizenFrontImage=i.citizenFrontImage,this.data.citizenBackImage=i.citizenBackImage,this.data.citizenImageFace=i.citizenImageFace,this.frontCardImageSubject.next(this.data.citizenFrontImage),this.backCardImageSubject.next(this.data.citizenBackImage),this.citizenImageFaceSubject.next(this.data.citizenImageFace),this.guestFrontCardImageSubject.next(this.data.citizenFrontImage),this.guestBackCardImageSubject.next(this.data.citizenBackImage),this.guestFaceImageSubject.next(this.data.citizenImageFace)}))}onCancel(){"create"===this.action?(0,k.WD)(this.fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(e=>{"confirmed"===e&&this._baseDialogRef.close()}):this._baseDialogRef.close()}onProceedCheckin(){if((0,C.TF)(this.data.fullName)||(0,C.TF)(this.data.citizenNumber))return void this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3});const e={...this.data};console.log(e),this._ticketHauntService.create(e).pipe((0,r.R)(this._unsubscribeAll),(0,T.x)(()=>this.isLoading=!1)).subscribe(i=>{i&&((0,k.Hh)(this.fuseConfirmationService,"message.saveSuccess"),this.closePopup())})}onProceedCheckOut(e){this.isLoading=!0,this._ticketHauntService.checkOut(e).pipe((0,r.R)(this._unsubscribeAll),(0,T.x)(()=>this.isLoading=!1)).subscribe(({})=>{this.closePopup()})}onOptionChange(){"company"===this.selectedOption?(this.data.isCompany=!0,this.data.isApartment=!1):(this.data.isCompany=!1,this.data.isApartment=!0)}getDetail(e){this.isLoading=!0,this._ticketHauntService.getById(e).pipe((0,r.R)(this._unsubscribeAll),(0,T.x)(()=>this.isLoading=!1)).subscribe(({data:i})=>{this.data=(0,et.Z)(i),this.frontCardImageSubject.next(this.data.citizenFrontImage),this.backCardImageSubject.next(this.data.citizenBackImage),this.citizenImageFaceSubject.next(this.data.citizenImageFace),this.guestFrontCardImageSubject.next(this.data.citizenFrontImage),this.guestBackCardImageSubject.next(this.data.citizenBackImage),this.guestFaceImageSubject.next(this.data.citizenImageFace),console.log(this.data)})}getCompanyNames(){this._companyService.get().pipe((0,r.R)(this._unsubscribeAll)).subscribe(({data:e})=>{this.listCompanies=e.map(i=>({id:i.companyId,name:i.companyName}))})}getApartmentCodes(){this._apartmentService.get().pipe((0,r.R)(this._unsubscribeAll)).subscribe(({data:e})=>{this.listApartments=e.map(i=>({id:i.apartmentId,name:i.apartmentCode}))})}getCustomerTypes(){this._customerTypeService.get({isUse:!0}).pipe((0,r.R)(this._unsubscribeAll)).subscribe(({data:e})=>{this.customerTypes=e.map(i=>({id:i.customerTypeId,name:i.typeName}))})}getMasterData(){this.getCompanyNames(),this.getApartmentCodes(),this.getCustomerTypes()}getTriggerObservable(e){switch(e){case"citizenFrontImage":return this.triggerIdentityFront.asObservable();case"citizenBackImage":return this.triggerIdentityBack.asObservable();case"citizenImageFace":return this.triggerIdentityFaceImage.asObservable()}}handleImage(e,i){var a=this;return(0,tt.Z)(function*(){const o=yield(yield fetch(i.imageAsDataUrl)).blob();a.currentFileUpload=new File([o],"123123.jpg",{type:"image/jpeg"}),a.uploadImage().subscribe(({data:l})=>{switch(e){case"citizenFrontImage":a.data.citizenFrontImage=l,a.frontCardImageSubject.next(l),a.guestFrontCardImageSubject.next(l);break;case"citizenBackImage":a.data.citizenBackImage=l,a.backCardImageSubject.next(l),a.guestBackCardImageSubject.next(l);break;case"citizenImageFace":a.data.citizenImageFace=l,a.citizenImageFaceSubject.next(l),a.guestFaceImageSubject.next(l)}})})()}uploadImage(){return this._uploadService.upLoadFile(this.currentFileUpload)}deleteFile(e){switch(e){case"citizenFrontImage":this.frontCardImageSubject.next(null),this.guestFrontCardImageSubject.next(null);break;case"citizenBackImage":this.backCardImageSubject.next(null),this.guestBackCardImageSubject.next(null);break;case"citizenImageFace":this.citizenImageFaceSubject.next(null),this.guestFaceImageSubject.next(null)}}triggerSnapshot(e){switch(e){case"citizenFrontImage":this.triggerIdentityFront.next(),this.isShowWebcamIdentityCardFront=!1;break;case"citizenBackImage":this.triggerIdentityBack.next(),this.isShowWebcamIdentityCardBack=!1;break;case"citizenImageFace":this.triggerIdentityFaceImage.next(),this.isShowWebcamIdentityGuestFaceImage=!1}}onImportImageChange(e,i){const a=i.currentTarget;a.files.length&&(this.currentFileUpload=a.files[0],this.uploadImage().subscribe(({data:o})=>{switch(e){case"citizenFrontImage":this.data.citizenFrontImage=o,this.frontCardImageSubject.next(o),this.guestFrontCardImageSubject.next(o);break;case"citizenBackImage":this.data.citizenBackImage=o,this.backCardImageSubject.next(o),this.guestBackCardImageSubject.next(o);break;case"citizenImageFace":this.data.citizenImageFace=o,this.citizenImageFaceSubject.next(o),this.guestFaceImageSubject.next(o);break;default:return}}))}handleInitError(e){this.errors.push(e)}openBiostationConfig(){this._matDialog.open(nt.I,{disableClose:!1,data:{staffId:null,customerId:null,outsideCustomerId:this.data.outsideCustomerId??null}}).afterClosed().subscribe(i=>{i&&this.getDetailWithVisitor(this.data.outsideCustomerId)})}initValue(){this.data={ticketHauntId:null,isCompany:!0,isApartment:!1,companyId:null,companyName:null,apartmentId:null,apartmentCode:null,content:null,arrivalTime:null,departureTime:null,isVisitor:!1,statusId:null,statusName:null,statusColor:null,statusBackgroundColor:null,outsideCustomerId:null,fullName:null,phoneNumber:null,email:null,citizenNumber:null,citizenFrontImage:null,citizenBackImage:null,citizenImageFace:null,customerTypeId:null,customerTypeName:null,description:null},this.frontCardImageSubject.next(this.data.citizenFrontImage),this.backCardImageSubject.next(this.data.citizenBackImage),this.citizenImageFaceSubject.next(this.data.citizenImageFace),this.guestFrontCardImageSubject.next(this.data.citizenFrontImage),this.guestBackCardImageSubject.next(this.data.citizenBackImage),this.guestFaceImageSubject.next(this.data.citizenImageFace)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.so),t.Y36(Z.R),t.Y36(u.Vn),t.Y36(L.H),t.Y36(Q),t.Y36(ct.J),t.Y36(st.V),t.Y36(lt.a),t.Y36(rt.zb),t.Y36(m.uw),t.Y36(ut.C),t.Y36(m.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ticket-haunt-popup"]],features:[t.qOj],decls:89,vars:58,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","lg:min-w-240","-m-6","md:max-w-240"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","master.registerVisitorTicket",1,"text-lg","font-medium","text-white"],["mat-icon-button","",3,"click"],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-80","max-w-screen-80","px-6","pt-6","pb-0","space-y-6","overflow-y-auto","bg-slate-100"],[1,"bg-card","rounded-md","p-6","gap-5","shadow","flex","flex-col","h-full"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"flex","flex-row","sm:flex-col","p-6","gap-6"],[1,"flex","flex-1","flex-row","gap-6"],["color","primary",1,"space-x-10","sm:space-x-4",3,"disabled","ngModel","ngModelChange"],["value","company"],["value","apartment"],["label","master.company","class","flex-1",3,"actionEnum","listData","model","modelChange",4,"ngIf"],["label","master.apartment","class","flex-1",3,"actionEnum","listData","model","modelChange",4,"ngIf"],[1,"flex"],["label","master.reason/content","type","textarea","isDisableLength","true",1,"flex-1","w-full",3,"actionEnum","model","modelChange"],[1,"bg-card","rounded-md","px-6","pb-6","gap-5","shadow","flex","flex-col","h-full","ng-star-inserted"],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5","px-6","py-4"],["label","fullName","isDisableLength","true",1,"flex-1","w-full",3,"actionEnum","model","isRequired","modelChange"],["label","master.citizenNumber","isDisableLength","true",1,"flex-1","w-full",3,"model","actionEnum","isRequired","modelChange"],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5","px-6","pb-4"],["label","master.phoneNumber","isDisableLength","true",1,"flex-1","w-full",3,"actionEnum","model","modelChange"],["label","master.email","isDisableLength","true",1,"flex-1","w-full",3,"actionEnum","model","modelChange"],["label","master.customerGroup",1,"w-full",3,"actionEnum","listData","model","modelChange"],[1,"bg-card","rounded-md","px-6","pb-6","gap-5","shadow","flex","flex-col","sm:flex-row","justify-between","sm:gap-4","h-full"],[1,"w-full","text-center","font-bold","py-2"],[1,"w-full","justify-center","items-center","font-bold","pb-2"],[1,"flex-1","border-2","border-dashed","border-primary-300","bg-primary-50","rounded-lg","w-full","h-[140px]","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-col","space-y-2"],[1,"flex","space-x-2","justify-center","gap-5","pb-7"],["class","flex flex-col items-center",4,"ngIf"],["class","text-sm font-normal mt-1 text-slate-500",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],["identityCardFrontInp",""],[4,"ngIf"],["class","flex justify-center items-center space-x-4",4,"ngIf"],["identityCardBackInp",""],["identityGuestFaceInp",""],[1,"flex","space-x-2","px-10","py-5","justify-between"],["class","flex justify-start",4,"ngIf"],[1,"flex","flex-row","justify-end","space-x-4"],["mat-button","",3,"click"],["transloco","close",1,"text-base","leading-6","font-medium","cursor-pointer"],["mat-flat-button","","class","w-min",3,"color","click",4,"ngIf"],["label","master.company",1,"flex-1",3,"actionEnum","listData","model","modelChange"],["label","master.apartment",1,"flex-1",3,"actionEnum","listData","model","modelChange"],[1,"flex","flex-col","items-center"],[1,"hover:scale-110","transition-transform","duration-300",3,"click"],["svgIcon","heroicons_outline:camera",1,"transition-colors","duration-300","hover:text-orange-600","icon-size-7"],[1,"text-sm","font-normal","mt-1","text-slate-500"],["svgIcon","heroicons_outline:arrow-up-tray",1,"transition-colors","duration-300","hover:text-orange-600","icon-size-7"],["nz-image","","class","object-fit h-[140px] w-[500px] rounded-md","style","object-fit: contain; width: 500px; height: 140px;",3,"nzSrc",4,"ngIf"],["class","object-fit rounded-md",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"object-fit","rounded-md",3,"height","width","trigger","imageCapture","initError"],["nz-image","",1,"object-fit","h-[140px]","w-[500px]","rounded-md",2,"object-fit","contain","width","500px","height","140px",3,"nzSrc"],[1,"flex","justify-center","items-center","space-x-4"],["class","mt-4","color","primary","mat-flat-button","","transloco","vime.changeNewImage",3,"click",4,"ngIf"],["class","mt-4","mat-flat-button","",3,"color","click",4,"ngIf"],["color","primary","mat-flat-button","","transloco","vime.changeNewImage",1,"mt-4",3,"click"],["mat-flat-button","",1,"mt-4",3,"color","click"],["nz-image","","class","object-fit h-[140px] w-[250px] rounded-md","style","height: inherit;width: 100%; object-fit: contain;",3,"nzSrc",4,"ngIf"],["class","rounded-md mb-4 border",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"rounded-md","mb-4","border",3,"height","width","trigger","imageCapture","initError"],["nz-image","",1,"object-fit","h-[140px]","w-[250px]","rounded-md",2,"height","inherit","width","100%","object-fit","contain",3,"nzSrc"],[1,"flex","justify-start"],["mat-flat-button","",1,"gap-2",3,"color","click"],["svgIcon","heroicons_solid:cog-6-tooth",1,"icon-size-5"],["mat-flat-button","",1,"w-min",3,"color","click"],["transloco","master.proceedCheckIn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.onCancel()}),t._UZ(4,"mat-icon",4),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.checkBattery()}),t._UZ(6,"mat-icon",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"span",8),t._uU(11),t.ALo(12,"transloco"),t.qZA()(),t.TgZ(13,"div",9)(14,"div",10)(15,"mat-radio-group",11),t.NdJ("ngModelChange",function(o){return i.selectedOption=o})("ngModelChange",function(){return i.onOptionChange()}),t.TgZ(16,"mat-radio-button",12),t._uU(17),t.ALo(18,"transloco"),t.qZA(),t.TgZ(19,"mat-radio-button",13),t._uU(20),t.ALo(21,"transloco"),t.qZA()(),t.YNc(22,mt,1,3,"cm-select",14),t.YNc(23,dt,1,3,"cm-select",15),t.qZA(),t.TgZ(24,"div",16)(25,"cm-input",17),t.NdJ("modelChange",function(o){return i.data.content=o}),t.qZA()()()(),t.TgZ(26,"div",18)(27,"div",19)(28,"cm-input",20),t.NdJ("modelChange",function(o){return i.data.fullName=o}),t.qZA(),t.TgZ(29,"cm-input",21),t.NdJ("modelChange",function(o){return i.data.citizenNumber=o}),t.qZA()(),t.TgZ(30,"div",22)(31,"cm-input",23),t.NdJ("modelChange",function(o){return i.data.phoneNumber=o}),t.qZA(),t.TgZ(32,"cm-input",24),t.NdJ("modelChange",function(o){return i.data.email=o}),t.qZA()(),t.TgZ(33,"div",22)(34,"cm-select",25),t.NdJ("modelChange",function(o){return i.data.customerTypeId=o}),t.qZA()()(),t.TgZ(35,"div",26)(36,"div",27)(37,"div",28),t._uU(38),t.ALo(39,"transloco"),t.qZA(),t.TgZ(40,"div",29)(41,"div",30)(42,"div",31)(43,"div",32),t.YNc(44,pt,6,3,"div",33),t.YNc(45,gt,6,3,"div",33),t.qZA(),t.YNc(46,ht,3,3,"span",34),t.qZA(),t.TgZ(47,"input",35,36),t.NdJ("change",function(o){return i.onImportImageChange("citizenFrontImage",o)}),t.qZA(),t.YNc(49,Tt,3,2,"div",37),t.qZA()(),t.YNc(50,It,4,2,"div",38),t.qZA(),t.TgZ(51,"div",27)(52,"div",28),t._uU(53),t.ALo(54,"transloco"),t.qZA(),t.TgZ(55,"div",29)(56,"div",30)(57,"div",31)(58,"div",32),t.YNc(59,Ct,6,3,"div",33),t.YNc(60,kt,6,3,"div",33),t.qZA(),t.YNc(61,Zt,3,3,"span",34),t.qZA(),t.TgZ(62,"input",35,39),t.NdJ("change",function(o){return i.onImportImageChange("citizenBackImage",o)}),t.qZA(),t.YNc(64,St,3,2,"div",37),t.qZA()(),t.YNc(65,Nt,4,2,"div",38),t.qZA(),t.TgZ(66,"div",27)(67,"div",28),t._uU(68),t.ALo(69,"transloco"),t.qZA(),t.TgZ(70,"div",29)(71,"div",30)(72,"div",31)(73,"div",32),t.YNc(74,zt,6,3,"div",33),t.YNc(75,Jt,6,3,"div",33),t.qZA(),t.YNc(76,jt,3,3,"span",34),t.qZA(),t.TgZ(77,"input",35,40),t.NdJ("change",function(o){return i.onImportImageChange("citizenImageFace",o)}),t.qZA(),t.YNc(79,Ut,3,2,"div",37),t.qZA()(),t.YNc(80,Mt,4,2,"div",38),t.qZA()()(),t.TgZ(81,"div",41),t.YNc(82,Bt,1,0,"div",42),t.YNc(83,Yt,6,4,"div",42),t.TgZ(84,"div",43)(85,"button",44),t.NdJ("click",function(){return i.onCancel()}),t._UZ(86,"label",45),t.qZA(),t.YNc(87,Et,2,1,"button",46),t.YNc(88,Dt,3,1,"button",46),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(5),t.Oqu(t.lcZ(12,46,"master.ticketInfo")),t.xp6(4),t.Q6J("disabled","create"!==i.action)("ngModel",i.selectedOption),t.xp6(2),t.Oqu(t.lcZ(18,48,"master.company")),t.xp6(3),t.Oqu(t.lcZ(21,50,"master.apartment")),t.xp6(2),t.Q6J("ngIf",i.data.isCompany),t.xp6(1),t.Q6J("ngIf",i.data.isApartment),t.xp6(2),t.Q6J("actionEnum","create"!==i.action?"view":"new")("model",i.data.content),t.xp6(3),t.Q6J("actionEnum","create"!==i.action?"view":"new")("model",i.data.fullName)("isRequired",!0),t.xp6(1),t.Q6J("model",i.data.citizenNumber)("actionEnum",null==i.data.outsideCustomerId?"new":"view")("isRequired",!0),t.xp6(2),t.Q6J("actionEnum","create"!==i.action?"view":"new")("model",i.data.phoneNumber),t.xp6(1),t.Q6J("actionEnum","create"!==i.action?"view":"new")("model",i.data.email),t.xp6(2),t.Q6J("actionEnum","create"!==i.action?"view":"new")("listData",i.customerTypes)("model",i.data.customerTypeId),t.xp6(4),t.hij(" ",t.lcZ(39,52,"vime.citizenImageFace")," "),t.xp6(6),t.Q6J("ngIf",!i.isShowWebcamIdentityCardFront&&!i.frontCardImageSubject.value&&"create"===i.action),t.xp6(1),t.Q6J("ngIf",!i.frontCardImageSubject.value&&!i.isShowWebcamIdentityCardFront&&"create"===i.action),t.xp6(1),t.Q6J("ngIf",!i.isShowWebcamIdentityCardFront&&!i.frontCardImageSubject.value&&"view"!==i.action),t.xp6(3),t.Q6J("ngIf",i.frontCardImageSubject.value||i.isShowWebcamIdentityCardFront&&"create"===i.action),t.xp6(1),t.Q6J("ngIf","create"===i.action),t.xp6(3),t.hij(" ",t.lcZ(54,54,"vime.citizenBackImage")," "),t.xp6(6),t.Q6J("ngIf",!i.isShowWebcamIdentityCardBack&&!i.backCardImageSubject.value&&"view"!==i.action),t.xp6(1),t.Q6J("ngIf",!i.backCardImageSubject.value&&!i.isShowWebcamIdentityCardBack&&"create"===i.action),t.xp6(1),t.Q6J("ngIf",!i.isShowWebcamIdentityCardBack&&!i.backCardImageSubject.value&&"view"!==i.action),t.xp6(3),t.Q6J("ngIf",i.backCardImageSubject.value||i.isShowWebcamIdentityCardBack&&"create"===i.action),t.xp6(1),t.Q6J("ngIf","create"===i.action),t.xp6(3),t.hij(" ",t.lcZ(69,56,"vime.citizenImageFace")," "),t.xp6(6),t.Q6J("ngIf",!i.isShowWebcamIdentityGuestFaceImage&&!i.citizenImageFaceSubject.value&&"create"===i.action),t.xp6(1),t.Q6J("ngIf",!i.citizenImageFaceSubject.value&&!i.isShowWebcamIdentityGuestFaceImage&&"create"===i.action),t.xp6(1),t.Q6J("ngIf",!i.isShowWebcamIdentityGuestFaceImage&&!i.citizenImageFaceSubject.value&&"create"===i.action),t.xp6(3),t.Q6J("ngIf",i.citizenImageFaceSubject.value||i.isShowWebcamIdentityGuestFaceImage&&"create"===i.action),t.xp6(1),t.Q6J("ngIf","create"===i.action),t.xp6(2),t.Q6J("ngIf","view"!==i.action),t.xp6(1),t.Q6J("ngIf","view"===i.action),t.xp6(4),t.Q6J("ngIf","create"===i.action),t.xp6(1),t.Q6J("ngIf","check-out"===i.action))},dependencies:[g.lW,g.RK,b.Hw,f.JJ,f.On,u.KI,z.Ie,J.i3,p.O5,U.f,q.W,A.VQ,A.U0,u.Ot],encapsulation:2}),n})();var O=s(50787),Vt=s(1217),M=s(33231),Wt=s(70391);function Gt(n,c){if(1&n&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" [",e.description,"] - ",e.name," ")}}let Rt=(()=>{class n extends P.Y{constructor(e,i,a,o,l){super(a,i,e),this._dialogRef=e,this.fuseConfirmationService=i,this._translocoService=a,this._matDialog=o,this._unsubscribeAll=new h.x,this.isLoading=!1,this.selectedVisitor=null,this.listVisitor=l.listVisitor}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onProceed(){this._matDialog.open(y,{disableClose:!0,data:{selectedVisitor:this.selectedVisitor,action:"create"}}).afterClosed().subscribe(i=>{this.closePopup()})}onCancel(){this._baseDialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.so),t.Y36(Z.R),t.Y36(u.Vn),t.Y36(m.uw),t.Y36(m.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["select-visitor-popup"]],features:[t.qOj],decls:27,vars:23,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","lg:min-w-200","-m-6","md:max-w-160"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","master.selectCustomer",1,"text-lg","font-medium"],["mat-icon-button","",3,"click"],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-80","max-w-screen-80","px-6","pt-6","pb-0","space-y-6","overflow-y-auto","bg-slate-100"],[1,"bg-card","rounded-md","p-6","gap-5","shadow","flex","flex-col","h-full"],[1,"pb-2","text-lg","font-semibold"],[3,"ngModel","disabled","ngModelChange"],[3,"ngModel","placeholderLabel","noEntriesFoundLabel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","space-x-2","px-10","py-5","justify-end"],[1,"flex","flex-row","justify-start","space-x-4"],["mat-button","",3,"click"],["transloco","close",1,"text-base","leading-6","font-medium","cursor-pointer"],["mat-flat-button","",1,"w-min",3,"color","click"],["transloco","master.proceedCheckIn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.onCancel()}),t._UZ(4,"mat-icon",4),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"mat-label",7),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-select",8),t.NdJ("ngModelChange",function(o){return i.selectedVisitor=o}),t.TgZ(12,"mat-option")(13,"ngx-mat-select-search",9),t.NdJ("ngModelChange",function(o){return i.search=o}),t.ALo(14,"transloco"),t.ALo(15,"transloco"),t.qZA()(),t.YNc(16,Gt,2,3,"mat-option",10),t.ALo(17,"filter"),t.TgZ(18,"mat-option",11),t._uU(19),t.ALo(20,"transloco"),t.qZA()()()()(),t.TgZ(21,"div",12)(22,"div",13)(23,"button",14),t.NdJ("click",function(){return i.onCancel()}),t._UZ(24,"label",15),t.qZA(),t.TgZ(25,"button",16),t.NdJ("click",function(){return i.onProceed()}),t._UZ(26,"label",17),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(4),t.hij(" ",t.lcZ(9,11,"searchByCitizenNumberOrGuestName")," "),t.xp6(3),t.Q6J("ngModel",i.selectedVisitor)("disabled",i.isLoading),t.xp6(2),t.s9C("placeholderLabel",t.lcZ(14,13,"search")),t.s9C("noEntriesFoundLabel",t.lcZ(15,15,"no_data")),t.Q6J("ngModel",i.search),t.xp6(3),t.Q6J("ngForOf",t.Dn7(17,17,i.listVisitor,"name",i.search)),t.xp6(2),t.Q6J("value",null),t.xp6(1),t.hij(" ",t.lcZ(20,21,"master.addNewCustomer")," "),t.xp6(6),t.Q6J("color","primary"))},dependencies:[I.KE,I.hX,g.lW,g.RK,b.Hw,f.JJ,f.On,u.KI,p.sg,O.gD,Vt.ey,M.nu,u.Ot,Wt.g],encapsulation:2}),n})();function Kt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,o=t.oxw();return t.KtG(o.onClickCheckOut(a.ticketHauntId))}),t._UZ(1,"mat-icon",36),t._uU(2),t.qZA()}2&n&&(t.xp6(2),t.hij(" ","Check-out"," "))}const B=function(n){return{"background-color":n}};function Xt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr",25),t.NdJ("dblclick",function(){const o=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onClickView(o.ticketHauntId))}),t.TgZ(1,"td")(2,"span",26)(3,"button",27)(4,"mat-icon"),t._uU(5," more_vert "),t.qZA(),t.TgZ(6,"mat-menu",null,28),t.ynx(8),t.TgZ(9,"button",29),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onClickView(o.ticketHauntId))}),t._UZ(10,"mat-icon",30),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t.YNc(13,Kt,3,1,"button",31),t.BQk(),t.qZA()()()(),t.TgZ(14,"td")(15,"div",32),t._uU(16),t.qZA()(),t.TgZ(17,"td",33),t._uU(18),t.qZA(),t.TgZ(19,"td",33),t._uU(20),t.qZA(),t.TgZ(21,"td",33),t._uU(22),t.qZA(),t.TgZ(23,"td",33),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.ALo(27,"date"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"td")(32,"div",34),t._UZ(33,"div",35),t.TgZ(34,"span"),t._uU(35),t.ALo(36,"transloco"),t.qZA()()()()}if(2&n){const e=c.$implicit,i=c.index,a=t.MAs(7);t.oxw();const o=t.MAs(25);t.Q6J("ngStyle",t.VKq(27,B,e.statusBackgroundColor)),t.xp6(3),t.Q6J("matMenuTriggerFor",a),t.xp6(8),t.hij(" ",t.lcZ(12,17,"view")," "),t.xp6(2),t.Q6J("ngIf","STATUS_CHECKOUT"!==e.statusId),t.xp6(3),t.hij("",(o.nzPageIndex-1)*o.nzPageSize+i+1," "),t.xp6(1),t.Q6J("matTooltip",e.fullName),t.xp6(1),t.hij(" ",e.fullName," "),t.xp6(1),t.Q6J("matTooltip",e.citizenNumber),t.xp6(1),t.hij(" ",e.citizenNumber," "),t.xp6(1),t.Q6J("matTooltip",e.companyName),t.xp6(1),t.hij(" ",e.companyName," "),t.xp6(1),t.Q6J("matTooltip",e.apartmentCode),t.xp6(1),t.hij(" ",e.apartmentCode," "),t.xp6(2),t.hij(" ",t.xi3(27,19,e.arrivalTime,"dd/MM/yyyy HH:mm")," "),t.xp6(3),t.hij(" ",t.xi3(30,22,e.departureTime,"dd/MM/yyyy HH:mm")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(29,B,e.statusColor)),t.xp6(2),t.Oqu(t.lcZ(36,25,e.statusName))}}const $t=[{path:"visitor-customers",component:K,children:[{path:"",component:(()=>{class n{constructor(e,i,a,o,l,w){this._ticketHauntService=e,this._translocoService=i,this._router=a,this._activationRoute=o,this._outSideCustomerService=l,this._matDialog=w,this.actionEnum="new",this._unsubscribeAll=new h.x,this._debounce=new h.x,this.isLoading=!1,this.filter={textSearch:null,startDate:j()().startOf("week").toISOString(),endDate:j()().endOf("week").toISOString(),status:null},this.listVisitor=[],this.listTicketHaunt=[],this.visitorStatus=[]}ngOnInit(){this.getAllTicketHaunts(),this.getStatuses(),this.getVisitor(),this._debounce.pipe((0,$.b)(300),(0,r.R)(this._unsubscribeAll)).subscribe(()=>{this.getAllTicketHaunts()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getAllTicketHaunts(){this.isLoading=!0,this._ticketHauntService.getAll(this.filter).pipe((0,T.x)(()=>this.isLoading=!1),(0,r.R)(this._unsubscribeAll)).subscribe(({data:e})=>{e&&(this.listTicketHaunt=e)})}getVisitor(){this.isLoading=!0,this._outSideCustomerService.getAll({isUse:!0}).pipe((0,r.R)(this._unsubscribeAll)).subscribe(({data:e})=>{this.listVisitor=e.map(i=>({id:i.outsideCustomerId,name:i.citizenNumber,description:i.fullName})),this.isLoading=!1})}getStatuses(){this._ticketHauntService.getVisitorStatus().pipe((0,r.R)(this._unsubscribeAll)).subscribe(({data:e})=>{this.visitorStatus=e})}refreshData(){this.getAllTicketHaunts()}onSearch(){this._debounce.next()}onClickCheckIn(){this._matDialog.open(Rt,{disableClose:!0,data:{listVisitor:this.listVisitor}}).afterClosed().subscribe(i=>{this.getAllTicketHaunts()})}onClickView(e){this._matDialog.open(y,{disableClose:!0,data:{ticketHauntId:e,action:"view"}}).afterClosed().subscribe(a=>{this.getAllTicketHaunts()})}onClickCheckOut(e){this._matDialog.open(y,{disableClose:!0,data:{ticketHauntId:e,action:"check-out"}}).afterClosed().subscribe(a=>{this.getAllTicketHaunts()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Q),t.Y36(u.Vn),t.Y36(x.F0),t.Y36(x.gz),t.Y36(L.H),t.Y36(m.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ticket-haunt-list"]],decls:57,vars:47,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-col"],[1,"flex","justify-between","items-center","bg-card","border-b","dark:bg-transparent","px-6","sm:py-5","md:px-8","gap-8"],[1,"leading-none","text-3xl","font-extrabold","tracking-tight"],[1,"space-x-4","flex","items-center"],["mat-flat-button","",1,"w-min",3,"color","click"],[1,"mr-2",3,"svgIcon"],["transloco","Check in"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","heroicons_outline:arrow-path",1,"text-slate-500"],[1,"bg-card","m-6","rounded-md","shadow"],[1,"p-6","space-y-6"],[1,"flex-col","flex","sm:flex-row","sm:justify-between"],[1,"flex","flex-col","w-full","h-full","space-y-6"],[1,"flex","gap-4"],["label","searchByCitizenNumberOrGuestName",1,"flex-1",3,"model","isDisableLength","placeholder","modelChange","keyup"],["type","daterangepicker","label","vime.times",1,"min-w-64",3,"start","end","startChange","endChange"],["label","status",1,"flex-1",3,"listData","model","modelChange"],[1,"border-b","w-full"],["nzShowSizeChanger","","nzBordered","true",3,"nzLoading","nzData"],["basicTable",""],["nzAlign","center","nzWidth","70px"],["nzWidth","200px"],["nzWidth","150px"],["class","hover:cursor-pointer",3,"ngStyle","dblclick",4,"ngFor","ngForOf"],[1,"hover:cursor-pointer",3,"ngStyle","dblclick"],[1,"items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["headerMenu",""],["mat-menu-item","",3,"click"],["svgIcon","heroicons_outline:eye"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"h-full","flex","justify-center","items-center"],[1,"w-50","truncate","text-ellipsis",3,"matTooltip"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","mr-2",3,"ngStyle"],["svgIcon","heroicons_outline:x-circle",1,"text-red-500"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.onClickCheckIn()}),t._UZ(8,"mat-icon",6)(9,"label",7),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return i.refreshData()}),t.ALo(11,"transloco"),t._UZ(12,"mat-icon",9),t.qZA()()()(),t.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"cm-input",15),t.NdJ("modelChange",function(o){return i.filter.textSearch=o})("keyup",function(){return i.onSearch()}),t.ALo(19,"transloco"),t.qZA(),t.TgZ(20,"cm-input",16),t.NdJ("startChange",function(o){return i.filter.startDate=o})("endChange",function(o){return i.filter.endDate=o})("startChange",function(){return i.onSearch()})("endChange",function(){return i.onSearch()}),t.qZA(),t.TgZ(21,"cm-select",17),t.NdJ("modelChange",function(o){return i.filter.status=o})("modelChange",function(){return i.onSearch()}),t.qZA()(),t._UZ(22,"div",18),t.qZA()(),t.TgZ(23,"div")(24,"nz-table",19,20)(26,"thead")(27,"tr")(28,"th",21),t._uU(29),t.ALo(30,"transloco"),t.qZA(),t.TgZ(31,"th",21),t._uU(32),t.ALo(33,"transloco"),t.qZA(),t.TgZ(34,"th",22),t._uU(35),t.ALo(36,"transloco"),t.qZA(),t.TgZ(37,"th",22),t._uU(38),t.ALo(39,"transloco"),t.qZA(),t.TgZ(40,"th",22),t._uU(41),t.ALo(42,"transloco"),t.qZA(),t.TgZ(43,"th",22),t._uU(44),t.ALo(45,"transloco"),t.qZA(),t.TgZ(46,"th",22),t._uU(47),t.ALo(48,"transloco"),t.qZA(),t.TgZ(49,"th",22),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t.TgZ(52,"th",23),t._uU(53),t.ALo(54,"transloco"),t.qZA()()(),t.TgZ(55,"tbody"),t.YNc(56,Xt,37,31,"tr",24),t.qZA()()()()()()),2&e){const a=t.MAs(25);t.xp6(4),t.hij("",t.lcZ(5,23,"nav.visitorCustomers")," "),t.xp6(3),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","add"),t.xp6(2),t.s9C("matTooltip",t.lcZ(11,25,"com.refresh")),t.xp6(8),t.s9C("placeholder",t.lcZ(19,27,"plholder.enterCustomerNameOrCitizenNumber")),t.Q6J("model",i.filter.textSearch)("isDisableLength",!0),t.xp6(2),t.Q6J("start",i.filter.startDate)("end",i.filter.endDate),t.xp6(1),t.Q6J("listData",i.visitorStatus)("model",i.filter.status),t.xp6(3),t.Q6J("nzLoading",i.isLoading)("nzData",i.listTicketHaunt),t.xp6(5),t.Oqu(t.lcZ(30,29,"master.function")),t.xp6(3),t.Oqu(t.lcZ(33,31,"master.no")),t.xp6(3),t.Oqu(t.lcZ(36,33,"master.fullName")),t.xp6(3),t.Oqu(t.lcZ(39,35,"master.citizenNumber")),t.xp6(3),t.Oqu(t.lcZ(42,37,"master.company")),t.xp6(3),t.Oqu(t.lcZ(45,39,"master.apartment")),t.xp6(3),t.Oqu(t.lcZ(48,41,"master.arriveTime")),t.xp6(3),t.Oqu(t.lcZ(51,43,"master.departTime")),t.xp6(3),t.Oqu(t.lcZ(54,45,"status")),t.xp6(3),t.Q6J("ngForOf",a.data)}},dependencies:[d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z,d.UX,g.lW,g.RK,b.Hw,F.gM,u.KI,p.sg,p.O5,p.PC,U.f,q.W,v.VK,v.OP,v.p6,u.Ot,p.uU],encapsulation:2}),n})()}]}],te=new t.OlP("huh"),ee=window.MauiInterop;let ie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:Window,useValue:window},{provide:te,useValue:ee},{provide:m.WI,useValue:{}},{provide:m.so,useValue:{}},{provide:N.u7,useValue:N.iF}],imports:[x.Bz.forChild($t),I.lN,E.c,Y.p9,d.HQ,g.ot,b.Ps,F.AV,R.vO,G.qw,f.u5,u.y4,z.Gb,J.Tm,p.ez,D.rP,W.c,V.Nh,b.Ps,v.Tx,O.LD,M.Co,A.Fk]}),n})()}}]);