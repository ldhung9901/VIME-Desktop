"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[216],{32950:(N,v,s)=>{s.d(v,{F:()=>h});var g=s(22223);let h=(()=>{class l{constructor(u){this.el=u,this.fallbackSrc="assets/images/fallback-image/blank-image.svg"}onError(){const u=this.el.nativeElement;u&&(u.src=this.fallbackSrc)}}return l.\u0275fac=function(u){return new(u||l)(g.Y36(g.SBq))},l.\u0275dir=g.lG2({type:l,selectors:[["img","nzSrc",""]],hostBindings:function(u,k){1&u&&g.NdJ("error",function(){return k.onError()})},inputs:{fallbackSrc:"fallbackSrc"}}),l})()},92982:(N,v,s)=>{s.d(v,{F:()=>h});var g=s(22223);let h=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=g.oAB({type:l}),l.\u0275inj=g.cJS({}),l})()},3914:(N,v,s)=>{s.d(v,{G:()=>h});var g=s(22223);let h=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=g.oAB({type:l}),l.\u0275inj=g.cJS({}),l})()},17216:(N,v,s)=>{s.r(v),s.d(v,{OutsideCustomerModule:()=>Ct});var g=s(17406),h=s(44755),l=s(39401),f=s(51728),u=s(11292),k=s(25580),Q=s(99114),A=s(430),K=s(69609),B=s(50877),M=s(83649),p=s(31531),P=s(74473),_=s(30430),V=s(61972),Y=s(22497),w=s(74050),x=s(58016),X=s(56467),e=s(22223);let $=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["outside-customer"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[p.lC],encapsulation:2}),i})();var m=s(77579),ee=s(78372),C=s(82722),O=s(28746),F=s(79925),J=s(90504),G=s(3990),q=s(32950);function te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("dblclick",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onClickView(a.outsideCustomerId))}),e.TgZ(1,"td",25)(2,"span",26)(3,"button",27)(4,"mat-icon"),e._uU(5," more_vert "),e.qZA(),e.TgZ(6,"mat-menu",null,28),e.ynx(8),e.TgZ(9,"button",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onClickView(a.outsideCustomerId))}),e.TgZ(10,"mat-icon"),e._uU(11,"visibility"),e.qZA(),e._uU(12),e.ALo(13,"transloco"),e.qZA(),e.TgZ(14,"button",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onClickEdit(a.outsideCustomerId))}),e.TgZ(15,"mat-icon"),e._uU(16,"edit"),e.qZA(),e._uU(17),e.ALo(18,"transloco"),e.qZA(),e.BQk(),e.qZA()()()(),e.TgZ(19,"td",25),e._uU(20),e.qZA(),e.TgZ(21,"td")(22,"div",30),e._UZ(23,"img",31),e.qZA()(),e.TgZ(24,"td",32)(25,"div",33),e._uU(26),e.qZA()(),e.TgZ(27,"td",34)(28,"div",33),e._uU(29),e.qZA()(),e.TgZ(30,"td",34)(31,"div",33),e._uU(32),e.qZA()(),e.TgZ(33,"td",34)(34,"div",33),e._uU(35),e.qZA()(),e.TgZ(36,"td",25),e._UZ(37,"mat-checkbox",35),e.qZA(),e.TgZ(38,"td",25),e._UZ(39,"mat-checkbox",35),e.qZA()()}if(2&i){const t=r.$implicit,n=r.index,o=e.MAs(7);e.oxw();const a=e.MAs(23);e.xp6(3),e.Q6J("matMenuTriggerFor",o),e.xp6(9),e.hij(" ",e.lcZ(13,17,"view")," "),e.xp6(5),e.hij(" ",e.lcZ(18,19,"edit")," "),e.xp6(3),e.Oqu((a.nzPageIndex-1)*a.nzPageSize+n+1),e.xp6(3),e.Q6J("nzSrc",t.citizenImageFace),e.xp6(1),e.Q6J("matTooltip",t.fullName),e.xp6(2),e.hij(" ",t.fullName," "),e.xp6(1),e.Q6J("matTooltip",t.phoneNumber),e.xp6(2),e.hij(" ",t.phoneNumber," "),e.xp6(1),e.Q6J("matTooltip",t.email),e.xp6(2),e.hij(" ",t.email," "),e.xp6(1),e.Q6J("matTooltip",t.citizenNumber),e.xp6(2),e.hij(" ",t.citizenNumber," "),e.xp6(2),e.Q6J("readOnly",!0)("checked",t.isAppointment),e.xp6(2),e.Q6J("readOnly",!0)("checked",t.isVisitor)}}let ie=(()=>{class i{constructor(t,n,o,a){this._outsideCustomerService=t,this._translocoService=n,this._router=o,this._activationRoute=a,this._unsubscribeAll=new m.x,this._debounce=new m.x,this.isLoading=!1,this.filter={textSearch:null,isUse:!0},this.outsideCustomers=[]}ngOnInit(){this.getAllOutsideCustomers(),this._debounce.pipe((0,ee.b)(300),(0,C.R)(this._unsubscribeAll)).subscribe(()=>{this.getAllOutsideCustomers()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getAllOutsideCustomers(){this.isLoading=!0,this._outsideCustomerService.getAll(this.filter).pipe((0,O.x)(()=>this.isLoading=!1),(0,C.R)(this._unsubscribeAll)).subscribe(({data:t})=>{t&&(this.outsideCustomers=t)})}refreshData(){this.getAllOutsideCustomers()}onSearch(){this._debounce.next()}onClickView(t){this._router.navigate([t],{relativeTo:this._activationRoute})}onClickAdd(){this._router.navigate(["create"],{relativeTo:this._activationRoute})}onClickEdit(t){this._router.navigate([`edit/${t}`],{relativeTo:this._activationRoute})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.H),e.Y36(_.Vn),e.Y36(p.F0),e.Y36(p.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["outside-customer-list"]],decls:55,vars:46,consts:[[1,"flex","flex-col","w-full","flex-1"],[1,"bg-card","flex","flex-col","sm:flex-row","items-start","sm:items-center","sm:justify-between","px-6","py-5","border-b"],[1,"flex-1","text-3xl","font-bold","tracking-tight","leading-10"],["mat-flat-button","","color","primary",1,"mr-4","w-min","text-white",3,"click"],[3,"svgIcon"],["transloco","add",1,"ml-2"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","heroicons_outline:arrow-path",1,"text-slate-500"],[1,"flex-1","flex","flex-col","rounded-md","shadow","p-6","gap-6"],[1,"flex-1","flex","flex-col","rounded-md","shadow","p-6","gap-6","bg-card"],[1,"flex-col","flex","sm:flex-row","sm:justify-between"],[1,"flex","flex-col","w-full","h-full","space-y-6"],[1,"flex","gap-4"],["label","search",1,"flex-1",3,"model","isDisableLength","placeholder","modelChange","keyup"],["color","primary",1,"text-lg","font-medium","flex-1","flex","items-end",3,"ngModel","ngModelChange"],[1,"border-b","w-full"],["nzShowSizeChanger","","nzBordered","true",3,"nzData","nzLoading"],["basicTable",""],["nzWidth","111px","nzAlign","center"],["nzWidth","70px","nzAlign","center"],["nzWidth","100px","nzAlign","center"],["nzWidth","200px"],["nzWidth","150px","nzAlign","center"],["class","hover:cursor-pointer",3,"dblclick",4,"ngFor","ngForOf"],[1,"hover:cursor-pointer",3,"dblclick"],["nzAlign","center"],[1,"items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["headerMenu",""],["mat-menu-item","",3,"click"],[1,"flex","justify-center"],["nz-image","",1,"h-8","w-8","rounded-full",3,"nzSrc"],[1,"w-50","text-ellipsis","truncate",3,"matTooltip"],[1,"w-50","text-ellipsis","truncate"],[3,"matTooltip"],["color","primary",3,"readOnly","checked"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.onClickAdd()}),e._UZ(6,"mat-icon",4)(7,"label",5),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.refreshData()}),e.ALo(9,"transloco"),e._UZ(10,"mat-icon",7),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"cm-input",13),e.NdJ("modelChange",function(a){return n.filter.textSearch=a})("keyup",function(){return n.onSearch()}),e.ALo(17,"transloco"),e.qZA(),e.TgZ(18,"mat-slide-toggle",14),e.NdJ("ngModelChange",function(a){return n.filter.isUse=a})("ngModelChange",function(){return n.onSearch()}),e._uU(19),e.ALo(20,"transloco"),e.qZA()(),e._UZ(21,"div",15),e.qZA()(),e.TgZ(22,"nz-table",16,17)(24,"thead")(25,"tr")(26,"th",18),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"th",19),e._uU(30),e.ALo(31,"transloco"),e.qZA(),e.TgZ(32,"th",20),e._uU(33),e.ALo(34,"transloco"),e.qZA(),e.TgZ(35,"th",21),e._uU(36),e.ALo(37,"transloco"),e.qZA(),e.TgZ(38,"th",21),e._uU(39),e.ALo(40,"transloco"),e.qZA(),e.TgZ(41,"th",21),e._uU(42),e.ALo(43,"transloco"),e.qZA(),e.TgZ(44,"th",21),e._uU(45),e.ALo(46,"transloco"),e.qZA(),e.TgZ(47,"th",22),e._uU(48),e.ALo(49,"transloco"),e.qZA(),e.TgZ(50,"th",22),e._uU(51),e.ALo(52,"transloco"),e.qZA()()(),e.TgZ(53,"tbody"),e.YNc(54,te,40,21,"tr",23),e.qZA()()()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,20,"nav.outsideCustomers")," "),e.xp6(3),e.Q6J("svgIcon","add"),e.xp6(2),e.s9C("matTooltip",e.lcZ(9,22,"com.refresh")),e.xp6(8),e.s9C("placeholder",e.lcZ(17,24,"placeholder.seachByNamePhoneNumberOrEmail")),e.Q6J("model",n.filter.textSearch)("isDisableLength",!0),e.xp6(2),e.Q6J("ngModel",n.filter.isUse),e.xp6(1),e.hij(" ",e.lcZ(20,26,"used")," "),e.xp6(3),e.Q6J("nzData",n.outsideCustomers)("nzLoading",n.isLoading),e.xp6(5),e.Oqu(e.lcZ(28,28,"master.function")),e.xp6(3),e.Oqu(e.lcZ(31,30,"no")),e.xp6(3),e.Oqu(e.lcZ(34,32,"avatar")),e.xp6(3),e.Oqu(e.lcZ(37,34,"fullName")),e.xp6(3),e.Oqu(e.lcZ(40,36,"master.phoneNumber")),e.xp6(3),e.Oqu(e.lcZ(43,38,"master.email")),e.xp6(3),e.Oqu(e.lcZ(46,40,"master.citizenNumber")),e.xp6(3),e.Oqu(e.lcZ(49,42,"master.appointmentGuests")),e.xp6(3),e.Oqu(e.lcZ(52,44,"master.visitors")),e.xp6(3),e.Q6J("ngForOf",n.outsideCustomers))},dependencies:[u.oG,x.N8,x.Uo,x._C,x.Om,x.p0,x.$Z,x.UX,f.lW,f.RK,A.Hw,M.gM,l.JJ,l.On,_.KI,w.Ie,h.sg,B.Rr,J.W,g.VK,g.OP,g.p6,G.i,q.F,_.Ot],encapsulation:2}),i})();var W=s(15861),I=s(82004),S=s(96119),U=s(17489),d=s(61135),R=s(61148),y=s(32202),z=s(71683),D=s(92369),E=s(12965),H=s(47148);function ne(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isShowWebcamIdentityCardFront=!o.isShowWebcamIdentityCardFront)}),e._UZ(2,"mat-icon",43),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.openCamera")))}function oe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(59);return e.KtG(o.click())}),e._UZ(2,"mat-icon",45),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.uploadPhoto")))}function ae(i,r){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"vime.regulationsImage"),")"))}function re(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"webcam",48),e.NdJ("imageCapture",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleImage("citizenFrontImage",o))})("initError",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleInitError(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("height",140)("width",500)("trigger",t.getTriggerObservable("citizenFrontImage"))}}function se(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,re,1,3,"webcam",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.frontCardImageSubject.value)}}function ce(i,r){if(1&i&&e._UZ(0,"img",49),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.frontCardImageSubject.value)}}function le(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,se,2,1,"div",35),e.YNc(2,ce,1,1,"img",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowWebcamIdentityCardFront),e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityCardFront)}}function ue(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteFile("citizenFrontImage"))}),e.qZA()}}function me(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.triggerSnapshot("citizenFrontImage"))}),e._uU(1),e.ALo(2,"transloco"),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.hij("",e.lcZ(2,2,"vime.takePicture")," "))}function de(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isShowWebcamIdentityCardBack=!o.isShowWebcamIdentityCardBack)}),e._UZ(2,"mat-icon",43),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.openCamera")))}function ge(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(77);return e.KtG(o.click())}),e._UZ(2,"mat-icon",45),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.uploadPhoto")))}function pe(i,r){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"vime.regulationsImage"),")"))}function _e(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"webcam",54),e.NdJ("imageCapture",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleImage("citizenBackImage",o))})("initError",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleInitError(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("height",140)("width",500)("trigger",t.getTriggerObservable("citizenBackImage"))}}function he(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,_e,1,3,"webcam",53),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.backCardImageSubject.value)}}function fe(i,r){if(1&i&&e._UZ(0,"img",55),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.backCardImageSubject.value)}}function Ce(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,he,2,1,"div",35),e.YNc(2,fe,1,1,"img",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowWebcamIdentityCardBack),e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityCardBack)}}function be(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteFile("citizenBackImage"))}),e.qZA()}}function ve(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.triggerSnapshot("citizenBackImage"))}),e._uU(1),e.ALo(2,"transloco"),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.Oqu(e.lcZ(2,2,"vime.takePicture")))}function xe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isShowWebcamIdentityGuestFaceImage=!o.isShowWebcamIdentityGuestFaceImage)}),e._UZ(2,"mat-icon",43),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.openCamera")))}function Ie(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(95);return e.KtG(o.click())}),e._UZ(2,"mat-icon",45),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.uploadPhoto")))}function Ze(i,r){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"vime.regulationsImage"),")"))}function Te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"webcam",54),e.NdJ("imageCapture",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleImage("citizenImageFace",o))})("initError",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleInitError(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("height",140)("width",250)("trigger",t.getTriggerObservable("citizenImageFace"))}}function Ae(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Te,1,3,"webcam",53),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.citizenImageFaceSubject.value)}}function we(i,r){if(1&i&&e._UZ(0,"img",55),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.citizenImageFaceSubject.value)}}function Se(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ae,2,1,"div",35),e.YNc(2,we,1,1,"img",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowWebcamIdentityGuestFaceImage),e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityGuestFaceImage)}}function Fe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteFile("citizenImageFace"))}),e.qZA()}}function qe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.triggerSnapshot("citizenImageFace"))}),e._uU(1),e.ALo(2,"transloco"),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.hij("",e.lcZ(2,2,"vime.takePicture")," "))}let ke=(()=>{class i{constructor(t,n,o,a,c,b,Z,T){this._outsideCustomerService=t,this._customerTypeService=n,this._translocoService=o,this._notificationService=a,this._router=c,this._fuseConfirmationService=b,this._activationRoute=Z,this._uploadService=T,this._unsubscribeAll=new m.x,this._debounce=new m.x,this.isLoading=!1,this.triggerIdentityBack=new m.x,this.triggerIdentityFront=new m.x,this.triggerIdentityFaceImage=new m.x,this.frontCardImageSubject=new d.X(null),this.backCardImageSubject=new d.X(null),this.citizenImageFaceSubject=new d.X(null),this.guestFrontCardImageSubject=new d.X(null),this.guestBackCardImageSubject=new d.X(null),this.guestFaceImageSubject=new d.X(null),this.isShowWebcamIdentityCardFront=!1,this.isShowWebcamIdentityCardBack=!1,this.isShowWebcamIdentityGuestFaceImage=!1,this.errors=[],this.customerTypes=[],this.outsideCustomers=[],this.req={outsideCustomerId:null,fullName:null,phoneNumber:null,email:null,isAppointment:!1,isVisitor:!1,citizenNumber:null,citizenImageFace:null,citizenFrontImage:null,citizenBackImage:null,description:null,customerTypeId:null,isUse:!0}}ngOnInit(){this.getCustomerTypes(),this._activationRoute.params.pipe((0,C.R)(this._unsubscribeAll)).subscribe(t=>{console.log(t),t&&this.getById(t.id)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getCustomerTypes(){this._customerTypeService.get({isUse:!0}).pipe((0,C.R)(this._unsubscribeAll)).subscribe(({data:t})=>{t&&(this.customerTypes=t.map(n=>({id:n.customerTypeId,name:this._translocoService.translate(n.typeName)})))})}getById(t){this._outsideCustomerService.getById(t).pipe((0,C.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.req=(0,U.cloneDeep)(n),this.frontCardImageSubject.next(this.req.citizenFrontImage),this.backCardImageSubject.next(this.req.citizenBackImage),this.citizenImageFaceSubject.next(this.req.citizenImageFace),this.guestFrontCardImageSubject.next(this.req.citizenFrontImage),this.guestBackCardImageSubject.next(this.req.citizenBackImage),this.guestFaceImageSubject.next(this.req.citizenImageFace))})}getTriggerObservable(t){switch(t){case"citizenFrontImage":return this.triggerIdentityFront.asObservable();case"citizenBackImage":return this.triggerIdentityBack.asObservable();case"citizenImageFace":return this.triggerIdentityFaceImage.asObservable()}}handleImage(t,n){var o=this;return(0,W.Z)(function*(){const a=yield(yield fetch(n.imageAsDataUrl)).blob();o.currentFileUpload=new File([a],"123123.jpg",{type:"image/jpeg"}),o.uploadImage().subscribe(({data:c})=>{switch(t){case"citizenFrontImage":o.req.citizenFrontImage=c,o.frontCardImageSubject.next(c),o.guestFrontCardImageSubject.next(c);break;case"citizenBackImage":o.req.citizenBackImage=c,o.backCardImageSubject.next(c),o.guestBackCardImageSubject.next(c);break;case"citizenImageFace":o.req.citizenImageFace=c,o.citizenImageFaceSubject.next(c),o.guestFaceImageSubject.next(c)}})})()}uploadImage(){return this._uploadService.upLoadFile(this.currentFileUpload)}deleteFile(t){switch(t){case"citizenFrontImage":this.frontCardImageSubject.next(null),this.guestFrontCardImageSubject.next(null);break;case"citizenBackImage":this.backCardImageSubject.next(null),this.guestBackCardImageSubject.next(null);break;case"citizenImageFace":this.citizenImageFaceSubject.next(null),this.guestFaceImageSubject.next(null)}}triggerSnapshot(t){switch(t){case"citizenFrontImage":this.triggerIdentityFront.next(),this.isShowWebcamIdentityCardFront=!1;break;case"citizenBackImage":this.triggerIdentityBack.next(),this.isShowWebcamIdentityCardBack=!1;break;case"citizenImageFace":this.triggerIdentityFaceImage.next(),this.isShowWebcamIdentityGuestFaceImage=!1}}onImportImageChange(t,n){const o=n.currentTarget;o.files.length&&(this.currentFileUpload=o.files[0],this.uploadImage().subscribe(({data:a})=>{switch(t){case"citizenFrontImage":this.req.citizenFrontImage=a,this.frontCardImageSubject.next(a),this.guestFrontCardImageSubject.next(a);break;case"citizenBackImage":this.req.citizenBackImage=a,this.backCardImageSubject.next(a),this.guestBackCardImageSubject.next(a);break;case"citizenImageFace":this.req.citizenImageFace=a,this.citizenImageFaceSubject.next(a),this.guestFaceImageSubject.next(a);break;default:return}}))}handleInitError(t){this.errors.push(t)}onSave(){(0,S.TF)(this.req.fullName)||(0,S.TF)(this.req.citizenNumber)?this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3}):(this.isLoading=!0,this._outsideCustomerService.updateCustomer(this.req.outsideCustomerId,this.req).pipe((0,C.R)(this._unsubscribeAll),(0,O.x)(()=>this.isLoading=!1)).subscribe(t=>{t.success&&(0,I.Hh)(this._fuseConfirmationService,"message.saveSuccess").afterClosed().subscribe(()=>{this._router.navigate([`../../${t.data.outsideCustomerId}`],{relativeTo:this._activationRoute})})}))}onCancel(){(0,I.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(t=>{"confirmed"==t&&this._router.navigate(["../../"],{relativeTo:this._activationRoute})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.H),e.Y36(R.a),e.Y36(_.Vn),e.Y36(y.zb),e.Y36(p.F0),e.Y36(z.R),e.Y36(p.gz),e.Y36(D.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["outside-customer-edit"]],decls:101,vars:66,consts:[[1,"flex","flex-col","min-w-0","w-full","mb-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"flex","flex-col","gap-0","bg-card","dark:bg-transparent","mb-6","px-6","items-start","sm:pt-6","md:px-8"],[1,"flex","flex-col","flex-1","w-full","sm:flex-row","bg-card","dark:bg-transparent","items-start","sm:items-center","sm:justify-between","pb-5"],[1,"leading-none","text-3xl","font-bold","tracking-tight"],[1,"flex","md:flex-row","flex-col","md:gap-2.5","gap-2"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-col","w-full","px-6","gap-4"],[1,"flex","flex-col","gap-6","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5"],["label","master.guestId","isDisableLength","true",1,"flex-1","w-full",3,"model","placeholder","actionEnum","isRequired","modelChange"],["label","fullName","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","master.citizenNumber","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","master.email","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.phoneNumber","isDisableLength","true",1,"flex","w-full",3,"model","modelChange"],["label","master.customerGroup",1,"flex","w-full",3,"model","listData","modelChange"],[1,"flex","md:flex-row","w-full","flex-col","sm:flex-col","items-center"],["color","primary",3,"ngModel","ngModelChange"],["label","master.description","type","textarea","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],[1,"flex","md:flex-row","flex-col","items-center"],[1,"flex","gap-4"],[1,"w-full","sm:w-full","md:w-1/3","bg-card","text-center","font-bold","p-6","rounded","shadow"],[1,"w-full","justify-center","items-center","font-bold","pb-2"],[1,"flex-1","border-2","border-dashed","border-primary-300","bg-primary-50","rounded-lg","w-full","h-[140px]","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-col","space-y-2"],[1,"flex","space-x-2","justify-center","gap-5","pb-7"],["class","flex flex-col items-center",4,"ngIf"],["class","text-sm font-normal mt-1 text-slate-500",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],["identityCardFrontInp",""],[4,"ngIf"],[1,"flex","justify-center","items-center","space-x-4"],["class","mt-4","color","primary","mat-flat-button","","transloco","vime.changeNewImage",3,"click",4,"ngIf"],["class","mt-4","mat-flat-button","",3,"color","click",4,"ngIf"],["identityCardBackInp",""],["identityGuestFaceInp",""],[1,"flex","flex-col","items-center"],[1,"hover:scale-110","transition-transform","duration-300",3,"click"],["svgIcon","heroicons_outline:camera",1,"transition-colors","duration-300","hover:text-orange-600","icon-size-7"],[1,"text-sm","font-normal","mt-1","text-slate-500"],["svgIcon","heroicons_outline:arrow-up-tray",1,"transition-colors","duration-300","hover:text-orange-600","icon-size-7"],["nz-image","","class","object-fit h-[140px] w-[500px] rounded-md","style","object-fit: contain; width: 500px; height: 140px;",3,"nzSrc",4,"ngIf"],["class","object-fit rounded-md",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"object-fit","rounded-md",3,"height","width","trigger","imageCapture","initError"],["nz-image","",1,"object-fit","h-[140px]","w-[500px]","rounded-md",2,"object-fit","contain","width","500px","height","140px",3,"nzSrc"],["color","primary","mat-flat-button","","transloco","vime.changeNewImage",1,"mt-4",3,"click"],["mat-flat-button","",1,"mt-4",3,"color","click"],["nz-image","","class","object-fit h-[140px] w-[250px] rounded-md","style","height: inherit;width: 100%; object-fit: contain;",3,"nzSrc",4,"ngIf"],["class","rounded-md mb-4 border",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"rounded-md","mb-4","border",3,"height","width","trigger","imageCapture","initError"],["nz-image","",1,"object-fit","h-[140px]","w-[250px]","rounded-md",2,"height","inherit","width","100%","object-fit","contain",3,"nzSrc"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return n.onCancel()}),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"transloco"),e.qZA()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.onSave()}),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"transloco"),e.qZA()()()()(),e.TgZ(17,"div",9)(18,"div",10)(19,"div",11)(20,"span",12),e._uU(21),e.ALo(22,"transloco"),e.qZA()(),e.TgZ(23,"div",13)(24,"cm-input",14),e.NdJ("modelChange",function(a){return n.req.outsideCustomerId=a}),e.ALo(25,"transloco"),e.qZA(),e.TgZ(26,"cm-input",15),e.NdJ("modelChange",function(a){return n.req.fullName=a}),e.qZA(),e.TgZ(27,"cm-input",16),e.NdJ("modelChange",function(a){return n.req.citizenNumber=a}),e.qZA(),e.TgZ(28,"cm-input",17),e.NdJ("modelChange",function(a){return n.req.email=a}),e.qZA()(),e.TgZ(29,"div",13)(30,"cm-input",18),e.NdJ("modelChange",function(a){return n.req.phoneNumber=a}),e.qZA(),e.TgZ(31,"cm-select",19),e.NdJ("modelChange",function(a){return n.req.customerTypeId=a}),e.qZA(),e.TgZ(32,"div",20)(33,"mat-checkbox",21),e.NdJ("ngModelChange",function(a){return n.req.isVisitor=a}),e.qZA(),e._uU(34),e.ALo(35,"transloco"),e.qZA(),e.TgZ(36,"div",20)(37,"mat-checkbox",21),e.NdJ("ngModelChange",function(a){return n.req.isAppointment=a}),e.qZA(),e._uU(38),e.ALo(39,"transloco"),e.qZA()(),e.TgZ(40,"div",13)(41,"cm-input",22),e.NdJ("modelChange",function(a){return n.req.description=a}),e.qZA()(),e.TgZ(42,"div",23)(43,"mat-checkbox",21),e.NdJ("ngModelChange",function(a){return n.req.isUse=a}),e.qZA(),e._uU(44),e.ALo(45,"transloco"),e.qZA()(),e.TgZ(46,"div",24)(47,"div",25)(48,"div",26),e._uU(49),e.ALo(50,"transloco"),e.qZA(),e.TgZ(51,"div",27)(52,"div",28)(53,"div",29)(54,"div",30),e.YNc(55,ne,6,3,"div",31),e.YNc(56,oe,6,3,"div",31),e.qZA(),e.YNc(57,ae,3,3,"span",32),e.qZA(),e.TgZ(58,"input",33,34),e.NdJ("change",function(a){return n.onImportImageChange("citizenFrontImage",a)}),e.qZA(),e.YNc(60,le,3,2,"div",35),e.qZA()(),e.TgZ(61,"div",36),e.ynx(62),e.YNc(63,ue,1,0,"button",37),e.YNc(64,me,3,4,"button",38),e.BQk(),e.qZA()(),e.TgZ(65,"div",25)(66,"div",26),e._uU(67),e.ALo(68,"transloco"),e.qZA(),e.TgZ(69,"div",27)(70,"div",28)(71,"div",29)(72,"div",30),e.YNc(73,de,6,3,"div",31),e.YNc(74,ge,6,3,"div",31),e.qZA(),e.YNc(75,pe,3,3,"span",32),e.qZA(),e.TgZ(76,"input",33,39),e.NdJ("change",function(a){return n.onImportImageChange("citizenBackImage",a)}),e.qZA(),e.YNc(78,Ce,3,2,"div",35),e.qZA()(),e.TgZ(79,"div",36),e.ynx(80),e.YNc(81,be,1,0,"button",37),e.YNc(82,ve,3,4,"button",38),e.BQk(),e.qZA()(),e.TgZ(83,"div",25)(84,"div",26),e._uU(85),e.ALo(86,"transloco"),e.qZA(),e.TgZ(87,"div",27)(88,"div",28)(89,"div",29)(90,"div",30),e.YNc(91,xe,6,3,"div",31),e.YNc(92,Ie,6,3,"div",31),e.qZA(),e.YNc(93,Ze,3,3,"span",32),e.qZA(),e.TgZ(94,"input",33,40),e.NdJ("change",function(a){return n.onImportImageChange("citizenImageFace",a)}),e.qZA(),e.YNc(96,Se,3,2,"div",35),e.qZA()(),e.TgZ(97,"div",36),e.ynx(98),e.YNc(99,Fe,1,0,"button",37),e.YNc(100,qe,3,4,"button",38),e.BQk(),e.qZA()()()()()()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,44,"master.editCustomer")),e.xp6(5),e.Oqu(e.lcZ(12,46,"cancel")),e.xp6(4),e.Oqu(e.lcZ(16,48,"save")),e.xp6(6),e.Oqu(e.lcZ(22,50,"master.general")),e.xp6(3),e.Q6J("model",n.req.outsideCustomerId)("placeholder",e.lcZ(25,52,"placeholder.autoGen"))("actionEnum","view")("isRequired",!0),e.xp6(2),e.Q6J("model",n.req.fullName)("isRequired",!0),e.xp6(1),e.Q6J("model",n.req.citizenNumber)("isRequired",!0),e.xp6(1),e.Q6J("model",n.req.email),e.xp6(2),e.Q6J("model",n.req.phoneNumber),e.xp6(1),e.Q6J("model",n.req.customerTypeId)("listData",n.customerTypes),e.xp6(2),e.Q6J("ngModel",n.req.isVisitor),e.xp6(1),e.hij(" ",e.lcZ(35,54,"master.visitors")," "),e.xp6(3),e.Q6J("ngModel",n.req.isAppointment),e.xp6(1),e.hij(" ",e.lcZ(39,56,"master.appointmentGuests")," "),e.xp6(3),e.Q6J("model",n.req.description),e.xp6(2),e.Q6J("ngModel",n.req.isUse),e.xp6(1),e.hij(" ",e.lcZ(45,58,"using")," "),e.xp6(5),e.hij(" ",e.lcZ(50,60,"vime.citizenImageFace")," "),e.xp6(6),e.Q6J("ngIf",!n.isShowWebcamIdentityCardFront&&!n.frontCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",!n.frontCardImageSubject.value&&!n.isShowWebcamIdentityCardFront),e.xp6(1),e.Q6J("ngIf",!n.isShowWebcamIdentityCardFront&&!n.frontCardImageSubject.value),e.xp6(3),e.Q6J("ngIf",n.frontCardImageSubject.value||n.isShowWebcamIdentityCardFront),e.xp6(3),e.Q6J("ngIf",n.frontCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",n.isShowWebcamIdentityCardFront),e.xp6(3),e.hij(" ",e.lcZ(68,62,"vime.citizenBackImage")," "),e.xp6(6),e.Q6J("ngIf",!n.isShowWebcamIdentityCardBack&&!n.backCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",!n.backCardImageSubject.value&&!n.isShowWebcamIdentityCardBack),e.xp6(1),e.Q6J("ngIf",!n.isShowWebcamIdentityCardBack&&!n.backCardImageSubject.value),e.xp6(3),e.Q6J("ngIf",n.backCardImageSubject.value||n.isShowWebcamIdentityCardBack),e.xp6(3),e.Q6J("ngIf",n.backCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",n.isShowWebcamIdentityCardBack),e.xp6(3),e.hij(" ",e.lcZ(86,64,"vime.citizenImageFace")," "),e.xp6(6),e.Q6J("ngIf",!n.isShowWebcamIdentityGuestFaceImage&&!n.citizenImageFaceSubject.value),e.xp6(1),e.Q6J("ngIf",!n.citizenImageFaceSubject.value&&!n.isShowWebcamIdentityGuestFaceImage),e.xp6(1),e.Q6J("ngIf",!n.isShowWebcamIdentityGuestFaceImage&&!n.citizenImageFaceSubject.value),e.xp6(3),e.Q6J("ngIf",n.citizenImageFaceSubject.value||n.isShowWebcamIdentityGuestFaceImage),e.xp6(3),e.Q6J("ngIf",n.citizenImageFaceSubject.value),e.xp6(1),e.Q6J("ngIf",n.isShowWebcamIdentityGuestFaceImage))},dependencies:[u.oG,f.lW,A.Hw,l.JJ,l.On,_.KI,w.Ie,E.i3,h.O5,H.f,J.W,q.F,_.Ot],encapsulation:2}),i})();function Oe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isShowWebcamIdentityCardFront=!o.isShowWebcamIdentityCardFront)}),e._UZ(2,"mat-icon",43),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.openCamera")))}function ye(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(60);return e.KtG(o.click())}),e._UZ(2,"mat-icon",45),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.uploadPhoto")))}function ze(i,r){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"vime.regulationsImage"),")"))}function je(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"webcam",48),e.NdJ("imageCapture",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleImage("citizenFrontImage",o))})("initError",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleInitError(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("height",140)("width",500)("trigger",t.getTriggerObservable("citizenFrontImage"))}}function Ne(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,je,1,3,"webcam",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.frontCardImageSubject.value)}}function Je(i,r){if(1&i&&e._UZ(0,"img",49),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.frontCardImageSubject.value)}}function Ue(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ne,2,1,"div",35),e.YNc(2,Je,1,1,"img",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowWebcamIdentityCardFront),e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityCardFront)}}function Ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteFile("citizenFrontImage"))}),e.qZA()}}function Le(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.triggerSnapshot("citizenFrontImage"))}),e._uU(1),e.ALo(2,"transloco"),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.hij("",e.lcZ(2,2,"vime.takePicture")," "))}function Qe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isShowWebcamIdentityCardBack=!o.isShowWebcamIdentityCardBack)}),e._UZ(2,"mat-icon",43),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.openCamera")))}function Be(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(78);return e.KtG(o.click())}),e._UZ(2,"mat-icon",45),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.uploadPhoto")))}function Me(i,r){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"vime.regulationsImage"),")"))}function Ye(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"webcam",54),e.NdJ("imageCapture",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleImage("citizenBackImage",o))})("initError",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleInitError(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("height",140)("width",500)("trigger",t.getTriggerObservable("citizenBackImage"))}}function Ge(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ye,1,3,"webcam",53),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.backCardImageSubject.value)}}function We(i,r){if(1&i&&e._UZ(0,"img",55),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.backCardImageSubject.value)}}function Re(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ge,2,1,"div",35),e.YNc(2,We,1,1,"img",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowWebcamIdentityCardBack),e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityCardBack)}}function De(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteFile("citizenBackImage"))}),e.qZA()}}function He(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.triggerSnapshot("citizenBackImage"))}),e._uU(1),e.ALo(2,"transloco"),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.Oqu(e.lcZ(2,2,"vime.takePicture")))}function Ke(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isShowWebcamIdentityGuestFaceImage=!o.isShowWebcamIdentityGuestFaceImage)}),e._UZ(2,"mat-icon",43),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.openCamera")))}function Pe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"a",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(96);return e.KtG(o.click())}),e._UZ(2,"mat-icon",45),e.qZA(),e.TgZ(3,"span",44),e._uU(4),e.ALo(5,"transloco"),e.qZA()()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"vime.uploadPhoto")))}function Ve(i,r){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"vime.regulationsImage"),")"))}function Xe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"webcam",54),e.NdJ("imageCapture",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleImage("citizenImageFace",o))})("initError",function(o){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleInitError(o))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("height",140)("width",250)("trigger",t.getTriggerObservable("citizenImageFace"))}}function $e(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Xe,1,3,"webcam",53),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.citizenImageFaceSubject.value)}}function et(i,r){if(1&i&&e._UZ(0,"img",55),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.citizenImageFaceSubject.value)}}function tt(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,$e,2,1,"div",35),e.YNc(2,et,1,1,"img",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowWebcamIdentityGuestFaceImage),e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityGuestFaceImage)}}function it(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteFile("citizenImageFace"))}),e.qZA()}}function nt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.triggerSnapshot("citizenImageFace"))}),e._uU(1),e.ALo(2,"transloco"),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.hij("",e.lcZ(2,2,"vime.takePicture")," "))}let ot=(()=>{class i{constructor(t,n,o,a,c,b,Z,T){this._outsideCustomerService=t,this._customerTypeService=n,this._translocoService=o,this._notificationService=a,this._router=c,this._uploadService=b,this._fuseConfirmationService=Z,this._activationRoute=T,this._unsubscribeAll=new m.x,this._debounce=new m.x,this.isLoading=!1,this.triggerIdentityBack=new m.x,this.triggerIdentityFront=new m.x,this.triggerIdentityFaceImage=new m.x,this.frontCardImageSubject=new d.X(null),this.backCardImageSubject=new d.X(null),this.citizenImageFaceSubject=new d.X(null),this.guestFrontCardImageSubject=new d.X(null),this.guestBackCardImageSubject=new d.X(null),this.guestFaceImageSubject=new d.X(null),this.isShowWebcamIdentityCardFront=!1,this.isShowWebcamIdentityCardBack=!1,this.isShowWebcamIdentityGuestFaceImage=!1,this.errors=[],this.customerTypes=[],this.outsideCustomers=[],this.req={fullName:null,phoneNumber:null,email:null,isAppointment:!1,isVisitor:!1,citizenNumber:null,citizenImageFace:null,citizenFrontImage:null,citizenBackImage:null,description:null,customerTypeId:null,isUse:!0}}ngOnInit(){this.getCustomerTypes(),this.frontCardImageSubject.next(this.req.citizenFrontImage),this.backCardImageSubject.next(this.req.citizenBackImage),this.citizenImageFaceSubject.next(this.req.citizenImageFace),this.guestFrontCardImageSubject.next(this.req.citizenFrontImage),this.guestBackCardImageSubject.next(this.req.citizenBackImage),this.guestFaceImageSubject.next(this.req.citizenImageFace)}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getCustomerTypes(){this._customerTypeService.get({isUse:!0}).pipe((0,C.R)(this._unsubscribeAll)).subscribe(({data:t})=>{t&&(this.customerTypes=t.map(n=>({id:n.customerTypeId,name:this._translocoService.translate(n.typeName)})))})}getTriggerObservable(t){switch(t){case"citizenFrontImage":return this.triggerIdentityFront.asObservable();case"citizenBackImage":return this.triggerIdentityBack.asObservable();case"citizenImageFace":return this.triggerIdentityFaceImage.asObservable()}}handleImage(t,n){var o=this;return(0,W.Z)(function*(){const a=yield(yield fetch(n.imageAsDataUrl)).blob();o.currentFileUpload=new File([a],"123123.jpg",{type:"image/jpeg"}),o.uploadImage().subscribe(({data:c})=>{switch(t){case"citizenFrontImage":o.req.citizenFrontImage=c,o.frontCardImageSubject.next(c),o.guestFrontCardImageSubject.next(c);break;case"citizenBackImage":o.req.citizenBackImage=c,o.backCardImageSubject.next(c),o.guestBackCardImageSubject.next(c);break;case"citizenImageFace":o.req.citizenImageFace=c,o.citizenImageFaceSubject.next(c),o.guestFaceImageSubject.next(c)}})})()}uploadImage(){return this._uploadService.upLoadFile(this.currentFileUpload)}deleteFile(t){switch(t){case"citizenFrontImage":this.frontCardImageSubject.next(null),this.guestFrontCardImageSubject.next(null);break;case"citizenBackImage":this.backCardImageSubject.next(null),this.guestBackCardImageSubject.next(null);break;case"citizenImageFace":this.citizenImageFaceSubject.next(null),this.guestFaceImageSubject.next(null)}}triggerSnapshot(t){switch(t){case"citizenFrontImage":this.triggerIdentityFront.next(),this.isShowWebcamIdentityCardFront=!1;break;case"citizenBackImage":this.triggerIdentityBack.next(),this.isShowWebcamIdentityCardBack=!1;break;case"citizenImageFace":this.triggerIdentityFaceImage.next(),this.isShowWebcamIdentityGuestFaceImage=!1}}onImportImageChange(t,n){const o=n.currentTarget;o.files.length&&(this.currentFileUpload=o.files[0],this.uploadImage().subscribe(({data:a})=>{switch(t){case"citizenFrontImage":this.req.citizenFrontImage=a,this.frontCardImageSubject.next(a),this.guestFrontCardImageSubject.next(a);break;case"citizenBackImage":this.req.citizenBackImage=a,this.backCardImageSubject.next(a),this.guestBackCardImageSubject.next(a);break;case"citizenImageFace":this.req.citizenImageFace=a,this.citizenImageFaceSubject.next(a),this.guestFaceImageSubject.next(a);break;default:return}}))}handleInitError(t){this.errors.push(t)}onSave(){(0,S.TF)(this.req.fullName)||(0,S.TF)(this.req.citizenNumber)?this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3}):(this.isLoading=!0,this._outsideCustomerService.createCustomer(this.req).pipe((0,C.R)(this._unsubscribeAll),(0,O.x)(()=>this.isLoading=!1)).subscribe(t=>{t&&((0,I.Hh)(this._fuseConfirmationService,"message.saveSuccess"),this._router.navigate([`../${t.data.outsideCustomerId}`],{relativeTo:this._activationRoute}))}))}onCancel(){(0,I.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(t=>{"confirmed"==t&&this._router.navigate(["../"],{relativeTo:this._activationRoute})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.H),e.Y36(R.a),e.Y36(_.Vn),e.Y36(y.zb),e.Y36(p.F0),e.Y36(D.C),e.Y36(z.R),e.Y36(p.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["outside-customer-create"]],decls:102,vars:65,consts:[[1,"flex","flex-col","min-w-0","w-full","mb-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"flex","flex-col","gap-0","bg-card","dark:bg-transparent","mb-6","px-6","items-start","sm:pt-6","md:px-8"],[1,"flex","flex-col","flex-1","w-full","sm:flex-row","bg-card","dark:bg-transparent","items-start","sm:items-center","sm:justify-between","pb-5"],[1,"leading-none","text-3xl","font-bold","tracking-tight"],[1,"flex","md:flex-row","flex-col","md:gap-2.5","gap-2"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-col","w-full","px-6","gap-4"],[1,"flex","flex-col","gap-6","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5"],["label","master.guestId","isDisableLength","true",1,"flex-1","w-full",3,"placeholder","actionEnum","isRequired"],["label","fullName","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","master.citizenNumber","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","master.email","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.phoneNumber","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.customerGroup",1,"flex-1","w-full",3,"model","listData","modelChange"],[1,"flex-1","flex","md:flex-row","flex-col","items-center"],["color","primary",3,"ngModel","ngModelChange"],["label","master.description","type","textarea","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],[1,"flex","md:flex-row","flex-col","items-center"],[1,"flex","gap-4"],[1,"w-full","sm:w-full","md:w-1/3","bg-card","text-center","font-bold","p-6","rounded","shadow"],[1,"w-full","justify-center","items-center","font-bold","pb-2"],[1,"flex-1","border-2","border-dashed","border-primary-300","bg-primary-50","rounded-lg","w-full","h-[140px]","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-col","space-y-2"],[1,"flex","space-x-2","justify-center","gap-5","pb-7"],["class","flex flex-col items-center",4,"ngIf"],["class","text-sm font-normal mt-1 text-slate-500",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],["identityCardFrontInp",""],[4,"ngIf"],[1,"flex","justify-center","items-center","space-x-4"],["class","mt-4","color","primary","mat-flat-button","","transloco","vime.changeNewImage",3,"click",4,"ngIf"],["class","mt-4","mat-flat-button","",3,"color","click",4,"ngIf"],["identityCardBackInp",""],["identityGuestFaceInp",""],[1,"flex","flex-col","items-center"],[1,"hover:scale-110","transition-transform","duration-300",3,"click"],["svgIcon","heroicons_outline:camera",1,"transition-colors","duration-300","hover:text-orange-600","icon-size-7"],[1,"text-sm","font-normal","mt-1","text-slate-500"],["svgIcon","heroicons_outline:arrow-up-tray",1,"transition-colors","duration-300","hover:text-orange-600","icon-size-7"],["nz-image","","class","object-fit h-[140px] w-[500px] rounded-md","style","object-fit: contain; width: 500px; height: 140px;",3,"nzSrc",4,"ngIf"],["class","object-fit rounded-md",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"object-fit","rounded-md",3,"height","width","trigger","imageCapture","initError"],["nz-image","",1,"object-fit","h-[140px]","w-[500px]","rounded-md",2,"object-fit","contain","width","500px","height","140px",3,"nzSrc"],["color","primary","mat-flat-button","","transloco","vime.changeNewImage",1,"mt-4",3,"click"],["mat-flat-button","",1,"mt-4",3,"color","click"],["nz-image","","class","object-fit h-[140px] w-[250px] rounded-md","style","height: inherit;width: 100%; object-fit: contain;",3,"nzSrc",4,"ngIf"],["class","rounded-md mb-4 border",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"rounded-md","mb-4","border",3,"height","width","trigger","imageCapture","initError"],["nz-image","",1,"object-fit","h-[140px]","w-[250px]","rounded-md",2,"height","inherit","width","100%","object-fit","contain",3,"nzSrc"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return n.onCancel()}),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"transloco"),e.qZA()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.onSave()}),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"transloco"),e.qZA()()()()(),e.TgZ(17,"div",9)(18,"div",10)(19,"div",11)(20,"span",12),e._uU(21),e.ALo(22,"transloco"),e.qZA()(),e.TgZ(23,"div",13),e._UZ(24,"cm-input",14),e.ALo(25,"transloco"),e.TgZ(26,"cm-input",15),e.NdJ("modelChange",function(a){return n.req.fullName=a}),e.qZA(),e.TgZ(27,"cm-input",16),e.NdJ("modelChange",function(a){return n.req.citizenNumber=a}),e.qZA(),e.TgZ(28,"cm-input",17),e.NdJ("modelChange",function(a){return n.req.email=a}),e.qZA()(),e.TgZ(29,"div",13)(30,"cm-input",18),e.NdJ("modelChange",function(a){return n.req.phoneNumber=a}),e.qZA(),e.TgZ(31,"cm-select",19),e.NdJ("modelChange",function(a){return n.req.customerTypeId=a}),e.qZA(),e.TgZ(32,"div",20)(33,"mat-checkbox",21),e.NdJ("ngModelChange",function(a){return n.req.isVisitor=a}),e.qZA(),e._uU(34),e.ALo(35,"transloco"),e.qZA(),e.TgZ(36,"div",20),e._UZ(37,"div"),e.TgZ(38,"mat-checkbox",21),e.NdJ("ngModelChange",function(a){return n.req.isAppointment=a}),e.qZA(),e._uU(39),e.ALo(40,"transloco"),e.qZA()(),e.TgZ(41,"div",13)(42,"cm-input",22),e.NdJ("modelChange",function(a){return n.req.description=a}),e.qZA()(),e.TgZ(43,"div",23)(44,"mat-checkbox",21),e.NdJ("ngModelChange",function(a){return n.req.isUse=a}),e.qZA(),e._uU(45),e.ALo(46,"transloco"),e.qZA()(),e.TgZ(47,"div",24)(48,"div",25)(49,"div",26),e._uU(50),e.ALo(51,"transloco"),e.qZA(),e.TgZ(52,"div",27)(53,"div",28)(54,"div",29)(55,"div",30),e.YNc(56,Oe,6,3,"div",31),e.YNc(57,ye,6,3,"div",31),e.qZA(),e.YNc(58,ze,3,3,"span",32),e.qZA(),e.TgZ(59,"input",33,34),e.NdJ("change",function(a){return n.onImportImageChange("citizenFrontImage",a)}),e.qZA(),e.YNc(61,Ue,3,2,"div",35),e.qZA()(),e.TgZ(62,"div",36),e.ynx(63),e.YNc(64,Ee,1,0,"button",37),e.YNc(65,Le,3,4,"button",38),e.BQk(),e.qZA()(),e.TgZ(66,"div",25)(67,"div",26),e._uU(68),e.ALo(69,"transloco"),e.qZA(),e.TgZ(70,"div",27)(71,"div",28)(72,"div",29)(73,"div",30),e.YNc(74,Qe,6,3,"div",31),e.YNc(75,Be,6,3,"div",31),e.qZA(),e.YNc(76,Me,3,3,"span",32),e.qZA(),e.TgZ(77,"input",33,39),e.NdJ("change",function(a){return n.onImportImageChange("citizenBackImage",a)}),e.qZA(),e.YNc(79,Re,3,2,"div",35),e.qZA()(),e.TgZ(80,"div",36),e.ynx(81),e.YNc(82,De,1,0,"button",37),e.YNc(83,He,3,4,"button",38),e.BQk(),e.qZA()(),e.TgZ(84,"div",25)(85,"div",26),e._uU(86),e.ALo(87,"transloco"),e.qZA(),e.TgZ(88,"div",27)(89,"div",28)(90,"div",29)(91,"div",30),e.YNc(92,Ke,6,3,"div",31),e.YNc(93,Pe,6,3,"div",31),e.qZA(),e.YNc(94,Ve,3,3,"span",32),e.qZA(),e.TgZ(95,"input",33,40),e.NdJ("change",function(a){return n.onImportImageChange("citizenImageFace",a)}),e.qZA(),e.YNc(97,tt,3,2,"div",35),e.qZA()(),e.TgZ(98,"div",36),e.ynx(99),e.YNc(100,it,1,0,"button",37),e.YNc(101,nt,3,4,"button",38),e.BQk(),e.qZA()()()()()()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,43,"master.addCustomers")),e.xp6(5),e.Oqu(e.lcZ(12,45,"cancel")),e.xp6(4),e.Oqu(e.lcZ(16,47,"save")),e.xp6(6),e.Oqu(e.lcZ(22,49,"master.general")),e.xp6(3),e.Q6J("placeholder",e.lcZ(25,51,"placeholder.autoGen"))("actionEnum","view")("isRequired",!0),e.xp6(2),e.Q6J("model",n.req.fullName)("isRequired",!0),e.xp6(1),e.Q6J("model",n.req.citizenNumber)("isRequired",!0),e.xp6(1),e.Q6J("model",n.req.email),e.xp6(2),e.Q6J("model",n.req.phoneNumber),e.xp6(1),e.Q6J("model",n.req.customerTypeId)("listData",n.customerTypes),e.xp6(2),e.Q6J("ngModel",n.req.isVisitor),e.xp6(1),e.hij(" ",e.lcZ(35,53,"master.visitors")," "),e.xp6(4),e.Q6J("ngModel",n.req.isAppointment),e.xp6(1),e.hij(" ",e.lcZ(40,55,"master.appointmentGuests")," "),e.xp6(3),e.Q6J("model",n.req.description),e.xp6(2),e.Q6J("ngModel",n.req.isUse),e.xp6(1),e.hij(" ",e.lcZ(46,57,"using")," "),e.xp6(5),e.hij(" ",e.lcZ(51,59,"vime.citizenImageFace")," "),e.xp6(6),e.Q6J("ngIf",!n.isShowWebcamIdentityCardFront&&!n.frontCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",!n.frontCardImageSubject.value&&!n.isShowWebcamIdentityCardFront),e.xp6(1),e.Q6J("ngIf",!n.isShowWebcamIdentityCardFront&&!n.frontCardImageSubject.value),e.xp6(3),e.Q6J("ngIf",n.frontCardImageSubject.value||n.isShowWebcamIdentityCardFront),e.xp6(3),e.Q6J("ngIf",n.frontCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",n.isShowWebcamIdentityCardFront),e.xp6(3),e.hij(" ",e.lcZ(69,61,"vime.citizenBackImage")," "),e.xp6(6),e.Q6J("ngIf",!n.isShowWebcamIdentityCardBack&&!n.backCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",!n.backCardImageSubject.value&&!n.isShowWebcamIdentityCardBack),e.xp6(1),e.Q6J("ngIf",!n.isShowWebcamIdentityCardBack&&!n.backCardImageSubject.value),e.xp6(3),e.Q6J("ngIf",n.backCardImageSubject.value||n.isShowWebcamIdentityCardBack),e.xp6(3),e.Q6J("ngIf",n.backCardImageSubject.value),e.xp6(1),e.Q6J("ngIf",n.isShowWebcamIdentityCardBack),e.xp6(3),e.hij(" ",e.lcZ(87,63,"vime.citizenImageFace")," "),e.xp6(6),e.Q6J("ngIf",!n.isShowWebcamIdentityGuestFaceImage&&!n.citizenImageFaceSubject.value),e.xp6(1),e.Q6J("ngIf",!n.citizenImageFaceSubject.value&&!n.isShowWebcamIdentityGuestFaceImage),e.xp6(1),e.Q6J("ngIf",!n.isShowWebcamIdentityGuestFaceImage&&!n.citizenImageFaceSubject.value),e.xp6(3),e.Q6J("ngIf",n.citizenImageFaceSubject.value||n.isShowWebcamIdentityGuestFaceImage),e.xp6(3),e.Q6J("ngIf",n.citizenImageFaceSubject.value),e.xp6(1),e.Q6J("ngIf",n.isShowWebcamIdentityGuestFaceImage))},dependencies:[u.oG,f.lW,A.Hw,l.JJ,l.On,_.KI,w.Ie,E.i3,h.O5,H.f,J.W,q.F,_.Ot],encapsulation:2}),i})();function at(i,r){if(1&i&&e._UZ(0,"img",22),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.frontCardImageSubject.value)}}function rt(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,at,1,1,"img",21),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityCardFront)}}function st(i,r){if(1&i&&e._UZ(0,"img",24),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.backCardImageSubject.value)}}function ct(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,st,1,1,"img",23),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityCardBack)}}function lt(i,r){if(1&i&&e._UZ(0,"img",24),2&i){const t=e.oxw(2);e.Q6J("nzSrc",t.citizenImageFaceSubject.value)}}function ut(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,lt,1,1,"img",23),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isShowWebcamIdentityGuestFaceImage)}}let mt=(()=>{class i{constructor(t,n,o,a,c,b){this._outsideCustomerService=t,this._translocoService=n,this._notificationService=o,this._router=a,this._fuseConfirmationService=c,this._activationRoute=b,this._unsubscribeAll=new m.x,this._debounce=new m.x,this.isLoading=!1,this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.triggerIdentityBack=new m.x,this.triggerIdentityFront=new m.x,this.triggerIdentityFaceImage=new m.x,this.frontCardImageSubject=new d.X(null),this.backCardImageSubject=new d.X(null),this.citizenImageFaceSubject=new d.X(null),this.guestFrontCardImageSubject=new d.X(null),this.guestBackCardImageSubject=new d.X(null),this.guestFaceImageSubject=new d.X(null),this.isShowWebcamIdentityCardFront=!1,this.isShowWebcamIdentityCardBack=!1,this.isShowWebcamIdentityGuestFaceImage=!1,this.errors=[],this.outsideCustomers=[],this.res={outsideCustomerId:null,fullName:null,phoneNumber:null,email:null,isAppointment:!1,isVisitor:!1,citizenNumber:null,citizenImageFace:null,citizenFrontImage:null,citizenBackImage:null,description:null,customerTypeId:null,customerTypeName:null,isUse:!0}}ngOnInit(){this._activationRoute.params.pipe((0,C.R)(this._unsubscribeAll)).subscribe(t=>{t&&this.getById(t.id)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getById(t){this._outsideCustomerService.getById(t).pipe((0,C.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.res=(0,U.cloneDeep)(n),this.frontCardImageSubject.next(this.res.citizenFrontImage),this.backCardImageSubject.next(this.res.citizenBackImage),this.citizenImageFaceSubject.next(this.res.citizenImageFace),this.guestFrontCardImageSubject.next(this.res.citizenFrontImage),this.guestBackCardImageSubject.next(this.res.citizenBackImage),this.guestFaceImageSubject.next(this.res.citizenImageFace))})}onSave(){(0,S.TF)(this.res.fullName)||(0,S.TF)(this.res.citizenNumber)?this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3}):(this.isLoading=!0,this._outsideCustomerService.createCustomer(this.res).pipe((0,C.R)(this._unsubscribeAll),(0,O.x)(()=>this.isLoading=!1)).subscribe(t=>{t&&((0,I.Hh)(this._fuseConfirmationService,"message.saveSuccess"),this._router.navigate([`../${t.data.outsideCustomerId}`],{relativeTo:this._activationRoute}))}))}onCancel(){(0,I.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(t=>{"confirmed"==t&&this._router.navigate(["../"],{relativeTo:this._activationRoute})})}onBack(){this._router.navigate(["../"],{relativeTo:this._activationRoute})}onEdit(){this._router.navigate([`../edit/${this.res.outsideCustomerId}`],{relativeTo:this._activationRoute})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.H),e.Y36(_.Vn),e.Y36(y.zb),e.Y36(p.F0),e.Y36(z.R),e.Y36(p.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["outside-customer-general"]],decls:93,vars:58,consts:[[1,"flex","flex-1","flex-col","dark:bg-gray-900","rounded-md","gap-6"],[1,"flex","flex-1","flex-col","gap-6","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5"],[1,"flex","flex-1","flex-col","gap-2.5","md:gap-4"],[1,"flex-1","text-slate-500","font-medium"],[1,"flex-1"],[1,"flex-1","flex","items-center"],["color","primary",1,"w-10","h-10","-ml-2",3,"ngModel","readOnly","ngModelChange"],[1,"text-secondary","font-medium"],[1,"flex","flex-col","md:gap-4","gap-2.5","pb-4"],["color","primary",1,"w-10","h-10","-ml-2",3,"ngModel","disabled","ngModelChange"],[1,"flex","gap-4"],[1,"w-full","sm:w-full","md:w-1/3","bg-card","text-center","font-bold","p-6","rounded","shadow"],[1,"w-full","justify-center","items-center","font-bold","pb-2"],[1,"flex-1","border-2","border-dashed","border-primary-300","bg-primary-50","rounded-lg","w-full","h-[140px]","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"],[1,"flex","flex-col","space-y-2"],[1,"flex","space-x-2","justify-center","gap-5","pb-7"],[4,"ngIf"],["nz-image","","class","object-fit h-[140px] w-[500px] rounded-md","style","object-fit: contain; width: 500px; height: 140px;",3,"nzSrc",4,"ngIf"],["nz-image","",1,"object-fit","h-[140px]","w-[500px]","rounded-md",2,"object-fit","contain","width","500px","height","140px",3,"nzSrc"],["nz-image","","class","object-fit h-[140px] w-[250px] rounded-md","style","height: inherit;width: 100%; object-fit: contain;",3,"nzSrc",4,"ngIf"],["nz-image","",1,"object-fit","h-[140px]","w-[250px]","rounded-md",2,"height","inherit","width","100%","object-fit","contain",3,"nzSrc"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"transloco"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6),e._uU(9),e.ALo(10,"transloco"),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()(),e.TgZ(13,"div",5)(14,"div",6),e._uU(15),e.ALo(16,"transloco"),e.qZA(),e.TgZ(17,"div",7),e._uU(18),e.qZA()(),e.TgZ(19,"div",5)(20,"div",6),e._uU(21),e.ALo(22,"transloco"),e.qZA(),e.TgZ(23,"div",7),e._uU(24),e.qZA()(),e.TgZ(25,"div",5)(26,"div",6),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"div",7),e._uU(30),e.qZA()()(),e.TgZ(31,"div",4)(32,"div",5)(33,"div",6),e._uU(34),e.ALo(35,"transloco"),e.qZA(),e.TgZ(36,"div",7),e._uU(37),e.qZA()(),e.TgZ(38,"div",5)(39,"div",6),e._uU(40),e.ALo(41,"transloco"),e.qZA(),e.TgZ(42,"div",7),e._uU(43),e.qZA()(),e.TgZ(44,"div",8)(45,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return n.res.isVisitor=a}),e.qZA(),e.TgZ(46,"span",10),e._uU(47),e.ALo(48,"transloco"),e.qZA()(),e.TgZ(49,"div",8)(50,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return n.res.isAppointment=a}),e.qZA(),e.TgZ(51,"span",10),e._uU(52),e.ALo(53,"transloco"),e.qZA()()(),e.TgZ(54,"div",11)(55,"div",6),e._uU(56),e.ALo(57,"transloco"),e.qZA(),e.TgZ(58,"div",7),e._uU(59),e.qZA()(),e.TgZ(60,"div",8)(61,"mat-checkbox",12),e.NdJ("ngModelChange",function(a){return n.res.isUse=a}),e.qZA(),e.TgZ(62,"span",10),e._uU(63),e.ALo(64,"transloco"),e.qZA()()(),e.TgZ(65,"div",13)(66,"div",14)(67,"div",15),e._uU(68),e.ALo(69,"transloco"),e.qZA(),e.TgZ(70,"div",16)(71,"div",17)(72,"div",18),e._UZ(73,"div",19),e.qZA(),e.YNc(74,rt,2,1,"div",20),e.qZA()()(),e.TgZ(75,"div",14)(76,"div",15),e._uU(77),e.ALo(78,"transloco"),e.qZA(),e.TgZ(79,"div",16)(80,"div",17)(81,"div",18),e._UZ(82,"div",19),e.qZA(),e.YNc(83,ct,2,1,"div",20),e.qZA()()(),e.TgZ(84,"div",14)(85,"div",15),e._uU(86),e.ALo(87,"transloco"),e.qZA(),e.TgZ(88,"div",16)(89,"div",17)(90,"div",18),e._UZ(91,"div",19),e.qZA(),e.YNc(92,ut,2,1,"div",20),e.qZA()()()()()),2&t){let o,a,c,b,Z,T,L;e.xp6(4),e.Oqu(e.lcZ(5,30,"master.general")),e.xp6(5),e.hij(" ",e.lcZ(10,32,"master.guestId")," "),e.xp6(3),e.hij(" ",null!==(o=n.res.outsideCustomerId)&&void 0!==o?o:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(16,34,"fullName")," "),e.xp6(3),e.hij(" ",null!==(a=n.res.fullName)&&void 0!==a?a:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(22,36,"master.citizenNumber")," "),e.xp6(3),e.hij(" ",null!==(c=n.res.citizenNumber)&&void 0!==c?c:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(28,38,"master.email")," "),e.xp6(3),e.hij(" ",null!==(b=n.res.email)&&void 0!==b?b:"_"," "),e.xp6(4),e.hij(" ",e.lcZ(35,40,"master.phoneNumber")," "),e.xp6(3),e.hij(" ",null!==(Z=n.res.phoneNumber)&&void 0!==Z?Z:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(41,42,"master.customerGroup")," "),e.xp6(3),e.hij(" ",null!==(T=n.res.customerTypeName)&&void 0!==T?T:"_"," "),e.xp6(2),e.Q6J("ngModel",n.res.isVisitor)("readOnly",!0),e.xp6(2),e.Oqu(e.lcZ(48,44,"master.visitors")),e.xp6(3),e.Q6J("ngModel",n.res.isAppointment)("readOnly",!0),e.xp6(2),e.Oqu(e.lcZ(53,46,"master.appointmentGuests")),e.xp6(4),e.hij(" ",e.lcZ(57,48,"system.description")," "),e.xp6(3),e.hij(" ",null!==(L=n.res.description)&&void 0!==L?L:"_"," "),e.xp6(2),e.Q6J("ngModel",n.res.isUse)("disabled",!0),e.xp6(2),e.Oqu(e.lcZ(64,50,"using")),e.xp6(5),e.hij(" ",e.lcZ(69,52,"vime.citizenImageFace")," "),e.xp6(6),e.Q6J("ngIf",n.frontCardImageSubject.value||n.isShowWebcamIdentityCardFront),e.xp6(3),e.hij(" ",e.lcZ(78,54,"vime.citizenBackImage")," "),e.xp6(6),e.Q6J("ngIf",n.backCardImageSubject.value||n.isShowWebcamIdentityCardBack),e.xp6(3),e.hij(" ",e.lcZ(87,56,"vime.citizenImageFace")," "),e.xp6(6),e.Q6J("ngIf",n.citizenImageFaceSubject.value||n.isShowWebcamIdentityGuestFaceImage)}},dependencies:[u.oG,l.JJ,l.On,w.Ie,h.O5,G.i,q.F,_.Ot],encapsulation:2}),i})();var j=s(13617);function dt(i,r){1&i&&(e.TgZ(0,"div",22),e._UZ(1,"mat-icon",23),e.TgZ(2,"div",24)(3,"span",25),e._uU(4),e.ALo(5,"transloco"),e.qZA()()()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"master.appointmentGuests"),""))}function gt(i,r){1&i&&(e.TgZ(0,"div",22),e._UZ(1,"mat-icon",23),e.TgZ(2,"div",24)(3,"span",25),e._uU(4),e.ALo(5,"transloco"),e.qZA()()()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"master.visitors"),""))}function pt(i,r){if(1&i&&(e.TgZ(0,"a",26,27)(2,"span"),e._uU(3),e.ALo(4,"transloco"),e.qZA()()),2&i){const t=r.$implicit,n=e.MAs(1),o=e.oxw();e.Tol("edit"===o.action?"cursor-not-allowed":"cursor-pointer"),e.Q6J("disabled","edit"===o.action)("routerLink",t.path)("queryParams",t.query)("active",n.isActive),e.xp6(3),e.Oqu(e.lcZ(4,7,t.name))}}const _t=[{path:"outside-customers",component:$,children:[{path:"",component:ie},{path:"edit/:id",component:ke},{path:"create",component:ot},{path:":id",component:(()=>{class i{constructor(t,n,o,a,c,b){this._outsideCustomerService=t,this._translocoService=n,this._notificationService=o,this._router=a,this._fuseConfirmationService=c,this._activationRoute=b,this._unsubscribeAll=new m.x,this.isLoading=!1,this.outsideCustomers=[],this.res={outsideCustomerId:null,fullName:null,phoneNumber:null,email:null,isAppointment:!1,isVisitor:!1,citizenNumber:null,citizenImageFace:null,citizenFrontImage:null,citizenBackImage:null,description:null,customerTypeId:null,customerTypeName:null,isUse:!0}}initialTabs(){this.tabs=[{name:"master.guestInformation",path:"general"},{name:"master.checkInOutRegisterHistory",path:"checkinout-register-history"},{name:"master.visitHistory",path:"visit-history"},{name:"master.checkInOutHistory",path:"check-in-out-history"}]}ngOnInit(){this.initialTabs(),this._activationRoute.params.pipe((0,C.R)(this._unsubscribeAll)).subscribe(t=>{console.log(t),t&&this.getById(t.id)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getById(t){this._outsideCustomerService.getById(t).pipe((0,C.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.res=(0,U.cloneDeep)(n))})}onCancel(){(0,I.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(t=>{"confirmed"==t&&this._router.navigate(["../"],{relativeTo:this._activationRoute})})}onBack(){this._router.navigate(["../"],{relativeTo:this._activationRoute})}onEdit(){this._router.navigate([`../edit/${this.res.outsideCustomerId}`],{relativeTo:this._activationRoute})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.H),e.Y36(_.Vn),e.Y36(y.zb),e.Y36(p.F0),e.Y36(z.R),e.Y36(p.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["outside-customer-detail"]],decls:32,vars:12,consts:[[1,"flex","flex-col","min-w-0","w-full","mb-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"flex","flex-col","bg-card","dark:bg-transparent","p-6","pb-0","items-center","border-b"],[1,"flex","flex-row","items-center","justify-between","w-full"],[1,"flex","gap-6"],[1,"w-20","h-20","object-contain","overflow-hidden","flex","items-center"],["nz-image","",3,"nzSrc"],[1,"flex","flex-col","gap-3","flex-1"],[1,"text-3xl","font-medium","tracking-tight"],[1,"flex","flex-col","gap-3","w-full"],["class","flex gap-2 items-center",4,"ngIf"],[1,"flex","md:flex-row","md:gap-2.5","gap-4"],["mat-flat-button","","color","accent",1,"gap-2",3,"click"],["svgIcon","heroicons_solid:arrow-uturn-left",1,"icon-size-5"],["mat-flat-button","","color","primary",1,"gap-2",3,"click"],["svgIcon","heroicons_solid:pencil",1,"icon-size-5"],[1,"z-10","relative","flex","flex-col","flex-0","w-full","bg-card"],["mat-tab-nav-bar","","mat-align-tabs","start","mat-stretch-tabs","false",1,"w-full",3,"tabPanel"],["class","px-6","fitInkBarToContent","","routerLinkActive","","mat-tab-link","",3,"disabled","class","routerLink","queryParams","active",4,"ngFor","ngForOf"],["tabPanel",""],[1,"flex","p-6"],[1,"flex","gap-2","items-center"],["svgIcon","mat_solid:bookmark",1,"icon-size-4"],[1,"px-2.5","justify-center","items-center","rounded","bg-slate-100"],[1,"text-slate-500","md","leading-6"],["fitInkBarToContent","","routerLinkActive","","mat-tab-link","",1,"px-6",3,"disabled","routerLink","queryParams","active"],["rla","routerLinkActive"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7),e.qZA(),e.TgZ(8,"div",8)(9,"div",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e.YNc(12,dt,6,3,"div",11),e.YNc(13,gt,6,3,"div",11),e.qZA()()(),e.TgZ(14,"div",12)(15,"button",13),e.NdJ("click",function(){return n.onBack()}),e._UZ(16,"mat-icon",14),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"transloco"),e.qZA()(),e.TgZ(20,"button",15),e.NdJ("click",function(){return n.onEdit()}),e._UZ(21,"mat-icon",16),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"transloco"),e.qZA()()()(),e.TgZ(25,"div",17)(26,"nav",18),e.YNc(27,pt,5,9,"a",19),e.qZA(),e._UZ(28,"mat-tab-nav-panel",null,20),e.qZA()(),e.TgZ(30,"div",21),e._UZ(31,"router-outlet"),e.qZA()()()()),2&t){const o=e.MAs(29);e.xp6(7),e.Q6J("nzSrc",n.res.citizenImageFace),e.xp6(3),e.hij(" ",n.res.fullName," "),e.xp6(2),e.Q6J("ngIf",n.res.isAppointment),e.xp6(1),e.Q6J("ngIf",n.res.isVisitor),e.xp6(5),e.Oqu(e.lcZ(19,8,"master.back")),e.xp6(5),e.Oqu(e.lcZ(24,10,"edit")),e.xp6(3),e.Q6J("tabPanel",o),e.xp6(1),e.Q6J("ngForOf",n.tabs)}},dependencies:[p.lC,p.rH,p.Od,f.lW,A.Hw,w.Ie,h.sg,h.O5,j.BU,j.sW,j.Nj,q.F,_.Ot],encapsulation:2}),i})(),children:[{path:"",pathMatch:"full",redirectTo:"general"},{path:"general",component:mt}]}]}];var ht=s(3914),ft=s(92982);let Ct=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:k.WI,useValue:{}},{provide:k.so,useValue:{}},{provide:Y.u7,useValue:Y.iF}],imports:[p.Bz.forChild(_t),Q.lN,K.c,u.p9,x.HQ,f.ot,A.Ps,M.AV,X.vO,V.qw,l.u5,_.y4,w.Gb,E.Tm,h.ez,B.rP,P.c,j.Nh,A.Ps,g.Tx,ht.G,ft.F]}),i})()}}]);