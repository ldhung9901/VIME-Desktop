"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[976],{65976:(Q,g,o)=>{o.r(g),o.d(g,{default:()=>E});var f=o(15861),r=o(39401),c=o(69609),h=o(63844),v=o(71320),x=o(1203),I=o(80905),t=o(22223),m=o(31531),A=o(88951),y=o(44755),l=o(99114),Z=o(430),p=o(51728),w=o(68467);const T=["signInNgForm"],b=["fido2"];function U(n,a){if(1&n&&(t.TgZ(0,"fuse-alert",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",e.alert.type)("@shake","error"===e.alert.type),t.xp6(1),t.hij(" ",e.alert.message," ")}}function S(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Vui l\xf2ng nh\u1eadp email "),t.qZA())}function C(n,a){1&n&&t._UZ(0,"mat-icon",39),2&n&&t.Q6J("svgIcon","heroicons_solid:eye")}function _(n,a){1&n&&t._UZ(0,"mat-icon",39),2&n&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function F(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1," \u0110\u0103ng nh\u1eadp "),t.qZA())}function J(n,a){1&n&&t._UZ(0,"mat-progress-spinner",40),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}const N=function(){return["/forgot-password"]},E=[{path:"",component:(()=>{class n{constructor(e,i,s,u){this._activatedRoute=e,this._authService=i,this._formBuilder=s,this._router=u,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.signInForm=this._formBuilder.group({userName:[null,r.kI.required],password:[null,r.kI.required],rememberMe:[!0]})}signIn(){this.signInForm.invalid||(this.signInForm.disable(),this.showAlert=!1,this._authService.signIn(this.signInForm.value).subscribe(()=>{const e=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this._router.navigateByUrl(e);let i=JSON.parse(localStorage.getItem("user"));i&&this._router.navigate(["/",i.defaultTenantId])},e=>{this.signInForm.enable(),this.alert={type:"error",message:"C\xf3 l\u1ed7i x\u1ea3y ra"},this.showAlert=!0}))}passwordLessSignIn(){var e=this;return(0,f.Z)(function*(){e.signInForm.disable();try{let i=yield e.fido2.handleSignInSubmit(e.signInForm.value.userName);e._authService.passwordLessSignIn(i);const s=e._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";e._router.navigateByUrl(s)}catch{e.signInForm.enable()}})()}signUp(){const e=this._activatedRoute.snapshot.queryParamMap.get("redirectURL");this._router.navigate(["/sign-up"],e?{relativeTo:this._activatedRoute,queryParams:{redirectURL:e}}:{relativeTo:this._activatedRoute})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(A.e),t.Y36(r.QS),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["auth-sign-in"]],viewQuery:function(e,i){if(1&e&&(t.Gf(T,5),t.Gf(b,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.signInNgForm=s.first),t.iGM(s=t.CRH())&&(i.fido2=s.first)}},standalone:!0,features:[t.jDz],decls:54,vars:15,consts:[[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-white","sm:w-auto","sm:rounded-2xl","sm:p-12","md:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","items-center","md:items-center","md:justify-end","md:rounded-none","lg:p-12","md:bg-slate-100","lg:bg-slate-100"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"flex","flex-row","mb-4"],[1,"w-40","h-25"],["src","assets/images/logo/vime-logo.png"],[1,"text-4xl","mb-8","font-extrabold","leading-tight","tracking-tight"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-4",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","userName","matInput","",3,"formControlName"],[4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","fuse-mat-button-large","flex-row","items-center","mt-2","space-x-2"],["mat-flat-button","",1,"flex-grow","w-full","fuse-mat-button-large",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],["mat-stroked-button","","color","primary",1,"fuse-mat-button-large","rounded-md","w-10",3,"click"],["svgIcon","heroicons_solid:key"],[1,"flex","flex-row","items-center","mt-2"],["mat-stroked-button","","routerLink","/sso-sign-in",1,"flex-grow","fuse-mat-button-large","rounded-md","w-full",3,"color","disabled"],[1,"flex","flex-row","pt-4","mt-1.5","items-stretch","w-full","justify-between"],[1,"flex-1","flex-row","items-stretch"],[1,"text-primary-500","hover:underline","font-medium",3,"routerLink"],[1,"flex-1","flex","justify-end"],[1,"justify-end","font-medium","text-primary-500","hover:underline","cursor-pointer",3,"click"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25","ng-tns-c3991995138-31"],["r","234","cx","196","cy","23",1,"ng-tns-c3991995138-31"],["r","234","cx","790","cy","491",1,"ng-tns-c3991995138-31"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-4xl","font-bold","items-center","leading-none","lg:p-6","p-6","md:p-4","sm:p-2","text-gray-100"],[1,"text-8xl","font-bold","items-center","leading-none","lg:px-6","px-6","md:px-4","sm:px-2","text-gray-100"],["fido2",""],[1,"mt-8",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],[3,"diameter","mode"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA()(),t.TgZ(6,"div",6),t._uU(7,"\u0110\u0103ng nh\u1eadp"),t.qZA(),t.YNc(8,U,2,5,"fuse-alert",7),t.TgZ(9,"form",8,9)(11,"mat-form-field",10)(12,"mat-label"),t._uU(13,"Email"),t.qZA(),t._UZ(14,"input",11),t.YNc(15,S,2,0,"mat-error",12),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"M\u1eadt kh\u1ea9u"),t.qZA(),t._UZ(19,"input",13,14),t.TgZ(21,"button",15),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(20);return t.KtG(d.type="password"===d.type?"text":"password")}),t.YNc(22,C,1,1,"mat-icon",16),t.YNc(23,_,1,1,"mat-icon",16),t.qZA(),t.TgZ(24,"mat-error"),t._uU(25," Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u "),t.qZA()(),t.TgZ(26,"div",17)(27,"button",18),t.NdJ("click",function(){return i.signIn()}),t.YNc(28,F,2,0,"span",12),t.YNc(29,J,1,2,"mat-progress-spinner",19),t.qZA(),t.TgZ(30,"button",20),t.NdJ("click",function(){return i.passwordLessSignIn()}),t._UZ(31,"mat-icon",21),t.qZA()(),t.TgZ(32,"div",22)(33,"button",23),t._uU(34," SSO "),t.qZA()()(),t.TgZ(35,"div",24)(36,"div",25)(37,"a",26),t._uU(38,"Qu\xean m\u1eadt kh\u1ea9u? "),t.qZA()(),t.TgZ(39,"div",27)(40,"div",28),t.NdJ("click",function(){return i.signUp()}),t._uU(41," \u0110\u0103ng k\xfd ngay"),t.qZA()()()()(),t.TgZ(42,"div",29),t.O4$(),t.TgZ(43,"svg",30)(44,"g",31),t._UZ(45,"circle",32)(46,"circle",33),t.qZA()(),t.kcU(),t.TgZ(47,"div",34)(48,"div",35),t._uU(49," Ph\u1ea7n m\u1ec1m qu\u1ea3n l\xed s\u1ea3nh th\xf4ng minh "),t.qZA(),t.TgZ(50,"div",36),t._uU(51," VIME "),t.qZA()()()(),t._UZ(52,"fido2-sign-in",null,37)}if(2&e){const s=t.MAs(20);t.xp6(8),t.Q6J("ngIf",i.showAlert),t.xp6(1),t.Q6J("formGroup",i.signInForm),t.xp6(5),t.Q6J("formControlName","userName"),t.xp6(1),t.Q6J("ngIf",i.signInForm.get("userName").hasError("required")),t.xp6(4),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===s.type),t.xp6(1),t.Q6J("ngIf","text"===s.type),t.xp6(4),t.Q6J("color","primary")("disabled",i.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",!i.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",i.signInForm.disabled),t.xp6(4),t.Q6J("color","primary")("disabled",i.signInForm.disabled),t.xp6(4),t.Q6J("routerLink",t.DdM(14,N))}},dependencies:[I.m,y.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.KE,l.hX,l.TO,l.R9,c.Nt,Z.Hw,p.lW,p.RK,w.Ou,m.rH,v.W,r.UX,c.c,x.C],encapsulation:2,data:{animation:h.L}}),n})()}]}}]);