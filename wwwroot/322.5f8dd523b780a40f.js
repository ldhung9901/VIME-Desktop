"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[322],{92982:($,D,a)=>{a.d(D,{F:()=>E});var r=a(22223);let E=(()=>{class _{}return _.\u0275fac=function(L){return new(L||_)},_.\u0275mod=r.oAB({type:_}),_.\u0275inj=r.cJS({}),_})()},15322:($,D,a)=>{a.r(D),a.d(D,{TicketModule:()=>Ge});var r=a(44755),E=a(33770),_=a(39401),g=a(51728),L=a(11292),q=a(1217),O=a(99114),A=a(430),j=a(69609),v=a(17406),U=a(44867),z=a(50787),H=a(50877),G=a(13617),Q=a(83649),R=a(31531),F=a(28773),V=a(74473),h=a(30430),B=a(61972),W=a(9436),M=a(22497),X=a(23697),ee=a(74050),te=a(8551),u=a(58016),ne=a(56467),ie=a(21352),P=a(33231),oe=a(12965),se=a(92982),e=a(22223);let ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ticket"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[R.lC],encapsulation:2}),i})();var f=a(82004),ce=a(15439),k=a.n(ce),Z=a(77579),le=a(78372),m=a(82722),C=a(70262),T=a(62843),b=a(28746),d=a(25580),re=a(42198),N=a(71683),ue=a(61148),y=a(83998),Y=a(47148),J=a(90504);function me(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openBiostationConfig())}),e._UZ(1,"mat-icon",22),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"transloco"),e.qZA()()}2&i&&(e.Q6J("color","primary"),e.xp6(3),e.Oqu(e.lcZ(4,2,"vime.checkInOutSettings")))}function pe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCheckOut())}),e._UZ(1,"label",18),e.qZA()}2&i&&(e.xp6(1),e.Q6J("transloco","vime.checkOut"))}function de(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCheckIn())}),e._UZ(1,"label",18),e.qZA()}2&i&&(e.xp6(1),e.Q6J("transloco","master.checkIn"))}function _e(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSave())}),e._UZ(1,"label",18),e.qZA()}2&i&&(e.xp6(1),e.Q6J("transloco","save"))}let w=(()=>{class i{constructor(t,n,o,s,l,x,p){this._translocoService=t,this._fuseConfirmationService=n,this._customerTypeService=o,this._matDialog=s,this._ticketService=l,this.dialogRef=x,this.data=p,this.actionEnum="edit",this._unsubscribeAll=new Z.x,this.customerTypes=[],this.res={ticketCustomerId:null,outsideCustomerId:null,ticketId:null,fullName:null,phoneNumber:null,email:null,citizenNumber:null,statusId:null,isAppointment:!1},this.areaIds=[],this._unsubscribeAll$=new Z.x,p.res&&(this.res=p.res,console.log(this.res)),p.actionEnum&&(this.actionEnum=p.actionEnum),p.startDate&&(this.startDate=p.startDate),p.endDate&&(this.endDate=p.endDate),p.areaIds&&(this.areaIds=p.areaIds),p.checkInOut&&(this.checkInOut=p.checkInOut)}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnInit(){this.getTicketTypes()}getTicketTypes(){this._customerTypeService.get({textSearch:"",isUse:!0}).pipe((0,m.R)(this._unsubscribeAll$)).subscribe(({data:t})=>{this.customerTypes=[...t.map(n=>({id:n.customerTypeId,name:n.typeName}))]})}buttonClose(){this.dialogRef.close(this.res)}onSave(){if(!this.res.fullName||!this.res.citizenNumber||!this.res.email)return void(0,f.CK)(this._fuseConfirmationService,"error.missingInformation");const t=/^[0-9]*$/;this.res.citizenNumber&&!t.test(this.res.citizenNumber)||this.res.phoneNumber&&!t.test(this.res.phoneNumber)?(0,f.CK)(this._fuseConfirmationService,"error.invalidPhoneNumber"):this.dialogRef.close(this.res)}openBiostationConfig(){this._matDialog.open(re.I,{disableClose:!1,data:{startDate:this.startDate,endDate:this.endDate,areaIds:this.areaIds,outsideCustomerId:this.res.outsideCustomerId}}).afterClosed().subscribe(n=>{})}onCheckIn(){this._ticketService.checkIn(this.res.ticketId,this.res.ticketCustomerId,this.res).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(t=>(0,T._)(()=>t))).subscribe(({})=>{(0,f.Df)(this._fuseConfirmationService,"message.savedDataSuccessfully"),this.dialogRef.close(!0)})}onCheckOut(){this._ticketService.checkOut(this.res.ticketId,this.res.ticketCustomerId,this.res).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(t=>(0,T._)(()=>t))).subscribe(({})=>{(0,f.Df)(this._fuseConfirmationService,"message.savedDataSuccessfully"),this.dialogRef.close(!0)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.Vn),e.Y36(N.R),e.Y36(ue.a),e.Y36(d.uw),e.Y36(y.w),e.Y36(d.so),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ticket-customer"]],decls:33,vars:38,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","md:min-w-160","lg:min-w-360","max-h-200","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","vime.customerInformation",1,"text-lg","font-medium","text-white"],["mat-icon-button","",3,"click"],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-90","px-6","pt-6","pb-3","sm:p-8","space-y-6","overflow-y-auto","bg-slate-100"],[1,"w-full","p-4","rounded","bg-card","shadow"],[1,"w-full","flex","flex-1","rounded","p-4","space-x-4"],[1,"flex-1"],[3,"isRequired","model","actionEnum","label","isDisableLength","modelChange"],[3,"model","actionEnum","label","isDisableLength","modelChange"],[1,"flex-1","w-60",3,"actionEnum","listData","model","label","modelChange"],[1,"flex","flex-col","sm:flex-row","justify-between","sm:gap-4","bg-card","rounded","p-6","shadow"],[3,"label","actionEnum","model","modelChange"],[1,"flex","flex-row","justify-between"],["mat-flat-button","","class","gap-2",3,"color","click",4,"ngIf"],[1,"justify-end"],["mat-button","",1,"w-min","mx-2",3,"click"],[3,"transloco"],["mat-flat-button","","color","primary","class","w-min mx-2",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","class","w-min",3,"click",4,"ngIf"],["mat-flat-button","",1,"gap-2",3,"color","click"],["svgIcon","heroicons_solid:cog-6-tooth",1,"icon-size-5"],["mat-flat-button","","color","primary",1,"w-min","mx-2",3,"click"],["mat-flat-button","","color","primary",1,"w-min",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.buttonClose()}),e._UZ(4,"mat-icon",4),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.fullName=s}),e.qZA()(),e.TgZ(10,"div",8)(11,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.citizenNumber=s}),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"cm-input",10),e.NdJ("modelChange",function(s){return n.res.phoneNumber=s}),e.qZA()(),e.TgZ(15,"div",8)(16,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.email=s}),e.qZA()()(),e.TgZ(17,"div",7)(18,"div",8)(19,"cm-select",11),e.NdJ("modelChange",function(s){return n.res.customerTypeId=s}),e.qZA()()()(),e.TgZ(20,"div",12)(21,"cm-camera",13),e.NdJ("modelChange",function(s){return n.res.citizenFrontImage=s}),e.qZA(),e.TgZ(22,"cm-camera",13),e.NdJ("modelChange",function(s){return n.res.citizenBackImage=s}),e.qZA(),e.TgZ(23,"cm-camera",13),e.NdJ("modelChange",function(s){return n.res.citizenImageFace=s}),e.qZA()(),e.TgZ(24,"div",14)(25,"div"),e.YNc(26,me,5,4,"button",15),e.qZA(),e.TgZ(27,"div",16)(28,"button",17),e.NdJ("click",function(){return n.buttonClose()}),e._UZ(29,"label",18),e.qZA(),e.YNc(30,pe,2,1,"button",19),e.YNc(31,de,2,1,"button",19),e.YNc(32,_e,2,1,"button",20),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("svgIcon","heroicons_outline:x-mark"),e.xp6(5),e.Q6J("isRequired",!0)("model",n.res.fullName)("actionEnum",n.actionEnum)("label","fullName")("isDisableLength",!0),e.xp6(2),e.Q6J("isRequired",!0)("model",n.res.citizenNumber)("actionEnum",n.actionEnum)("label","vime.citizenNumber")("isDisableLength",!0),e.xp6(3),e.Q6J("model",n.res.phoneNumber)("actionEnum",n.actionEnum)("label","system.mobile")("isDisableLength",!0),e.xp6(2),e.Q6J("isRequired",!0)("model",n.res.email)("actionEnum",n.actionEnum)("label","master.email")("isDisableLength",!0),e.xp6(3),e.Q6J("actionEnum",n.actionEnum)("listData",n.customerTypes)("model",n.res.customerTypeId)("label","master.guestGroup"),e.xp6(2),e.Q6J("label","vime.citizenFrontImage")("actionEnum",n.actionEnum)("model",n.res.citizenFrontImage),e.xp6(1),e.Q6J("label","vime.citizenBackImage")("actionEnum",n.actionEnum)("model",n.res.citizenBackImage),e.xp6(1),e.Q6J("label","vime.citizenImageFace")("actionEnum",n.actionEnum)("model",n.res.citizenImageFace),e.xp6(3),e.Q6J("ngIf","TICKETCUSTOMER_STATUS_NOTYET"==n.res.statusId&&"checkOutView"!=n.checkInOut),e.xp6(3),e.Q6J("transloco","close"),e.xp6(1),e.Q6J("ngIf","TICKETCUSTOMER_STATUS_ARIVAL"==n.res.statusId&&"checkOutView"!=n.checkInOut),e.xp6(1),e.Q6J("ngIf","TICKETCUSTOMER_STATUS_NOTYET"==n.res.statusId&&"checkOutView"!=n.checkInOut),e.xp6(1),e.Q6J("ngIf","view"!=n.actionEnum))},dependencies:[g.lW,g.RK,A.Hw,h.KI,r.O5,Y.f,J.W,F.L,h.Ot],encapsulation:2}),i})();var ge=a(79925),he=a(70391);function fe(i,c){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.name," - ",t.citizenNumber," ")}}function Ce(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSave())}),e._UZ(1,"label",15),e.qZA()}2&i&&(e.xp6(1),e.Q6J("transloco","vime.select"))}function Te(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSave())}),e._UZ(1,"label",15),e.qZA()}2&i&&(e.xp6(1),e.Q6J("transloco","vime.checkIn"))}let be=(()=>{class i{constructor(t,n,o,s){this._dialog=t,this._outsideCustomerService=n,this.dialogRef=o,this.data=s,this.outsideCustomers=[],this.filter={textSearch:null,isUse:!0},this.outsideCustomersSelect="",this._unsubscribeAll$=new Z.x}ngOnInit(){this.getOutsideCustomer()}getOutsideCustomer(){this.isLoading=!0,this._outsideCustomerService.getAll(this.filter).pipe((0,m.R)(this._unsubscribeAll$),(0,b.x)(()=>this.isLoading=!1)).subscribe(({data:t})=>{this.outsideCustomers=[...t.map(n=>({id:n.outsideCustomerId,name:n.fullName,citizenNumber:n.citizenNumber,phoneNumber:n.phoneNumber,email:n.email,citizenFrontImage:n.citizenFrontImage,citizenBackImage:n.citizenBackImage,citizenImageFace:n.citizenImageFace,isUse:n.isUse,isVisitor:n.isVisitor,isAppointment:n.isAppointment,customerTypeId:n.customerTypeId,customerTypeName:n.customerTypeName,description:n.description}))]})}onCancel(){this.dialogRef.close(!0)}onSave(){const t=this.outsideCustomers.find(s=>s.id===this.outsideCustomersSelect);this._dialog.open(w,{disableClose:!0,data:{res:{ticketCustomerId:null,outsideCustomerId:t?t.id:null,ticketId:null,fullName:t?t.name:null,phoneNumber:t?t.phoneNumber:null,email:t?t.email:null,customerTypeId:t?t.customerTypeId:null,citizenNumber:t?t.citizenNumber:null,citizenFrontImage:t?t.citizenFrontImage:null,citizenBackImage:t?t.citizenBackImage:null,citizenImageFace:t?t.citizenImageFace:null,statusId:"TICKETCUSTOMER_STATUS_NOTYET",isAppointment:!t||t.isAppointment},checkInOut:"checkOutView"}}).afterClosed().subscribe(s=>{s&&this.dialogRef.close(s)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.uw),e.Y36(ge.H),e.Y36(d.so),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ticket-customer-filter"]],decls:27,vars:25,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","md:min-w-160","lg:min-w-256","max-h-200","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","vime.filterCustomer",1,"text-lg","font-medium","text-white"],["mat-icon-button","",3,"click"],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-90","px-6","pt-6","pb-3","sm:p-8","space-y-6","overflow-y-auto","bg-slate-100"],[1,"w-full","max-w-256","mx-auto","bg-card","rounded-md","shadow","p-6","space-y-6"],[1,"flex","flex-col","p-6"],[1,"pb-2","text-lg","font-semibold"],[3,"ngModel","disabled","ngModelChange"],[3,"ngModel","placeholderLabel","noEntriesFoundLabel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value","click"],[1,"flex","flex-row","justify-end"],["mat-button","",1,"w-min","mx-2","border",3,"click"],[3,"transloco"],["mat-flat-button","","color","primary","class","w-min",3,"click",4,"ngIf"],[3,"value"],["mat-flat-button","","color","primary",1,"w-min",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.onCancel()}),e._UZ(4,"mat-icon",4),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"mat-label",8),e._uU(9),e.ALo(10,"transloco"),e.qZA(),e.TgZ(11,"mat-form-field")(12,"mat-select",9),e.NdJ("ngModelChange",function(s){return n.outsideCustomersSelect=s}),e.TgZ(13,"mat-option")(14,"ngx-mat-select-search",10),e.NdJ("ngModelChange",function(s){return n.search=s}),e.ALo(15,"transloco"),e.ALo(16,"transloco"),e.qZA()(),e.YNc(17,fe,2,3,"mat-option",11),e.ALo(18,"filter"),e.TgZ(19,"mat-option",12),e.NdJ("click",function(){return n.onSave()}),e._uU(20),e.ALo(21,"transloco"),e.qZA()()()()(),e.TgZ(22,"div",13)(23,"button",14),e.NdJ("click",function(){return n.onCancel()}),e._UZ(24,"label",15),e.qZA(),e.YNc(25,Ce,2,1,"button",16),e.YNc(26,Te,2,1,"button",16),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("svgIcon","heroicons_outline:x-mark"),e.xp6(5),e.hij(" ",e.lcZ(10,13,"vime.filterCustomerByCitizenNumber")," "),e.xp6(3),e.Q6J("ngModel",n.outsideCustomersSelect)("disabled",n.isLoading),e.xp6(2),e.s9C("placeholderLabel",e.lcZ(15,15,"search")),e.s9C("noEntriesFoundLabel",e.lcZ(16,17,"no_data")),e.Q6J("ngModel",n.search),e.xp6(3),e.Q6J("ngForOf",e.Dn7(18,19,n.outsideCustomers,"citizenNumber",n.search)),e.xp6(2),e.Q6J("value",null),e.xp6(1),e.hij(" ",e.lcZ(21,23,"vime.newCustomer")," "),e.xp6(4),e.Q6J("transloco","close"),e.xp6(1),e.Q6J("ngIf",n.outsideCustomersSelect),e.xp6(1),e.Q6J("ngIf",!n.outsideCustomersSelect))},dependencies:[O.KE,O.hX,g.lW,g.RK,A.Hw,_.JJ,_.On,h.KI,r.sg,r.O5,q.ey,P.nu,z.gD,h.Ot,he.g],encapsulation:2}),i})();var ve=a(12182),ke=a(38642),Ze=a(85450),xe=a(15614);function Ae(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"mat-radio-group",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedOption=o)}),e.TgZ(1,"mat-radio-button",34),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e.TgZ(4,"mat-radio-button",35),e._uU(5),e.ALo(6,"transloco"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",!0)("ngModel",t.selectedOption),e.xp6(1),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(3,6,"vime.company")," "),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(6,8,"vime.apartment")," ")}}function Ie(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"mat-radio-group",36),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedOption=o)}),e.TgZ(1,"mat-radio-button",34),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e.TgZ(4,"mat-radio-button",35),e._uU(5),e.ALo(6,"transloco"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("ngModel",t.selectedOption),e.xp6(1),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(3,5,"vime.company")," "),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(6,7,"vime.apartment")," ")}}function De(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"cm-select",37),e.NdJ("modelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.res.companyId=o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("actionEnum",t.actionEnum)("listData",t.companies)("model",t.res.companyId)("label","vime.company")}}function Ne(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"cm-select",37),e.NdJ("modelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.res.apartmentId=o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("actionEnum",t.actionEnum)("listData",t.apartments)("model",t.res.apartmentId)("label","vime.apartment")}}function ye(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",8)(2,"cm-input",16),e.NdJ("modelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.res.cancelReason=o)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("type","textarea")("actionEnum",t.actionEnum)("model",t.res.cancelReason)("label","vime.cancelReason")("isDisableLength",!0)}}function Je(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addCustomer())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"transloco"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"master.addCustomers")))}function Ee(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.clickCustomer(o,"view","checkOutView"))}),e._UZ(1,"mat-icon",51),e._uU(2),e.ALo(3,"transloco"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"view")," "))}function Le(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.clickCustomer(o,"edit","checkOutView"))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"transloco"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"edit")," "))}function Oe(i,c){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"date"),e._UZ(3,"br"),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.arrivalTime,"HH:mm dd/MM/YY"),"")}}function Ue(i,c){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"date"),e._UZ(3,"br"),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.departureTime,"HH:mm dd/MM/YY"),"")}}const we=function(i,c,t){return{"text-slate-200":i,"text-blue-500":c,"text-red-500":t}};function Se(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.clickCustomer(o,"view","checkInOut"))}),e._UZ(1,"mat-icon",53),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("disabled","CANCELED"===n.res.statusId),e.xp6(1),e.Q6J("ngClass",e.kEZ(2,we,"WAITING"==n.res.statusId,"TICKETCUSTOMER_STATUS_NOTYET"===t.statusId,"TICKETCUSTOMER_STATUS_ARIVAL"===t.statusId))}}const qe=function(i){return{"text-green-500":i}};function ze(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onReCheckIn(o.ticketCustomerId,o))}),e._UZ(1,"mat-icon",55),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("disabled",!t.outsideCustomerId&&"edit"==n.actionEnum),e.xp6(1),e.Q6J("ngClass",e.VKq(2,qe,"TICKETCUSTOMER_STATUS_DEPARTURE"==t.statusId))}}const K=function(i){return{"background-color":i}};function Qe(i,c){if(1&i&&(e.TgZ(0,"tr",39)(1,"td")(2,"span",40)(3,"button",41)(4,"mat-icon"),e._uU(5,"more_vert"),e.qZA(),e.TgZ(6,"mat-menu",null,42),e.ynx(8),e.YNc(9,Ee,4,3,"button",43),e.YNc(10,Le,5,3,"button",43),e.BQk(),e.qZA()()()(),e.TgZ(11,"td")(12,"div",44),e._uU(13),e.qZA()(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e.YNc(23,Oe,4,4,"div",45),e.qZA(),e.TgZ(24,"td"),e.YNc(25,Ue,4,4,"div",45),e.qZA(),e.TgZ(26,"td")(27,"div",46),e._UZ(28,"div",47),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"transloco"),e.qZA()()(),e.TgZ(32,"td"),e.YNc(33,Se,2,6,"button",48),e.YNc(34,ze,2,4,"button",49),e.qZA()()),2&i){const t=c.$implicit,n=c.index,o=e.MAs(7),s=e.oxw(),l=e.MAs(53);e.Q6J("ngStyle",e.VKq(17,K,t.statusBackgroundColor)),e.xp6(3),e.Q6J("matMenuTriggerFor",o),e.xp6(6),e.Q6J("ngIf","view"===s.actionEnum),e.xp6(1),e.Q6J("ngIf","edit"===s.actionEnum),e.xp6(3),e.Oqu((l.nzPageIndex-1)*l.nzPageSize+n+1),e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.citizenNumber),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Q6J("ngForOf",t.ticketUserInOuts),e.xp6(2),e.Q6J("ngForOf",t.ticketUserInOuts),e.xp6(3),e.Q6J("ngStyle",e.VKq(19,K,t.statusColor)),e.xp6(2),e.Oqu(e.lcZ(31,15,t.statusName)),e.xp6(3),e.Q6J("ngIf","TICKETCUSTOMER_STATUS_DEPARTURE"!=t.statusId),e.xp6(1),e.Q6J("ngIf","TICKETCUSTOMER_STATUS_DEPARTURE"==t.statusId&&!s.onCheckTime(s.res.startDate,s.res.endDate))}}function Re(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSave())}),e._UZ(1,"label",31),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.isLoading),e.xp6(1),e.Q6J("transloco","save")}}let S=(()=>{class i{constructor(t,n,o,s,l,x,p,Ve,Be,I){this._ticketService=t,this._translocoService=n,this._fuseConfirmationService=o,this._ticketTypeService=s,this._companyService=l,this._apartmentService=x,this._dialog=p,this._biostationService=Ve,this.dialogRef=Be,this.data=I,this._unsubscribeAll$=new Z.x,this.res={ticketId:null,ticketCode:null,contactName:null,contactPhoneNumber:null,contactEmail:null,isCompany:!1,isApartment:!1,companyId:null,apartmentId:null,ticketTypeId:null,content:null,startDate:null,endDate:null,statusId:null,ticketCustomers:[],cancelReason:null,areaIds:[],companyName:null,typeName:null,apartmentCode:null},this.ticketTypes=[],this.companies=[],this.apartments=[],this.actionEnum="edit",this.filteredCustomers=[],this.accessGroup=[],this.selectedOption=1,I.ticketId&&(this.res.ticketId=I.ticketId),this.actionEnum=I.actionEnum}ngOnInit(){this.getByIdTicket(this.res.ticketId),this.getTicketTypes(),this.getCompany(),this.getApartments(),this.getAccessGroup()}getByIdTicket(t){this.isLoading=!0,this._ticketService.getById(t).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(n=>(this.isLoading=!1,(0,T._)(()=>n))),(0,b.x)(()=>this.isLoading=!1)).subscribe(({data:n})=>{this.res=n,this.filteredCustomers=this.res.ticketCustomers,this.selectedOption=this.res.apartmentId?2:1})}clickCustomer(t,n,o){this._dialog.open(w,{disableClose:!0,data:{res:t,actionEnum:n,startDate:this.res.startDate,endDate:this.res.endDate,areaIds:this.res.areaIds,checkInOut:o}}).afterClosed().subscribe(l=>{Array.isArray(l)&&(this.res.ticketCustomers=[...l,...this.res.ticketCustomers]),this.getByIdTicket(this.res.ticketId)})}getTicketTypes(){this._ticketTypeService.get({textSearch:"",isUse:!0}).pipe((0,m.R)(this._unsubscribeAll$)).subscribe(({data:t})=>{this.ticketTypes=[...t.map(n=>({id:n.ticketTypeId,name:n.typeName}))]})}getCompany(){this._companyService.get({textSearch:"",floorId:"",blockId:"",isUse:!0}).pipe((0,m.R)(this._unsubscribeAll$)).subscribe(({data:t})=>{this.companies=[...t.map(n=>({id:n.companyId,name:n.companyName}))]})}getApartments(){this._apartmentService.get({textSearch:"",floorId:"",blockId:"",isUse:!0}).pipe((0,m.R)(this._unsubscribeAll$)).subscribe(({data:t})=>{this.apartments=[...t.map(n=>({id:n.apartmentId,name:n.apartmentCode}))]})}filterCustomers(t){this.res.ticketCustomers=this.filteredCustomers.filter(n=>n.fullName?.toLowerCase().includes(t.toLowerCase())||n.citizenNumber?.toLowerCase().includes(t.toLowerCase()))}onCancel(){this.dialogRef.close(!0)}onSave(){this.isLoading=!0,1===this.selectedOption?(this.res.isCompany=!0,this.res.isApartment=!1):2===this.selectedOption&&(this.res.isCompany=!1,this.res.isApartment=!0),this._ticketService.update(this.res.ticketId,this.res).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(t=>(this.isLoading=!1,(0,T._)(()=>t))),(0,b.x)(()=>this.isLoading=!1)).subscribe(({})=>{(0,f.aB)(this._fuseConfirmationService,"message.savedDataSuccessfully"),this.dialogRef.close(!0)})}addCustomer(){this._dialog.open(be,{disableClose:!0,data:{}}).afterClosed().subscribe(n=>{n.citizenNumber&&(this.res.ticketCustomers=[...this.res.ticketCustomers,n])})}changeAccessGroup(t){this.res.areaIds=t.map(n=>n)}getAccessGroup(){this._biostationService.getAccessGroup().pipe((0,m.R)(this._unsubscribeAll$),(0,b.x)(()=>this.isLoading=!1)).subscribe(({data:t})=>{t&&(this.accessGroup=t)})}onReCheckIn(t,n){this.btnLoading=!0,this._ticketService.checkIn(this.res.ticketId,t,n).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(o=>(this.btnLoading=!1,(0,T._)(()=>o))),(0,b.x)(()=>this.btnLoading=!1)).subscribe(({data:o})=>{this._dialog.open(w,{disableClose:!0,data:{res:o,actionEnum:"view",startDate:this.res.startDate,endDate:this.res.endDate,areaIds:this.res.areaIds}}).afterClosed().subscribe(l=>{this.getByIdTicket(l.ticketId)})})}onCheckTime(t,n){const o=k()(),l=(k()(t),k()(n));return o.isAfter(l)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.w),e.Y36(h.Vn),e.Y36(N.R),e.Y36(ve.x),e.Y36(ke.J),e.Y36(Ze.V),e.Y36(d.uw),e.Y36(xe.h),e.Y36(d.so),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ticket-detail"]],decls:88,vars:90,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","md:min-w-160","lg:min-w-360","max-h-200","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","vime.registrationFormInformation",1,"text-lg","font-medium","text-white"],["mat-icon-button","",3,"click"],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-90","px-6","pt-6","pb-3","sm:p-8","space-y-6","overflow-y-auto","bg-slate-100"],[1,"w-full","max-w-360","mx-auto","bg-card","rounded-md","shadow","p-6","space-y-6"],[1,"w-full","flex","flex-1","mx-auto","space-x-4"],[1,"flex-1"],[3,"isRequired","actionEnum","model","label","isDisableLength","modelChange"],[1,"flex-1","py-5"],["class","flex-1",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["class","flex-1",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex-1 w-60",3,"actionEnum","listData","model","label","modelChange",4,"ngIf"],[1,"flex-1","w-60",3,"label","listData","actionEnum","model","isRequired","modelChange"],[1,"w-full","flex","flex-1","mx-auto","space-x-2"],[3,"type","actionEnum","model","label","isDisableLength","modelChange"],[3,"isRequired","type","actionEnum","model","label","isDisableLength","modelChange"],["label","master.zone",3,"type","actionEnum","listData","isRequired","model","modelChange"],["class","w-full flex flex-1 mx-auto space-x-2",4,"ngIf"],[1,"py-6","flex","flex-row","justify-between","px-3"],[1,"w-full","text-2xl","font-medium","leading-4"],[3,"model","label","placeholder","isDisableLength","modelChange"],[1,"flex-1","flex","justify-end","items-end"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["nzShowSizeChanger","","nzBordered","true",3,"nzLoading","nzData"],["basicTable",""],["nzAlign","center","nzWidth","70px"],["class","hover:cursor-pointer",3,"ngStyle",4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-end"],["mat-button","",1,"w-min","mx-2","border",3,"click"],[3,"transloco"],["mat-flat-button","","color","primary","class","w-min",3,"disabled","click",4,"ngIf"],[1,"flex-1",3,"disabled","ngModel","ngModelChange"],["color","primary",1,"flex-1","text-lg","pl-4","pt-2","pr-30","font-medium","justify-center","items-center",3,"value"],["color","primary",1,"flex-1","text-lg","pl-4","pt-2","font-medium","justify-center","items-center",3,"value"],[1,"flex-1",3,"ngModel","ngModelChange"],[1,"flex-1","w-60",3,"actionEnum","listData","model","label","modelChange"],["mat-flat-button","","color","primary",3,"click"],[1,"hover:cursor-pointer",3,"ngStyle"],[1,"items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["headerMenu",""],["mat-menu-item","",3,"click",4,"ngIf"],[1,"h-full","flex","justify-center","items-center"],[4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","mr-2",3,"ngStyle"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],["svgIcon","heroicons_outline:eye"],["mat-icon-button","",3,"disabled","click"],["svgIcon","heroicons_solid:forward",3,"ngClass"],[3,"disabled","click"],["svgIcon","heroicons_outline:arrow-uturn-left",3,"ngClass"],["mat-flat-button","","color","primary",1,"w-min",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.onCancel()}),e._UZ(4,"mat-icon",4),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.ticketCode=s}),e.qZA()(),e.TgZ(10,"div",8)(11,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.contactName=s}),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.contactPhoneNumber=s}),e.qZA()(),e.TgZ(15,"div",8)(16,"cm-input",9),e.NdJ("modelChange",function(s){return n.res.contactEmail=s}),e.qZA()()(),e.TgZ(17,"div",7)(18,"div",10)(19,"div",8),e.YNc(20,Ae,7,10,"mat-radio-group",11),e.YNc(21,Ie,7,9,"mat-radio-group",12),e.qZA()(),e.TgZ(22,"div",8),e.YNc(23,De,1,4,"cm-select",13),e.YNc(24,Ne,1,4,"cm-select",13),e.qZA()(),e.TgZ(25,"div",7)(26,"cm-select",14),e.NdJ("modelChange",function(s){return n.res.ticketTypeId=s}),e.qZA()(),e.TgZ(27,"div",15)(28,"div",8)(29,"cm-input",16),e.NdJ("modelChange",function(s){return n.res.content=s}),e.qZA()()(),e.TgZ(30,"div",7)(31,"div",8)(32,"cm-input",17),e.NdJ("modelChange",function(s){return n.res.startDate=s}),e.qZA()(),e.TgZ(33,"div",8)(34,"cm-input",17),e.NdJ("modelChange",function(s){return n.res.endDate=s}),e.qZA()()(),e.TgZ(35,"div",15)(36,"div",8)(37,"cm-select",18),e.NdJ("modelChange",function(s){return n.changeAccessGroup(s)}),e.qZA()()(),e.YNc(38,ye,3,5,"div",19),e.qZA(),e.TgZ(39,"div",6)(40,"div",20)(41,"div",21),e._uU(42),e.ALo(43,"transloco"),e.qZA()(),e.TgZ(44,"div",7)(45,"div",8)(46,"cm-input",22),e.NdJ("modelChange",function(s){return n.searchTerm=s})("modelChange",function(){return n.filterCustomers(n.searchTerm)}),e.qZA()(),e._UZ(47,"div",8)(48,"div",8),e.TgZ(49,"div",23),e.YNc(50,Je,4,3,"button",24),e.qZA()(),e.TgZ(51,"div")(52,"nz-table",25,26)(54,"thead")(55,"tr"),e._UZ(56,"th"),e.TgZ(57,"th",27),e._uU(58),e.ALo(59,"transloco"),e.qZA(),e.TgZ(60,"th"),e._uU(61),e.ALo(62,"transloco"),e.qZA(),e.TgZ(63,"th"),e._uU(64),e.ALo(65,"transloco"),e.qZA(),e.TgZ(66,"th"),e._uU(67),e.ALo(68,"transloco"),e.qZA(),e.TgZ(69,"th"),e._uU(70),e.ALo(71,"transloco"),e.qZA(),e.TgZ(72,"th"),e._uU(73),e.ALo(74,"transloco"),e.qZA(),e.TgZ(75,"th"),e._uU(76),e.ALo(77,"transloco"),e.qZA(),e.TgZ(78,"th"),e._uU(79),e.ALo(80,"transloco"),e.qZA(),e._UZ(81,"th"),e.qZA()(),e.TgZ(82,"tbody"),e.YNc(83,Qe,35,21,"tr",28),e.qZA()()()(),e.TgZ(84,"div",29)(85,"button",30),e.NdJ("click",function(){return n.onCancel()}),e._UZ(86,"label",31),e.qZA(),e.YNc(87,Re,2,2,"button",32),e.qZA()()()),2&t){const o=e.MAs(53);e.xp6(4),e.Q6J("svgIcon","heroicons_outline:x-mark"),e.xp6(5),e.Q6J("isRequired",!0)("actionEnum","view")("model",n.res.ticketCode)("label","vime.ticketCode")("isDisableLength",!0),e.xp6(2),e.Q6J("isRequired",!0)("actionEnum",n.actionEnum)("model",n.res.contactName)("label","vime.contactName")("isDisableLength",!0),e.xp6(3),e.Q6J("isRequired",!0)("actionEnum",n.actionEnum)("model",n.res.contactPhoneNumber)("label","vime.contactPhoneNumber")("isDisableLength",!0),e.xp6(2),e.Q6J("isRequired",!0)("actionEnum",n.actionEnum)("model",n.res.contactEmail)("label","vime.contactEmail")("isDisableLength",!0),e.xp6(4),e.Q6J("ngIf","view"==n.actionEnum),e.xp6(1),e.Q6J("ngIf","edit"==n.actionEnum),e.xp6(2),e.Q6J("ngIf",1===n.selectedOption),e.xp6(1),e.Q6J("ngIf",2===n.selectedOption),e.xp6(2),e.Q6J("label","vime.ticketType")("listData",n.ticketTypes)("actionEnum",n.actionEnum)("model",n.res.ticketTypeId)("isRequired",!0),e.xp6(3),e.Q6J("type","textarea")("actionEnum",n.actionEnum)("model",n.res.content)("label","vime.content")("isDisableLength",!0),e.xp6(3),e.Q6J("isRequired",!0)("type","datetimepicker")("actionEnum",n.actionEnum)("model",n.res.startDate)("label","vime.startTime")("isDisableLength",!0),e.xp6(2),e.Q6J("isRequired",!0)("type","datetimepicker")("actionEnum",n.actionEnum)("model",n.res.endDate)("label","vime.endTime")("isDisableLength",!0),e.xp6(3),e.Q6J("type","multiple")("actionEnum",n.actionEnum)("listData",n.accessGroup)("isRequired",!0)("model",n.res.areaIds),e.xp6(1),e.Q6J("ngIf",n.res.cancelReason),e.xp6(4),e.hij(" ",e.lcZ(43,72,"nav.customers")," "),e.xp6(4),e.Q6J("model",n.searchTerm)("label","vime.filterCustomer")("placeholder","placeholder.enterNameOrCitizenNumber")("isDisableLength",!0),e.xp6(4),e.Q6J("ngIf","view"!=n.actionEnum),e.xp6(2),e.Q6J("nzLoading",n.isLoading)("nzData",n.res.ticketCustomers),e.xp6(6),e.Oqu(e.lcZ(59,74,"master.no")),e.xp6(3),e.Oqu(e.lcZ(62,76,"master.fullName")),e.xp6(3),e.Oqu(e.lcZ(65,78,"vime.citizenNumber")),e.xp6(3),e.Oqu(e.lcZ(68,80,"master.phoneNumber")),e.xp6(3),e.Oqu(e.lcZ(71,82,"master.email")),e.xp6(3),e.Oqu(e.lcZ(74,84,"vime.timeCome")),e.xp6(3),e.Oqu(e.lcZ(77,86,"vime.timeOut")),e.xp6(3),e.Oqu(e.lcZ(80,88,"workOrder.status")),e.xp6(4),e.Q6J("ngForOf",o.data),e.xp6(3),e.Q6J("transloco","close"),e.xp6(1),e.Q6J("ngIf","edit"==n.actionEnum)}},dependencies:[u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,u.UX,g.lW,g.RK,A.Hw,_.JJ,_.On,h.KI,r.mk,r.sg,r.O5,r.PC,Y.f,J.W,v.VK,v.OP,v.p6,U.VQ,U.U0,h.Ot,r.uU],encapsulation:2}),i})(),Fe=(()=>{class i{constructor(t,n,o,s,l,x){this._ticketService=t,this._dialog=n,this._translocoService=o,this._fuseConfirmationService=s,this.dialogRef=l,this.data=x,this._unsubscribeAll$=new Z.x,this.res={ticketId:null,ticketCode:null,contactName:null,contactPhoneNumber:null,contactEmail:null,isCompany:!1,isApartment:!1,companyId:null,apartmentId:null,ticketTypeId:null,content:null,startDate:null,endDate:null,statusId:null,ticketCustomers:[],areaIds:null,cancelReason:null},x.res&&(this.res=x.res,this.res.statusId="CANCELED")}ngOnInit(){}onCancel(){(0,f.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(t=>{"confirmed"==t&&this.dialogRef.close(!0)})}onSave(){this.isLoading=!0,this._ticketService.update(this.res.ticketId,this.res).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(t=>(0,T._)(()=>t)),(0,b.x)(()=>this.isLoading=!1)).subscribe(({data:t})=>{(0,f.aB)(this._fuseConfirmationService,"message.savedDataSuccessfully"),this._dialog.open(S,{disableClose:!0,data:{ticketId:t.ticketId,actionEnum:"view"}}).afterClosed().subscribe(o=>{this.dialogRef.close(!0)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.w),e.Y36(d.uw),e.Y36(h.Vn),e.Y36(N.R),e.Y36(d.so),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ticket-disapprove"]],decls:14,vars:8,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","md:min-w-160","lg:min-w-360","max-h-200","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","vime.cancelReason",1,"text-lg","font-medium","text-white"],["mat-icon-button","",3,"click"],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-90","px-6","pt-6","pb-3","sm:p-8","space-y-6","overflow-y-auto","bg-slate-100"],[1,"w-full","max-w-360","mx-auto","bg-card","rounded-md","shadow","p-6","space-y-6"],[1,"flex-1"],[3,"type","model","label","isDisableLength","modelChange"],[1,"flex","flex-row","justify-end"],["mat-flat-button","","color","white",1,"w-min","mx-2","border","hover:bg-slate-200",3,"click"],[3,"transloco"],["mat-flat-button","","color","primary",1,"w-min",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.onCancel()}),e._UZ(4,"mat-icon",4),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"cm-input",8),e.NdJ("modelChange",function(s){return n.res.cancelReason=s}),e.qZA()()(),e.TgZ(9,"div",9)(10,"button",10),e.NdJ("click",function(){return n.onCancel()}),e._UZ(11,"label",11),e.qZA(),e.TgZ(12,"button",12),e.NdJ("click",function(){return n.onSave()}),e._UZ(13,"label",11),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("svgIcon","heroicons_outline:x-mark"),e.xp6(4),e.Q6J("type","textarea")("model",n.res.cancelReason)("label","vime.cancelReason")("isDisableLength",!0),e.xp6(3),e.Q6J("transloco","close"),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(1),e.Q6J("transloco","save"))},dependencies:[g.lW,g.RK,A.Hw,h.KI,J.W],encapsulation:2}),i})();function Me(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.clickDetail(o.ticketId,"edit"))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"transloco"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"edit")," "))}function Pe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onClickTicketApproval(o.ticketId,o))}),e._UZ(1,"mat-icon",33),e._uU(2),e.ALo(3,"transloco"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.isLoading),e.xp6(2),e.hij(" ",e.lcZ(3,2,"vime.approve")," ")}}function Ye(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onClickDisapprove(o))}),e._UZ(1,"mat-icon",34),e._uU(2),e.ALo(3,"transloco"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"vime.disapprove")," "))}const Ke=function(i){return{"background-color":i}};function $e(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr",21),e.NdJ("dblclick",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.clickDetail(s.ticketId,"view"))}),e.TgZ(1,"td")(2,"span",22)(3,"button",23)(4,"mat-icon"),e._uU(5," more_vert "),e.qZA(),e.TgZ(6,"mat-menu",null,24),e.ynx(8),e.TgZ(9,"button",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.clickDetail(s.ticketId,"view"))}),e._UZ(10,"mat-icon",26),e._uU(11),e.ALo(12,"transloco"),e.qZA(),e.YNc(13,Me,5,3,"button",27),e.YNc(14,Pe,4,4,"button",28),e.YNc(15,Ye,4,3,"button",27),e.BQk(),e.qZA()()()(),e.TgZ(16,"td")(17,"div",29),e._uU(18),e.qZA()(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.ALo(35,"date"),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"date"),e.qZA(),e.TgZ(39,"td")(40,"div",30),e._UZ(41,"div",31),e.TgZ(42,"span"),e._uU(43),e.ALo(44,"transloco"),e.qZA()()()()}if(2&i){const t=c.$implicit,n=c.index,o=e.MAs(7);e.oxw();const s=e.MAs(25);e.xp6(3),e.Q6J("matMenuTriggerFor",o),e.xp6(8),e.hij(" ",e.lcZ(12,17,"view")," "),e.xp6(2),e.Q6J("ngIf","APPROVED"!=t.statusId&&"CANCELED"!=t.statusId),e.xp6(1),e.Q6J("ngIf","APPROVED"!=t.statusId&&"CANCELED"!=t.statusId),e.xp6(1),e.Q6J("ngIf","APPROVED"!=t.statusId&&"CANCELED"!=t.statusId),e.xp6(3),e.Oqu((s.nzPageIndex-1)*s.nzPageSize+n+1),e.xp6(2),e.Oqu(t.ticketCode),e.xp6(2),e.Oqu(t.companyName),e.xp6(2),e.Oqu(t.apartmentCode),e.xp6(2),e.Oqu(t.contactName),e.xp6(2),e.Oqu(t.contactPhoneNumber),e.xp6(2),e.Oqu(t.typeName),e.xp6(2),e.Oqu(t.content),e.xp6(2),e.Oqu(e.xi3(35,19,t.startDate,"HH:mm dd/MM/YY")),e.xp6(3),e.Oqu(e.xi3(38,22,t.endDate,"HH:mm dd/MM/YY")),e.xp6(4),e.Q6J("ngStyle",e.VKq(27,Ke,t.statusColor)),e.xp6(2),e.Oqu(e.lcZ(44,25,t.statusName))}}const je=[{path:"tickets",component:ae,children:[{path:"",component:(()=>{class i{constructor(t,n,o){this._ticketService=t,this._dialog=n,this._fuseConfirmationService=o,this._unsubscribeAll$=new Z.x,this.debounce$=new Z.x,this.filter={ticketCode:"",nameOrCitizenNumber:"",nameOrPhoneNumber:"",startDate:"",endDate:""},this.tickets=[],this.actionEnum="edit"}ngOnInit(){this.getData(),this.debounce$.pipe((0,le.b)(300),(0,m.R)(this._unsubscribeAll$)).subscribe(()=>{this.getData()})}getData(){this.isLoading=!0,this._ticketService.getAll(this.filter).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(t=>(this.isLoading=!1,(0,T._)(()=>t))),(0,b.x)(()=>this.isLoading=!1)).subscribe(({data:t})=>{this.tickets=t})}onChangeDate(){k()(this.filter.endDate)>k()(this.filter.startDate)&&(this.filter.startDate=k()(this.filter.startDate).toISOString(),this.filter.endDate=k()(this.filter.endDate).toISOString(),this.getData())}onSearch(){this.debounce$.next()}clickDetail(t,n="edit"){this._dialog.open(S,{disableClose:!0,data:{ticketId:t,actionEnum:n}})}onRefreshData(){this.filter={ticketCode:"",nameOrCitizenNumber:"",nameOrPhoneNumber:"",startDate:"",endDate:""},this.getData()}onClickDisapprove(t){this._dialog.open(Fe,{disableClose:!0,data:{res:t}}).afterClosed().subscribe(o=>{this.getData()})}onClickTicketApproval(t,n){this.isLoading=!0,this._ticketService.ticketApproval(t,n).pipe((0,m.R)(this._unsubscribeAll$),(0,C.K)(o=>(this.isLoading=!1,(0,T._)(()=>o))),(0,b.x)(()=>this.isLoading=!1)).subscribe(({data:o})=>{const s=this._dialog.open(S,{disableClose:!0,data:{ticketId:o.ticketId,actionEnum:"view"}});(0,f.Df)(this._fuseConfirmationService,"message.savedDataSuccessfully"),s.afterClosed().subscribe(l=>{this.getData()})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.w),e.Y36(d.uw),e.Y36(N.R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ticket-list"]],decls:66,vars:65,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-col"],[1,"flex","justify-between","items-center","bg-card","border-b","dark:bg-transparent","px-6","sm:py-5","md:px-8","gap-8"],[1,"leading-none","text-3xl","font-extrabold","tracking-tight"],[1,"space-x-4","flex","items-center"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","heroicons_outline:arrow-path",1,"text-slate-500"],[1,"bg-card","m-6","rounded-md","shadow"],[1,"p-6","space-y-6"],[1,"flex-col","flex","sm:flex-row","sm:justify-between"],[1,"flex","flex-col","w-full","h-full","space-y-6"],[1,"flex","gap-4"],["label","vime.ticketCode",1,"flex-1",3,"model","isDisableLength","placeholder","modelChange"],["label","vime.fullCustomer",1,"flex-1",3,"model","isDisableLength","placeholder","modelChange"],["label","vime.contactName",1,"flex-1",3,"model","isDisableLength","placeholder","modelChange"],["label","time",1,"flex-1",3,"callbackChange","start","end","type","isDisableLength","startChange","endChange"],[1,"border-b","w-full"],["nzShowSizeChanger","","nzBordered","true",3,"nzLoading","nzData"],["basicTable",""],["nzAlign","center","nzWidth","70px"],["class","hover:cursor-pointer",3,"dblclick",4,"ngFor","ngForOf"],[1,"hover:cursor-pointer",3,"dblclick"],[1,"items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["headerMenu",""],["mat-menu-item","",3,"click"],["svgIcon","heroicons_outline:eye"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],[1,"h-full","flex","justify-center","items-center"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","mr-2",3,"ngStyle"],["mat-menu-item","",3,"disabled","click"],["svgIcon","heroicons_outline:check-badge",1,"text-green-500"],["svgIcon","heroicons_outline:x-circle",1,"text-red-500"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"transloco"),e.qZA(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return n.onRefreshData()}),e.ALo(8,"transloco"),e._UZ(9,"mat-icon",6),e.qZA()()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"cm-input",12),e.NdJ("modelChange",function(s){return n.filter.ticketCode=s})("modelChange",function(){return n.onSearch()}),e.ALo(16,"transloco"),e.qZA(),e.TgZ(17,"cm-input",13),e.NdJ("modelChange",function(s){return n.filter.nameOrCitizenNumber=s})("modelChange",function(){return n.onSearch()}),e.ALo(18,"transloco"),e.qZA(),e.TgZ(19,"cm-input",14),e.NdJ("modelChange",function(s){return n.filter.nameOrPhoneNumber=s})("modelChange",function(){return n.onSearch()}),e.ALo(20,"transloco"),e.qZA(),e.TgZ(21,"cm-input",15),e.NdJ("startChange",function(s){return n.filter.startDate=s})("endChange",function(s){return n.filter.endDate=s}),e.qZA()(),e._UZ(22,"div",16),e.qZA()(),e.TgZ(23,"div")(24,"nz-table",17,18)(26,"thead")(27,"tr")(28,"th"),e._uU(29),e.ALo(30,"transloco"),e.qZA(),e.TgZ(31,"th",19),e._uU(32),e.ALo(33,"transloco"),e.qZA(),e.TgZ(34,"th"),e._uU(35),e.ALo(36,"transloco"),e.qZA(),e.TgZ(37,"th"),e._uU(38),e.ALo(39,"transloco"),e.qZA(),e.TgZ(40,"th"),e._uU(41),e.ALo(42,"transloco"),e.qZA(),e.TgZ(43,"th"),e._uU(44),e.ALo(45,"transloco"),e.qZA(),e.TgZ(46,"th"),e._uU(47),e.ALo(48,"transloco"),e.qZA(),e.TgZ(49,"th"),e._uU(50),e.ALo(51,"transloco"),e.qZA(),e.TgZ(52,"th"),e._uU(53),e.ALo(54,"transloco"),e.qZA(),e.TgZ(55,"th"),e._uU(56),e.ALo(57,"transloco"),e.qZA(),e.TgZ(58,"th"),e._uU(59),e.ALo(60,"transloco"),e.qZA(),e.TgZ(61,"th"),e._uU(62),e.ALo(63,"transloco"),e.qZA()()(),e.TgZ(64,"tbody"),e.YNc(65,$e,45,29,"tr",20),e.qZA()()()()()()),2&t){const o=e.MAs(25);e.xp6(4),e.hij("",e.lcZ(5,31,"vime.registerTicket")," "),e.xp6(3),e.s9C("matTooltip",e.lcZ(8,33,"com.refresh")),e.xp6(8),e.s9C("placeholder",e.lcZ(16,35,"placeholder.enterTicketCode")),e.Q6J("model",n.filter.ticketCode)("isDisableLength",!0),e.xp6(2),e.s9C("placeholder",e.lcZ(18,37,"placeholder.enterNameOrCitizenNumber")),e.Q6J("model",n.filter.nameOrCitizenNumber)("isDisableLength",!0),e.xp6(2),e.s9C("placeholder",e.lcZ(20,39,"placeholder.enterNameOrNumberPhone")),e.Q6J("model",n.filter.nameOrPhoneNumber)("isDisableLength",!0),e.xp6(2),e.Q6J("callbackChange",n.onChangeDate.bind(n))("start",n.filter.startDate)("end",n.filter.endDate)("type","daterangepicker")("isDisableLength",!0),e.xp6(3),e.Q6J("nzLoading",n.isLoading)("nzData",n.tickets),e.xp6(5),e.Oqu(e.lcZ(30,41,"master.function")),e.xp6(3),e.Oqu(e.lcZ(33,43,"master.no")),e.xp6(3),e.Oqu(e.lcZ(36,45,"vime.ticketCode")),e.xp6(3),e.Oqu(e.lcZ(39,47,"master.company")),e.xp6(3),e.Oqu(e.lcZ(42,49,"master.apartment")),e.xp6(3),e.Oqu(e.lcZ(45,51,"vime.contactName")),e.xp6(3),e.Oqu(e.lcZ(48,53,"vime.numberPhoneContact")),e.xp6(3),e.Oqu(e.lcZ(51,55,"nav.ticketType")),e.xp6(3),e.Oqu(e.lcZ(54,57,"vime.content")),e.xp6(3),e.Oqu(e.lcZ(57,59,"vime.startTime")),e.xp6(3),e.Oqu(e.lcZ(60,61,"vime.endTime")),e.xp6(3),e.Oqu(e.lcZ(63,63,"Status")),e.xp6(3),e.Q6J("ngForOf",o.data)}},dependencies:[u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,u.UX,g.RK,A.Hw,Q.gM,r.sg,r.O5,r.PC,J.W,v.VK,v.OP,v.p6,h.Ot,r.uU],encapsulation:2}),i})()}]}];(0,r.qS)(E.Z);const He={table:{nzBordered:!0,nzShowSizeChanger:!0,nzSize:"middle",nzShowQuickJumper:!0},image:{nzFallback:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-v52yldUi548vKbW8lSgCvEdj2pW4aMivFg&usqp=CAU"}};let Ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:W.d_,useValue:He},{provide:M.u7,useValue:M.iF}],imports:[R.Bz.forChild(je),O.lN,j.c,L.p9,u.HQ,g.ot,A.Ps,Q.AV,ne.vO,B.qw,_.u5,h.y4,ee.Gb,r.ez,H.rP,V.c,v.Tx,ie.cS,te.Qp,G.Nh,X.PV,se.F,U.Fk,oe.Tm,q.Ng,P.Co,z.LD,F.L]}),i})()}}]);