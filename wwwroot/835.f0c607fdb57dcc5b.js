"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[835],{58177:(tt,S,_)=>{_.d(S,{J:()=>b});var D=_(22223),h=_(3144);let b=(()=>{class w{constructor(M){this._httpClient=M}getAll(M){return this._httpClient.get("api/cards",{params:{...M}})}getById(M){return this._httpClient.get(`api/cards/${M}`)}create(M){return this._httpClient.post("api/cards",M)}update(M,y){return this._httpClient.put(`api/cards/${M}`,y)}block(M){return this._httpClient.patch(`api/cards/${M}/block`,{})}unblock(M){return this._httpClient.patch(`api/cards/${M}/unblock`,{})}getCardStatus(){return this._httpClient.get("api/cards/statuses")}getCardTypes(){return this._httpClient.get("api/cards/types")}checkCardAvailable(M){return this._httpClient.get(`api/cards/${M}/check`)}}return w.\u0275fac=function(M){return new(M||w)(D.LFG(h.eN))},w.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},11737:(tt,S,_)=>{_.d(S,{A:()=>O});var D=_(15861),h=_(77579),b=_(32076),w=_(62843),K=_(39646),M=_(82722),y=_(28746),j=_(63900),k=_(82004),v=_(22223),$=_(8551),G=_(58177),H=_(71683);const V=z=>{const U=z.toString(2);return U.padStart(8*Math.ceil(U.length/8),"0").match(/.{1,8}/g)};let O=(()=>{class z{constructor(I,B,R){this.modal=I,this._cardService=B,this._fuseConfirmationService=R,this.terminate$=new h.x,this._unsubscribeAll=new h.x,this.terminate$.subscribe(A=>{clearTimeout(this.timer);try{this.reader&&this.reader.releaseLock()}catch(T){console.error(T)}})}readCard$(I=!1,B=!1,R=!1){return B||(this.modalRef=this.modal.info({nzTitle:"\u0110ang qu\xe9t th\u1ebb",nzContent:"Vui l\xf2ng qu\xe9t th\u1ebb t\u1ea1i \u0111\u1ea7u \u0111\u1ecdc",nzCentered:!0,nzCloseOnNavigation:!0,nzCancelDisabled:!0,nzOkDisabled:!0,nzClosable:!1})),(0,b.D)(this.readCard(I,R)).pipe((0,M.R)(this.terminate$),(0,y.x)(()=>{this.modalRef.close()}),(0,j.w)(A=>{if("error"===A)throw(0,w._)("error");return(0,K.of)(A)}))}readCard(I,B){var R=this;return(0,D.Z)(function*(){let A="";if(R.port||(R.port=yield navigator.serial.requestPort(),yield R.port.open({baudRate:9600})),I)return"";R.reader=R.port.readable.getReader(),R.timer=setTimeout(()=>{try{R.reader.releaseLock()}catch{(0,k.WD)(R._fuseConfirmationService,"error.scanTimeExceeded","error.scanTimeExceededMessage"),R.modalRef.close()}},1e4);let x="\x02",Z=new TextDecoder;for(;;){const X=(yield R.reader.read()).value;if(A.includes(x)&&A.includes("\x03")){R.reader.releaseLock();let L=A.substring(A.indexOf(x)+1,A.indexOf("\x03")).replace(/^0+/,"");if(-1!==L.indexOf(x)||-1!==L.indexOf("\x03"))return"error";let Q=V(Number.parseInt(L)).map(q=>q.split("").reverse().join("")).join("").split(null).reverse().join("");return parseInt(Q.split("").reverse().join(""),2).toString().replace(/^0+/,"")}A+=Z.decode(X),0!==A.indexOf(x)&&(A="")}})()}}return z.\u0275fac=function(I){return new(I||z)(v.LFG($.Sf),v.LFG(G.J),v.LFG(H.R))},z.\u0275prov=v.Yz7({token:z,factory:z.\u0275fac,providedIn:"any"}),z})()},43042:(tt,S,_)=>{_.d(S,{D:()=>et,x:()=>q});var D=_(44755),h=_(22223),b=_(77579),w=_(82722),K=_(22497),M=_(76681),y=_(54259),j=_(2242),k=_(23697);const v=["canvas"];function $(s,u){1&s&&h._UZ(0,"nz-spin")}function G(s,u){if(1&s){const a=h.EpF();h.TgZ(0,"div")(1,"p",3),h._uU(2),h.qZA(),h.TgZ(3,"button",4),h.NdJ("click",function(){h.CHM(a);const E=h.oxw(2);return h.KtG(E.reloadQRCode())}),h._UZ(4,"span",5),h.TgZ(5,"span"),h._uU(6),h.qZA()()()}if(2&s){const a=h.oxw(2);h.xp6(2),h.Oqu(a.locale.expired),h.xp6(4),h.Oqu(a.locale.refresh)}}function H(s,u){if(1&s&&(h.TgZ(0,"div",2),h.YNc(1,$,1,0,"nz-spin",1),h.YNc(2,G,7,2,"div",1),h.qZA()),2&s){const a=h.oxw();h.xp6(1),h.Q6J("ngIf","loading"===a.nzStatus),h.xp6(1),h.Q6J("ngIf","expired"===a.nzStatus)}}function V(s,u){1&s&&(h.ynx(0),h._UZ(1,"canvas",null,6),h.BQk())}var O,s;(function(s){let u=(()=>{class o{static encodeText(t,e){const n=s.QrSegment.makeSegments(t);return o.encodeSegments(n,e)}static encodeBinary(t,e){const n=s.QrSegment.makeBytes(t);return o.encodeSegments([n],e)}static encodeSegments(t,e,n=1,i=40,r=-1,d=!0){if(!(o.MIN_VERSION<=n&&n<=i&&i<=o.MAX_VERSION)||r<-1||r>7)throw new RangeError("Invalid value");let c,C;for(c=n;;c++){const m=8*o.getNumDataCodewords(c,e),P=p.getTotalBits(t,c);if(P<=m){C=P;break}if(c>=i)throw new RangeError("Data too long")}for(const m of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])d&&C<=8*o.getNumDataCodewords(c,m)&&(e=m);let f=[];for(const m of t){a(m.mode.modeBits,4,f),a(m.numChars,m.mode.numCharCountBits(c),f);for(const P of m.getData())f.push(P)}E(f.length==C);const W=8*o.getNumDataCodewords(c,e);E(f.length<=W),a(0,Math.min(4,W-f.length),f),a(0,(8-f.length%8)%8,f),E(f.length%8==0);for(let m=236;f.length<W;m^=253)a(m,8,f);let N=[];for(;8*N.length<f.length;)N.push(0);return f.forEach((m,P)=>N[P>>>3]|=m<<7-(7&P)),new o(c,e,N,r)}constructor(t,e,n,i){if(this.version=t,this.errorCorrectionLevel=e,this.modules=[],this.isFunction=[],t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*t+17;let r=[];for(let c=0;c<this.size;c++)r.push(!1);for(let c=0;c<this.size;c++)this.modules.push(r.slice()),this.isFunction.push(r.slice());this.drawFunctionPatterns();const d=this.addEccAndInterleave(n);if(this.drawCodewords(d),-1==i){let c=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const f=this.getPenaltyScore();f<c&&(i=C,c=f),this.applyMask(C)}}E(i>=0&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}getModule(t,e){return t>=0&&t<this.size&&e>=0&&e<this.size&&this.modules[e][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),e=t.length;for(let n=0;n<e;n++)for(let i=0;i<e;i++)0==n&&0==i||0==n&&i==e-1||n==e-1&&0==i||this.drawAlignmentPattern(t[n],t[i]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const e=this.errorCorrectionLevel.formatBits<<3|t;let n=e;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const i=21522^(e<<10|n);E(i>>>15==0);for(let r=0;r<=5;r++)this.setFunctionModule(8,r,l(i,r));this.setFunctionModule(8,7,l(i,6)),this.setFunctionModule(8,8,l(i,7)),this.setFunctionModule(7,8,l(i,8));for(let r=9;r<15;r++)this.setFunctionModule(14-r,8,l(i,r));for(let r=0;r<8;r++)this.setFunctionModule(this.size-1-r,8,l(i,r));for(let r=8;r<15;r++)this.setFunctionModule(8,this.size-15+r,l(i,r));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let n=0;n<12;n++)t=t<<1^7973*(t>>>11);const e=this.version<<12|t;E(e>>>18==0);for(let n=0;n<18;n++){const i=l(e,n),r=this.size-11+n%3,d=Math.floor(n/3);this.setFunctionModule(r,d,i),this.setFunctionModule(d,r,i)}}drawFinderPattern(t,e){for(let n=-4;n<=4;n++)for(let i=-4;i<=4;i++){const r=Math.max(Math.abs(i),Math.abs(n)),d=t+i,c=e+n;d>=0&&d<this.size&&c>=0&&c<this.size&&this.setFunctionModule(d,c,2!=r&&4!=r)}}drawAlignmentPattern(t,e){for(let n=-2;n<=2;n++)for(let i=-2;i<=2;i++)this.setFunctionModule(t+i,e+n,1!=Math.max(Math.abs(i),Math.abs(n)))}setFunctionModule(t,e,n){this.modules[e][t]=n,this.isFunction[e][t]=!0}addEccAndInterleave(t){const e=this.version,n=this.errorCorrectionLevel;if(t.length!=o.getNumDataCodewords(e,n))throw new RangeError("Invalid argument");const i=o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e],r=o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e],d=Math.floor(o.getNumRawDataModules(e)/8),c=i-d%i,C=Math.floor(d/i);let f=[];const W=o.reedSolomonComputeDivisor(r);for(let m=0,P=0;m<i;m++){let F=t.slice(P,P+C-r+(m<c?0:1));P+=F.length;const nt=o.reedSolomonComputeRemainder(F,W);m<c&&F.push(0),f.push(F.concat(nt))}let N=[];for(let m=0;m<f[0].length;m++)f.forEach((P,F)=>{(m!=C-r||F>=c)&&N.push(P[m])});return E(N.length==d),N}drawCodewords(t){if(t.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let e=0;for(let n=this.size-1;n>=1;n-=2){6==n&&(n=5);for(let i=0;i<this.size;i++)for(let r=0;r<2;r++){const d=n-r,C=0==(n+1&2)?this.size-1-i:i;!this.isFunction[C][d]&&e<8*t.length&&(this.modules[C][d]=l(t[e>>>3],7-(7&e)),e++)}}E(e==8*t.length)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let e=0;e<this.size;e++)for(let n=0;n<this.size;n++){let i;switch(t){case 0:i=(n+e)%2==0;break;case 1:i=e%2==0;break;case 2:i=n%3==0;break;case 3:i=(n+e)%3==0;break;case 4:i=(Math.floor(n/3)+Math.floor(e/2))%2==0;break;case 5:i=n*e%2+n*e%3==0;break;case 6:i=(n*e%2+n*e%3)%2==0;break;case 7:i=((n+e)%2+n*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][n]&&i&&(this.modules[e][n]=!this.modules[e][n])}}getPenaltyScore(){let t=0;for(let r=0;r<this.size;r++){let d=!1,c=0,C=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[r][f]==d?(c++,5==c?t+=o.PENALTY_N1:c>5&&t++):(this.finderPenaltyAddHistory(c,C),d||(t+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),d=this.modules[r][f],c=1);t+=this.finderPenaltyTerminateAndCount(d,c,C)*o.PENALTY_N3}for(let r=0;r<this.size;r++){let d=!1,c=0,C=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[f][r]==d?(c++,5==c?t+=o.PENALTY_N1:c>5&&t++):(this.finderPenaltyAddHistory(c,C),d||(t+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),d=this.modules[f][r],c=1);t+=this.finderPenaltyTerminateAndCount(d,c,C)*o.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let d=0;d<this.size-1;d++){const c=this.modules[r][d];c==this.modules[r][d+1]&&c==this.modules[r+1][d]&&c==this.modules[r+1][d+1]&&(t+=o.PENALTY_N2)}let e=0;for(const r of this.modules)e=r.reduce((d,c)=>d+(c?1:0),e);const n=this.size*this.size,i=Math.ceil(Math.abs(20*e-10*n)/n)-1;return E(i>=0&&i<=9),t+=i*o.PENALTY_N4,E(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(1==this.version)return[];{const t=Math.floor(this.version/7)+2,e=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*t-2));let n=[6];for(let i=this.size-7;n.length<t;i-=e)n.splice(1,0,i);return n}}static getNumRawDataModules(t){if(t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version number out of range");let e=(16*t+128)*t+64;if(t>=2){const n=Math.floor(t/7)+2;e-=(25*n-10)*n-55,t>=7&&(e-=36)}return E(e>=208&&e<=29648),e}static getNumDataCodewords(t,e){return Math.floor(o.getNumRawDataModules(t)/8)-o.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*o.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let e=[];for(let i=0;i<t-1;i++)e.push(0);e.push(1);let n=1;for(let i=0;i<t;i++){for(let r=0;r<e.length;r++)e[r]=o.reedSolomonMultiply(e[r],n),r+1<e.length&&(e[r]^=e[r+1]);n=o.reedSolomonMultiply(n,2)}return e}static reedSolomonComputeRemainder(t,e){let n=e.map(i=>0);for(const i of t){const r=i^n.shift();n.push(0),e.forEach((d,c)=>n[c]^=o.reedSolomonMultiply(d,r))}return n}static reedSolomonMultiply(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");let n=0;for(let i=7;i>=0;i--)n=n<<1^285*(n>>>7),n^=(e>>>i&1)*t;return E(n>>>8==0),n}finderPenaltyCountPatterns(t){const e=t[1];E(e<=3*this.size);const n=e>0&&t[2]==e&&t[3]==3*e&&t[4]==e&&t[5]==e;return(n&&t[0]>=4*e&&t[6]>=e?1:0)+(n&&t[6]>=4*e&&t[0]>=e?1:0)}finderPenaltyTerminateAndCount(t,e,n){return t&&(this.finderPenaltyAddHistory(e,n),e=0),this.finderPenaltyAddHistory(e+=this.size,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(t,e){0==e[0]&&(t+=this.size),e.pop(),e.unshift(t)}}return o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o})();function a(o,g,t){if(g<0||g>31||o>>>g)throw new RangeError("Value out of range");for(let e=g-1;e>=0;e--)t.push(o>>>e&1)}function l(o,g){return 0!=(o>>>g&1)}function E(o){if(!o)throw new Error("Assertion error")}s.QrCode=u;let p=(()=>{class o{static makeBytes(t){let e=[];for(const n of t)a(n,8,e);return new o(o.Mode.BYTE,t.length,e)}static makeNumeric(t){if(!o.isNumeric(t))throw new RangeError("String contains non-numeric characters");let e=[];for(let n=0;n<t.length;){const i=Math.min(t.length-n,3);a(parseInt(t.substring(n,n+i),10),3*i+1,e),n+=i}return new o(o.Mode.NUMERIC,t.length,e)}static makeAlphanumeric(t){if(!o.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n,e=[];for(n=0;n+2<=t.length;n+=2){let i=45*o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));i+=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),a(i,11,e)}return n<t.length&&a(o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,e),new o(o.Mode.ALPHANUMERIC,t.length,e)}static makeSegments(t){return""==t?[]:o.isNumeric(t)?[o.makeNumeric(t)]:o.isAlphanumeric(t)?[o.makeAlphanumeric(t)]:[o.makeBytes(o.toUtf8ByteArray(t))]}static makeEci(t){let e=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)a(t,8,e);else if(t<16384)a(2,2,e),a(t,14,e);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");a(6,3,e),a(t,21,e)}return new o(o.Mode.ECI,0,e)}static isNumeric(t){return o.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return o.ALPHANUMERIC_REGEX.test(t)}constructor(t,e,n){if(this.mode=t,this.numChars=e,this.bitData=n,e<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,e){let n=0;for(const i of t){const r=i.mode.numCharCountBits(e);if(i.numChars>=1<<r)return 1/0;n+=4+r+i.bitData.length}return n}static toUtf8ByteArray(t){t=encodeURI(t);let e=[];for(let n=0;n<t.length;n++)"%"!=t.charAt(n)?e.push(t.charCodeAt(n)):(e.push(parseInt(t.substring(n+1,n+3),16)),n+=2);return e}}return o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o})();s.QrSegment=p})(O||(O={})),function(a){class l{constructor(p,o){this.ordinal=p,this.formatBits=o}}l.LOW=new l(0,1),l.MEDIUM=new l(1,0),l.QUARTILE=new l(2,3),l.HIGH=new l(3,2),a.Ecc=l}((s=O||(O={})).QrCode||(s.QrCode={})),function(s){!function(a){class l{constructor(p,o){this.modeBits=p,this.numBitsCharCount=o}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}}l.NUMERIC=new l(1,[10,12,14]),l.ALPHANUMERIC=new l(2,[9,11,13]),l.BYTE=new l(4,[8,16,16]),l.KANJI=new l(8,[8,10,12]),l.ECI=new l(7,[0,0,0]),a.Mode=l}(s.QrSegment||(s.QrSegment={}))}(O||(O={}));var z=O;const U={L:z.QrCode.Ecc.LOW,M:z.QrCode.Ecc.MEDIUM,Q:z.QrCode.Ecc.QUARTILE,H:z.QrCode.Ecc.HIGH};function L(s,u,a,l,E,p){for(let o=0;o<u.size;o++)for(let g=0;g<u.size;g++)s.fillStyle=u.getModule(g,o)?p:E,s.fillRect(l[3]+g*a,l[0]+o*a,a,a)}function Y(s,u,a,l,E){for(let p=0;p<a;p++)for(let o=0;o<u;o++)s.fillStyle=E,s.fillRect(o*l,p*l,l,l)}let et=(()=>{class s{constructor(a,l,E,p){this.i18n=a,this.el=l,this.cdr=E,this.platformId=p,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new h.vpe,this.isBrowser=!0,this.destroy$=new b.x,this.isBrowser=(0,D.NF)(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe((0,w.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(a){const{nzValue:l,nzIcon:E,nzLevel:p,nzSize:o,nzIconSize:g,nzColor:t,nzPadding:e,nzBgColor:n}=a;(l||E||p||o||g||t||e||n)&&this.canvas&&this.drawCanvasQRCode(),n&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&function J(s,u,a=160,l=10,E=10,p="#000000",o="#FFFFFF",g=40,t){const e=s.getContext("2d"),n=function Q(s){return Array.isArray(s)?Array(4).fill(0).map((u,a)=>s[a%s.length]):[s,s,s,s]}(E);if(s.style.width=`${a}px`,s.style.height=`${a}px`,!u)return e.fillStyle="rgba(0, 0, 0, 0)",void e.fillRect(0,0,s.width,s.height);if(s.width=u.size*l+n[1]+n[3],s.height=u.size*l+n[0]+n[2],t){const i=new Image;i.src=t,i.crossOrigin="anonymous",i.width=g*(s.width/a),i.height=g*(s.width/a),i.onload=()=>{Y(e,s.width,s.height,l,o),L(e,u,l,n,o,p);const r=s.width/2-g*(s.width/a)/2;e.fillRect(r,r,g*(s.width/a),g*(s.width/a)),e.drawImage(i,r,r,g*(s.width/a),g*(s.width/a))},i.onerror=()=>{Y(e,s.width,s.height,l,o),L(e,u,l,n,o,p)}}else Y(e,s.width,s.height,l,o),L(e,u,l,n,o,p)}(this.canvas.nativeElement,((s,u="M")=>s?z.QrCode.encodeText(s,U[u]):null)(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return s.\u0275fac=function(a){return new(a||s)(h.Y36(K.wi),h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(h.Lbi))},s.\u0275cmp=h.Xpm({type:s,selectors:[["nz-qrcode"]],viewQuery:function(a,l){if(1&a&&h.Gf(v,5),2&a){let E;h.iGM(E=h.CRH())&&(l.canvas=E.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(a,l){2&a&&h.ekj("ant-qrcode-border",l.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:"nzSize",nzIcon:"nzIcon",nzIconSize:"nzIconSize",nzBordered:"nzBordered",nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[h.TTD],decls:2,vars:2,consts:[["class","ant-qrcode-mask",4,"ngIf"],[4,"ngIf"],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["canvas",""]],template:function(a,l){1&a&&(h.YNc(0,H,3,2,"div",0),h.YNc(1,V,3,0,"ng-container",1)),2&a&&(h.Q6J("ngIf","active"!==l.nzStatus),h.xp6(1),h.Q6J("ngIf",l.isBrowser))},dependencies:[M.W,D.O5,y.ix,j.w,k.Ls],encapsulation:2,changeDetection:0}),s})(),q=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[M.j,D.ez,y.sL,k.PV]}),s})()}}]);