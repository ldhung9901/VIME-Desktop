"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[502],{97502:(ve,V,a)=>{a.r(V),a.d(V,{AdminModule:()=>xe});var p=a(44755),rt=a(33770),t=a(22223),d=a(39401),v=a(51728),dt=a(86012),mt=a(11292),N=a(1217),T=a(98280),w=a(25580),ut=a(87870),m=a(99114),I=a(430),J=a(69609),Q=a(17406),X=a(68467),pt=a(44867),gt=a(50787),R=a(62214),O=a(50877),ht=a(13617),S=a(83649),b=a(31531),g=a(30430),k=a(86380),ft=a(16243),_t=a(15276),xt=a(73496),tt=a(22497),vt=a(23697),P=a(74050),r=a(58016),Ct=a(76238),Zt=a(33231),bt=a(74473),et=a(61717),nt=a(81981),Tt=a(39102),At=a(15439),M=a.n(At),h=a(82004),A=a(77579),it=a(78372),C=a(82722),ot=a(54968),f=a(63900),Y=a(39646),st=a(70262),H=a(62843),at=a(54244),yt=a(12017),z=a(96119),q=a(71683),ct=a(29061),Ut=a(20054),lt=a(87016),D=a(92369),wt=a(32202),It=a(90504);const Jt=["uploadImage"];function Mt(o,c){1&o&&t._UZ(0,"div",20)}function St(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",21)(1,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(4);return t.KtG(i.click())}),t.qZA(),t.TgZ(2,"mat-icon",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onRemoveImage())}),t.qZA(),t._UZ(3,"input",24,25),t.qZA()}}function qt(o,c){1&o&&t._UZ(0,"span",30)}function Nt(o,c){1&o&&t._UZ(0,"mat-progress-spinner",31),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}function Qt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",26)(1,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveTenant())}),t.YNc(2,qt,1,0,"span",28),t.YNc(3,Nt,1,2,"mat-progress-spinner",29),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.isTenantFormDisable),t.xp6(1),t.Q6J("ngIf",!e.isTenantFormDisable),t.xp6(1),t.Q6J("ngIf",e.isTenantFormDisable)}}function kt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43)(2,"div",44)(3,"div",45)(4,"mat-form-field",46),t._UZ(5,"mat-icon",47),t.TgZ(6,"input",48),t.NdJ("keyup.enter",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addMember())})("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.email=i)}),t.qZA(),t.TgZ(7,"button",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addMember())}),t._UZ(8,"mat-icon",50),t.qZA()()(),t._UZ(9,"div",45),t.qZA(),t._UZ(10,"div",51),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("floatLabel","always"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("ngModel",e.email)("placeholder","Email"),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:plus-circle")}}function zt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",57)(1,"div",58)(2,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.deleteMember(i.userId))}),t._UZ(3,"mat-icon",60),t.qZA()()()}2&o&&(t.xp6(3),t.Q6J("svgIcon","heroicons_outline:trash"))}function Dt(o,c){if(1&o&&(t.TgZ(0,"tr"),t.ynx(1),t.TgZ(2,"td",52),t._uU(3),t.qZA(),t.TgZ(4,"td",52)(5,"span",53),t._UZ(6,"nz-avatar",54),t.qZA()(),t.TgZ(7,"td",55),t._uU(8),t.qZA(),t.TgZ(9,"td",55),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.YNc(12,zt,4,1,"div",56),t.qZA(),t.BQk(),t.qZA()),2&o){const e=c.$implicit,n=c.index;t.oxw();const i=t.MAs(4),s=t.oxw();t.xp6(3),t.hij(" ",(i.nzPageIndex-1)*i.nzPageSize+n+1," "),t.xp6(3),t.Q6J("nzSrc","https://localhost:5001"+e.tenantImageUrl),t.xp6(1),t.Q6J("matTooltip",e.tenantUserName),t.xp6(1),t.hij(" ",e.tenantUserName," "),t.xp6(1),t.Q6J("matTooltip",e.tenantEmail),t.xp6(1),t.hij(" ",e.tenantEmail," "),t.xp6(2),t.Q6J("ngIf","view"!==s.actionEnum)}}function Lt(o,c){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,kt,11,5,"div",33),t.TgZ(2,"div",34)(3,"nz-table",35,36)(5,"thead")(6,"tr"),t._UZ(7,"th",37),t.TgZ(8,"th",38),t._uU(9),t.ALo(10,"transloco"),t.qZA(),t.TgZ(11,"th",39),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"th",39),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t._UZ(17,"th",40),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,Dt,13,7,"tr",41),t.qZA()()()()),2&o){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngIf","view"!==n.actionEnum),t.xp6(2),t.Q6J("nzData",n.req.tenantUsers)("nzLoading",n.isLoading),t.xp6(5),t.Q6J("nzAlign","center"),t.xp6(1),t.hij(" ",t.lcZ(10,8,"master.image")," "),t.xp6(3),t.hij(" ",t.lcZ(13,10,"vime.userName")," "),t.xp6(3),t.hij(" ",t.lcZ(16,12,"system.email")," "),t.xp6(4),t.Q6J("ngForOf",e.data)}}let K=(()=>{class o extends yt.Y{constructor(e,n,i,s,l,u,_,U,B,E){super(n,e,_),this.fuseConfirmationService=e,this.translocoService=n,this._tenantService=i,this._currentTenantService=s,this._workspaceService=l,this._uploadService=u,this.dialogRef=_,this._notification=U,this._matDialog=B,this.actionEnum="new",this.req={id:null,name:null,adminEmail:null,logo:null,storageQuota:0,maxUser:0,validUpTo:M()().add(1,"months").toISOString(),description:null,tenantUsers:[]},this.initReq=this.req,this.isTenantFormDisable=!1,this.isLoading=!1,this.oldDate=null,this.members=[],this._unSubscribeAll=new A.x,E&&(this.actionEnum=E.actionEnum,E.tenant&&(this.req=E.tenant))}ngOnDestroy(){this._unSubscribeAll.next(null),this._unSubscribeAll.complete()}ngOnInit(){this.initValue(),this.resetTenant(),this.oldDate=this.initReq.validUpTo}saveTenant(){return this.isTenantFormDisable=!0,this.isLoading=!0,(0,z.vV)(this.req.adminEmail)?(0,z.TF)(this.req.id)||(0,z.TF)(this.req.name)?(this._notification.warning(this.translocoService.translate("warning"),this.translocoService.translate("message.mustInputRequired"),{nzDuration:2e3}),this.isTenantFormDisable=!1,void(this.isLoading=!1)):M()(this.req.validUpTo).isBefore(M()())?(this._notification.warning(this.translocoService.translate("warning"),this.translocoService.translate("message.validAfterCurrentDate"),{nzDuration:2e3}),this.isTenantFormDisable=!1,void(this.isLoading=!1)):("new"==this.actionEnum&&(this.req.id=(o=>this.req.id.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase())(),this._tenantService.create(this.req).subscribe(({})=>{this.isTenantFormDisable=!1,this.isLoading=!1,this.closePopup(!0)},({})=>{this.isTenantFormDisable=!1,this.isLoading=!1})),void("edit"==this.actionEnum&&this._tenantService.update(this.req.id,this.req).subscribe(({})=>{this.isTenantFormDisable=!1,this.isLoading=!1,this.closePopup(!0)},({})=>{this.isTenantFormDisable=!1,this.isLoading=!1}))):(this._notification.warning(this.translocoService.translate("warning"),this.translocoService.translate("message.emailInvalid"),{nzDuration:2e3}),this.isTenantFormDisable=!1,void(this.isLoading=!1))}ngAfterViewInit(){this.uploadImageElement&&(0,ot.R)(this.uploadImageElement.nativeElement,"input").pipe((0,C.R)(this._unSubscribeAll),(0,f.w)(e=>{const i=e.target.files;return i.length?this._uploadService.upLoadFile(i[0]).pipe((0,st.K)(l=>(0,H._)(()=>l))):(0,Y.of)()}),(0,at.n)(e=>!e)).subscribe(({data:e})=>{this.req.logo=e})}initValue(){this.initReq=this.req}resetInput(){this.req=this.initReq}onRemoveImage(){var e=this.req.logo.split("/")[3];this._uploadService.deleteFile(e).subscribe(n=>{}),this.req.logo=null}addMember(){this._workspaceService.addMember(this.req.id,this.email).subscribe(e=>{(0,z.vV)(this.email)?e?(this.email=null,this._workspaceService.getMembers(this.req.id).subscribe(n=>this.members=n.data),this.resetTenant()):this._notification.warning(this.translocoService.translate("warning"),this.translocoService.translate("message.userEmailNotExist"),{nzDuration:2e3}):this._notification.warning(this.translocoService.translate("warning"),this.translocoService.translate("message.emailInvalid"),{nzDuration:2e3})})}deleteMember(e){(0,h.WD)(this.fuseConfirmationService).afterClosed().subscribe(n=>{"confirmed"===n&&this._workspaceService.deleteMember(this.req.id,e).subscribe(i=>{this._workspaceService.getMembers(this.req.id).subscribe(s=>this.members=s.data),this.resetTenant()})})}resetTenant(){this.req.id&&this._tenantService.get(this.req.id).pipe((0,C.R)(this._unSubscribeAll)).subscribe(e=>{this.req.tenantUsers=e.data.tenantUsers})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q.R),t.Y36(g.Vn),t.Y36(ct.a),t.Y36(Ut.g),t.Y36(lt.A),t.Y36(D.C),t.Y36(w.so),t.Y36(wt.zb),t.Y36(w.uw),t.Y36(w.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["tenant-popup"]],viewQuery:function(e,n){if(1&e&&t.Gf(Jt,5),2&e){let i;t.iGM(i=t.CRH())&&(n.uploadImageElement=i.first)}},features:[t.qOj],decls:26,vars:34,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","md:min-w-160","lg:min-w-256","-m-6","max-h-180"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","nav.workspace",1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close",""],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-90","px-6","pt-6","pb-3","sm:p-8","space-y-6","overflow-y-auto","bg-slate-100"],[1,"bg-card","rounded-md","p-6","gap-5","shadow"],[1,"flex","items-center","justify-center","pb-6"],[1,"rounded-full","border-slate-800","border","w-32","h-32","relative","overflow-hidden","group"],["nz-image","","alt","",1,"w-full","h-full","bg-center",3,"nzSrc"],["class","group-hover:visible bg-accent opacity-50 absolute inset-0 z-30",4,"ngIf"],["class","group-hover:visible absolute inset-0 z-40 flex gap-2.5 items-center justify-center",4,"ngIf"],[1,"flex","flex-col","space-y-4"],[1,"flex","flex-col","md:flex-row","md:space-x-4","space-y-4","md:space-y-0","flex-wrap"],["isRequired","true",1,"flex-1",3,"label","actionEnum","isDisableLength","model","modelChange"],["isRequired","true","type","datepicker",1,"flex-1",3,"label","actionEnum","isDisableLength","model","modelChange"],["type","number",1,"flex-1",3,"label","actionEnum","isDisableLength","model","modelChange"],["type","textarea",1,"flex-1",3,"label","actionEnum","isDisableLength","model","modelChange"],["class","flex space-x-2 justify-end",4,"ngIf"],["class","flex flex-col flex-1 w-full bg-card rounded-md p-6 shadow",4,"ngIf"],[1,"group-hover:visible","bg-accent","opacity-50","absolute","inset-0","z-30"],[1,"group-hover:visible","absolute","inset-0","z-40","flex","gap-2.5","items-center","justify-center"],["svgIcon","heroicons_outline:camera",1,"text-slate-200","hover:text-slate-50","cursor-pointer",3,"click"],["svgIcon","heroicons_outline:trash",1,"text-slate-200","hover:text-slate-50","cursor-pointer",3,"click"],["accept","image/*","type","file",1,"hidden"],["uploadImage",""],[1,"flex","space-x-2","justify-end"],["color","primary","mat-flat-button","","mat-button","",1,"ml-auto","w-min","mr-2","text-white",3,"disabled","click"],["transloco","save",4,"ngIf"],[3,"diameter","mode",4,"ngIf"],["transloco","save"],[3,"diameter","mode"],[1,"flex","flex-col","flex-1","w-full","bg-card","rounded-md","p-6","shadow"],["class","flex-col flex sm:flex-row sm:justify-between",4,"ngIf"],[1,"flex","flex-1","flex-col"],["nzShowSizeChanger","",1,"w-full",3,"nzData","nzLoading"],["basicTable",""],["transloco","no","nzAlign","center","nzWidth","70px"],["nzWidth","100px",3,"nzAlign"],["nzWidth","150px"],["nzAlign","center","nzWidth","100px"],[4,"ngFor","ngForOf"],[1,"flex-col","flex","sm:flex-row","sm:justify-between"],[1,"flex","flex-col","w-full","h-full"],[1,"flex","gap-4"],[1,"flex-1"],[1,"fuse-mat-no-subscript","w-full",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"ngModel","placeholder","keyup.enter","ngModelChange"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"border-b","w-full"],["nzAlign","center"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[3,"nzSrc"],[1,"text-ellipsis","truncate","w-100",3,"matTooltip"],["class","flex items-center mt-4 sm:mt-0 sm:ml-auto",4,"ngIf"],[1,"flex","items-center","mt-4","sm:mt-0","sm:ml-auto"],[1,"order-1","sm:order-2","sm:ml-3"],["mat-icon-button","",3,"click"],[1,"text-red-500",3,"svgIcon"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"button",3),t._UZ(4,"mat-icon",4),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t._UZ(9,"img",9),t.YNc(10,Mt,1,0,"div",10),t.YNc(11,St,5,0,"div",11),t.qZA()(),t.TgZ(12,"div",12)(13,"div",13)(14,"cm-input",14),t.NdJ("modelChange",function(s){return n.req.id=s}),t.qZA(),t.TgZ(15,"cm-input",14),t.NdJ("modelChange",function(s){return n.req.name=s}),t.qZA()(),t.TgZ(16,"div",13)(17,"cm-input",14),t.NdJ("modelChange",function(s){return n.req.adminEmail=s}),t.qZA(),t.TgZ(18,"cm-input",15),t.NdJ("modelChange",function(s){return n.req.validUpTo=s}),t.qZA()(),t.TgZ(19,"div",13)(20,"cm-input",16),t.NdJ("modelChange",function(s){return n.req.storageQuota=s}),t.qZA(),t.TgZ(21,"cm-input",16),t.NdJ("modelChange",function(s){return n.req.maxUser=s}),t.qZA()(),t.TgZ(22,"div",13)(23,"cm-input",17),t.NdJ("modelChange",function(s){return n.req.description=s}),t.qZA()()()(),t.YNc(24,Qt,4,3,"div",18),t.YNc(25,Lt,20,14,"div",19),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(5),t.Q6J("nzSrc","https://localhost:5001"+n.req.logo),t.xp6(1),t.Q6J("ngIf","view"!==n.actionEnum),t.xp6(1),t.Q6J("ngIf","view"!==n.actionEnum),t.xp6(3),t.Q6J("label","id")("actionEnum","view"==n.actionEnum||"edit"==n.actionEnum?"view":n.actionEnum)("isDisableLength",!0)("model",n.req.id),t.xp6(1),t.Q6J("label","name")("actionEnum",n.actionEnum)("isDisableLength",!0)("model",n.req.name),t.xp6(2),t.Q6J("label","system.email")("actionEnum",n.actionEnum)("isDisableLength",!0)("model",n.req.adminEmail),t.xp6(1),t.Q6J("label","system.expiredIn")("actionEnum",n.actionEnum)("isDisableLength",!0)("model",n.req.validUpTo),t.xp6(2),t.Q6J("label","system.quota")("actionEnum",n.actionEnum)("isDisableLength",!0)("model",n.req.storageQuota),t.xp6(1),t.Q6J("label","system.maxUser")("actionEnum",n.actionEnum)("isDisableLength",!0)("model",n.req.maxUser),t.xp6(2),t.Q6J("label","system.description")("actionEnum",n.actionEnum)("isDisableLength",!0)("model",n.req.description),t.xp6(1),t.Q6J("ngIf","view"!==n.actionEnum),t.xp6(1),t.Q6J("ngIf","new"!==n.actionEnum))},dependencies:[v.lW,v.RK,m.KE,m.qo,m.R9,I.Hw,J.Nt,w.ZT,It.W,p.sg,p.O5,g.KI,P.Ie,d.Fj,d.JJ,d.On,r.N8,r.Uo,r._C,r.Om,r.p0,r.$Z,r.UX,X.Ou,k.Dz,S.gM,g.Ot],encapsulation:2}),o})();var Ft=a(48131);const Et=["uploadImage"];function Rt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onClickDeactivate(i))}),t._UZ(1,"mat-icon",44),t._uU(2),t.ALo(3,"transloco"),t.qZA()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"system.deActivate")," "))}function Ot(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onClickActivate(i))}),t._UZ(1,"mat-icon",45),t._uU(2),t.ALo(3,"transloco"),t.qZA()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"system.activate")," "))}const Pt=function(o,c){return{"bg-green-500":o,"bg-red-500":c}};function Yt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("dblclick",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onClickView(s))}),t.ynx(1),t.TgZ(2,"td")(3,"span",28)(4,"button",29)(5,"mat-icon"),t._uU(6," more_vert "),t.qZA(),t.TgZ(7,"mat-menu",null,30),t.ynx(9),t.TgZ(10,"button",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onClickView(s))}),t.TgZ(11,"mat-icon"),t._uU(12,"visibility"),t.qZA(),t._uU(13),t.ALo(14,"transloco"),t.qZA(),t.TgZ(15,"button",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onClickEdit(s))}),t.TgZ(16,"mat-icon"),t._uU(17,"edit"),t.qZA(),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t.YNc(20,Rt,4,3,"button",32),t.YNc(21,Ot,4,3,"button",32),t.BQk(),t.qZA()()()(),t.TgZ(22,"td",22),t._uU(23),t.qZA(),t.TgZ(24,"td",33),t._uU(25),t.qZA(),t.TgZ(26,"td",34)(27,"div",35),t._UZ(28,"nz-avatar",36),t.qZA()(),t.TgZ(29,"td",37),t._uU(30),t.qZA(),t.TgZ(31,"td",38),t._uU(32),t.ALo(33,"formatFileSize"),t.qZA(),t.TgZ(34,"td",38),t._uU(35),t.ALo(36,"formatFileSize"),t.qZA(),t.TgZ(37,"td",38),t._uU(38),t.qZA(),t.TgZ(39,"td",39),t._uU(40),t.qZA(),t.TgZ(41,"td",40),t._uU(42),t.ALo(43,"date"),t.qZA(),t.TgZ(44,"td",41)(45,"span",42),t._uU(46),t.qZA()(),t.TgZ(47,"td",22)(48,"div",34),t._UZ(49,"div",43),t.qZA()(),t.BQk(),t.qZA()}if(2&o){const e=c.$implicit,n=c.index,i=t.MAs(8);t.oxw();const s=t.MAs(25);t.xp6(4),t.Q6J("matMenuTriggerFor",i),t.xp6(9),t.hij(" ",t.lcZ(14,20,"view")," "),t.xp6(5),t.hij(" ",t.lcZ(19,22,"edit")," "),t.xp6(2),t.Q6J("ngIf",1==e.isActive),t.xp6(1),t.Q6J("ngIf",!0!==e.isActive),t.xp6(2),t.hij(" ",(s.nzPageIndex-1)*s.nzPageSize+n+1," "),t.xp6(1),t.Q6J("matTooltip",e.id),t.xp6(1),t.hij(" ",e.id," "),t.xp6(3),t.Q6J("nzSrc","https://localhost:5001"+e.logo),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",t.lcZ(33,24,e.storageUsed)," "),t.xp6(3),t.hij(" ",t.lcZ(36,26,e.storageQuota)," "),t.xp6(3),t.hij(" ",e.maxUser," "),t.xp6(1),t.Q6J("matTooltip",e.adminEmail),t.xp6(1),t.hij(" ",e.adminEmail," "),t.xp6(1),t.Q6J("matTooltip",e.validUpTo),t.xp6(1),t.hij(" ",t.xi3(43,28,e.validUpTo,"dd/MM/YY HH:mm")," "),t.xp6(2),t.Q6J("matTooltip",e.description),t.xp6(2),t.hij(" ",e.description," "),t.xp6(3),t.Q6J("ngClass",t.WLB(31,Pt,1==e.isActive,1!=e.isActive))}}let Ht=(()=>{class o{constructor(e,n,i,s,l){this._tenantService=e,this._fuseConfirmationService=n,this._workspaceService=i,this._uploadService=s,this._matDialog=l,this.tenants=[],this.loading=!1,this.sourceTenant=[],this.isTenantFormDisable=!1,this.newTenant={name:null,description:null,adminEmail:null,id:null,logo:null,validUpTo:M()().add(3,"months").toISOString()},this.debounce$=new A.x,this._unsubscribeAll=new A.x,this.filter={tenantName:null,isActivate:!0}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.getTenants(),this.debounce$.pipe((0,it.b)(200),(0,C.R)(this._unsubscribeAll)).subscribe(()=>{this.getTenants()})}getTenants(){this.loading=!0,this._tenantService.getAll(this.filter).subscribe(e=>{this.sourceTenant=e.data,this.tenants=e.data,this.loading=!1})}trackByFn(e,n){return n.id||e}onSearch(e){this.filter.tenantName=e,this.debounce$.next()}updateSubscription(e,n){this._tenantService.updateSubscription(e,n).subscribe(i=>{})}resetNewTenant(){this.newTenant={name:null,adminEmail:null,description:null,id:null,logo:null,validUpTo:M()().add(3,"months").toISOString()}}createTenant(){this.newTenant={name:null,adminEmail:null,description:null,id:null,logo:null,validUpTo:M()().add(3,"months").toISOString()}}saveTenant(){this.isTenantFormDisable=!0,this._tenantService.create(this.newTenant).subscribe(e=>{this.isTenantFormDisable=!1,this.resetNewTenant(),this.getTenants()},e=>{this.isTenantFormDisable=!1})}ngAfterViewInit(){this.uploadImageElement&&(0,ot.R)(this.uploadImageElement.nativeElement,"input").pipe((0,C.R)(this._unsubscribeAll),(0,f.w)(e=>{const i=e.target.files;return i.length?this._uploadService.upLoadFile(i[0]).pipe((0,st.K)(l=>(0,H._)(()=>l))):(0,Y.of)()}),(0,at.n)(e=>!e)).subscribe(({data:e})=>{this.newTenant.logo=e})}onClickAdd(){this._matDialog.open(K,{disableClose:!1,data:{actionEnum:"new",tenant:null}}).afterClosed().subscribe(n=>{n&&this.getTenants()})}onClickDeactivate(e){(0,h.WD)(this._fuseConfirmationService,"confirm","message.doUWantDeactiveTenant").afterClosed().subscribe(n=>{"confirmed"===n&&this._tenantService.deActivate(e.id).subscribe(i=>this.getTenants())})}onClickActivate(e){(0,h.WD)(this._fuseConfirmationService,"confirm","message.doUWantActiveTenant").afterClosed().subscribe(n=>{"confirmed"===n&&this._tenantService.activate(e.id).subscribe(i=>this.getTenants())})}onClickView(e){this._matDialog.open(K,{disableClose:!1,data:{actionEnum:"view",tenant:e}}).afterClosed().subscribe(i=>{i&&this.getTenants()})}onClickEdit(e){this._matDialog.open(K,{disableClose:!1,data:{actionEnum:"edit",tenant:e}}).afterClosed().subscribe(i=>{i&&this.getTenants()})}onToggle(e){this.filter.isActivate=e,this.debounce$.next()}onRemoveImage(){this.newTenant.logo=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ct.a),t.Y36(q.R),t.Y36(lt.A),t.Y36(D.C),t.Y36(w.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["admin-tenant-config"]],viewQuery:function(e,n){if(1&e&&t.Gf(Et,5),2&e){let i;t.iGM(i=t.CRH())&&(n.uploadImageElement=i.first)}},decls:62,vars:49,consts:[[1,"w-full","bg-transparent","shadow","space-y-6"],[1,"flex","items-center","bg-card","border-b","dark:bg-transparent","p-6","sm:py-5","md:px-8"],[1,"ml-2","lg:ml-0","text-3xl","font-bold","tracking-tight","leading-none"],[1,"m-6","bg-card","shadow","rounded-md","p-6"],[1,"w-full","flex","flex-row","items-center","justify-center"],[1,"flex-1","fuse-mat-no-subscript","w-full",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["mat-icon-button","","matSuffix",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex-1","ml-2"],["color","primary",3,"checked","change"],[1,"font-medium"],[1,"ml-auto"],["mat-flat-button","",1,"ml-4","w-min","mr-2","text-white",3,"color","click"],["transloco","new"],[1,"flex","flex-col","mt-8"],["nzShowSizeChanger","","nzSize","middle","nzBordered","true",1,"w-full",3,"nzData","nzLoading"],["basicTable",""],["nzWidth","60px"],["transloco","no","nzAlign","center","nzWidth","70px"],["nzWidth","100px"],["nzAlign","center"],["nzWidth","200px","nzAlign","center"],["nzWidth","200px"],["nzAlign","center","nzWidth","100px"],["class","cursor-pointer",3,"dblclick",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"dblclick"],[1,"items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["headerMenu",""],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"text-ellipsis",3,"matTooltip"],[1,"flex","justify-center"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],["nzIcon","user",3,"nzSrc"],["nzWidth","200px",1,"text-ellipsis","truncate"],["nzAlign","center",1,"text-ellipsis","truncate"],[1,"text-ellipsis","truncate","max-w-60",3,"matTooltip"],[1,"text-ellipsis","truncate",3,"matTooltip"],[1,"text-ellipsis","truncate","max-w-100","w-100",3,"matTooltip"],[1,""],[1,"h-3","w-3","rounded-full","mr-2",3,"ngClass"],["svgIcon","heroicons_solid:lock-closed",1,"text-red-500"],["svgIcon","heroicons_solid:lock-open",1,"text-green-500"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.ALo(4,"transloco"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9),t.ALo(10,"transloco"),t.qZA(),t._UZ(11,"mat-icon",6),t.TgZ(12,"input",7),t.NdJ("ngModelChange",function(s){return n.onSearch(s)}),t.qZA(),t.TgZ(13,"button",8),t._UZ(14,"mat-icon",9),t.qZA()(),t.TgZ(15,"div",10)(16,"mat-slide-toggle",11),t.NdJ("change",function(s){return n.onToggle(s.checked)}),t.TgZ(17,"span",12),t._uU(18),t.ALo(19,"transloco"),t.qZA()()(),t.TgZ(20,"div",13)(21,"button",14),t.NdJ("click",function(){return n.onClickAdd()}),t._UZ(22,"label",15),t.qZA()()(),t.TgZ(23,"div",16)(24,"nz-table",17,18)(26,"thead")(27,"tr"),t._UZ(28,"th",19)(29,"th",20),t.TgZ(30,"th",21),t._uU(31),t.ALo(32,"transloco"),t.qZA(),t.TgZ(33,"th",22),t._uU(34),t.ALo(35,"transloco"),t.qZA(),t.TgZ(36,"th",23),t._uU(37),t.ALo(38,"transloco"),t.qZA(),t.TgZ(39,"th",23),t._uU(40),t.ALo(41,"transloco"),t.qZA(),t.TgZ(42,"th",23),t._uU(43),t.ALo(44,"transloco"),t.qZA(),t.TgZ(45,"th",23),t._uU(46),t.ALo(47,"transloco"),t.qZA(),t.TgZ(48,"th"),t._uU(49),t.ALo(50,"transloco"),t.qZA(),t.TgZ(51,"th"),t._uU(52),t.ALo(53,"transloco"),t.qZA(),t.TgZ(54,"th",24),t._uU(55),t.ALo(56,"transloco"),t.qZA(),t.TgZ(57,"th",25),t._uU(58),t.ALo(59,"transloco"),t.qZA()()(),t.TgZ(60,"tbody"),t.YNc(61,Yt,50,34,"tr",26),t.qZA()()()()()),2&e){const i=t.MAs(25);t.xp6(3),t.hij(" ",t.lcZ(4,23,"system.manageTenants")," "),t.xp6(4),t.Q6J("floatLabel","always"),t.xp6(2),t.Oqu(t.lcZ(10,25,"system.findTenants")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("ngModel",n.filter.tenantName)("placeholder",""),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(2),t.Q6J("checked",n.filter.isActivate),t.xp6(2),t.Oqu(t.lcZ(19,27,"com.activity")),t.xp6(3),t.Q6J("color","primary"),t.xp6(3),t.Q6J("nzData",n.tenants)("nzLoading",n.loading),t.xp6(7),t.hij(" ",t.lcZ(32,29,"id")," "),t.xp6(3),t.hij(" ",t.lcZ(35,31,"logo")," "),t.xp6(3),t.hij(" ",t.lcZ(38,33,"name")," "),t.xp6(3),t.hij(" ",t.lcZ(41,35,"system.usedQuota")," "),t.xp6(3),t.hij(" ",t.lcZ(44,37,"system.quota")," "),t.xp6(3),t.hij(" ",t.lcZ(47,39,"system.maxUser")," "),t.xp6(3),t.hij(" ",t.lcZ(50,41,"system.email")," "),t.xp6(3),t.hij(" ",t.lcZ(53,43,"system.expiredIn")," "),t.xp6(3),t.hij(" ",t.lcZ(56,45,"system.description")," "),t.xp6(3),t.hij(" ",t.lcZ(59,47,"com.activity")," "),t.xp6(3),t.Q6J("ngForOf",i.data)}},dependencies:[v.lW,v.RK,m.KE,m.hX,m.qo,m.R9,I.Hw,J.Nt,p.mk,p.sg,p.O5,g.KI,d.Fj,d.JJ,d.On,r.N8,r.Uo,r._C,r.Om,r.p0,r.$Z,r.UX,O.Rr,k.Dz,S.gM,Q.VK,Q.OP,Q.p6,Ft.x,p.uU,g.Ot],encapsulation:2}),o})();var L=a(61135),y=a(18505),x=a(95698),Z=a(54004),G=a(39300),Kt=a(3144),j=a(99286);let $=(()=>{class o{constructor(e,n){this._httpClient=e,this._userManagementService=n,this._contact=new L.X(null),this._contacts=new L.X(null),this._countries=new L.X(null),this._tags=new L.X(null)}get contact$(){return this._contact.asObservable()}get contacts$(){return this._contacts.asObservable()}get countries$(){return this._countries.asObservable()}get tags$(){return this._tags.asObservable()}getContacts(){return this._httpClient.get("api/users").pipe((0,y.b)(e=>{this._contacts.next(e.data)}))}searchContacts(e){return this._userManagementService.get({isActive:null,searchNameOrId:e}).pipe((0,y.b)(n=>{this._contacts.next(n.data)}))}deleteContacts(e){return this._userManagementService.delete(e).pipe((0,y.b)(n=>{}))}getContactById(e){return this._contacts.pipe((0,x.q)(1),(0,Z.U)(n=>{const i=n.find(s=>s.id===e)||null;return this._contact.next(i),i}),(0,f.w)(n=>n?(0,Y.of)(n):(0,H._)("Could not found contact with id of "+e+"!")))}createContact(e){return this.contacts$.pipe((0,x.q)(1),(0,f.w)(n=>this._userManagementService.create({...e,password:"123456"}).pipe((0,Z.U)(i=>i))))}updateContact(e,n){return this.contacts$.pipe((0,x.q)(1),(0,f.w)(i=>this._userManagementService.edit(e,{...n,password:null}).pipe((0,Z.U)(()=>{}),(0,f.w)(s=>this.contact$.pipe((0,x.q)(1),(0,G.h)(l=>l&&l.id===e),(0,y.b)(()=>!0))))))}deleteContact(e){return this.contacts$.pipe((0,x.q)(1),(0,f.w)(n=>this._userManagementService.delete(e).pipe((0,Z.U)(()=>{const i=n.findIndex(s=>s.id===e);return n.splice(i,1),this._contacts.next(n),!0}))))}getCountries(){return this._httpClient.get("api/apps/contacts/countries").pipe((0,y.b)(e=>{this._countries.next(e)}))}getTags(){return this._httpClient.get("api/apps/contacts/tags").pipe((0,y.b)(e=>{this._tags.next(e)}))}createTag(e){return this.tags$.pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.post("api/apps/contacts/tag",{tag:e}).pipe((0,Z.U)(i=>(this._tags.next([...n,i]),i)))))}updateTag(e,n){return this.tags$.pipe((0,x.q)(1),(0,f.w)(i=>this._httpClient.patch("api/apps/contacts/tag",{id:e,tag:n}).pipe((0,Z.U)(s=>{const l=i.findIndex(u=>u.id===e);return i[l]=s,this._tags.next(i),s}))))}deleteTag(e){return this.tags$.pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.delete("api/apps/contacts/tag",{params:{id:e}}).pipe((0,Z.U)(i=>{const s=n.findIndex(l=>l.id===e);return n.splice(s,1),this._tags.next(n),i}),(0,G.h)(i=>i),(0,f.w)(i=>this.contacts$.pipe((0,x.q)(1),(0,Z.U)(s=>i))))))}uploadAvatar(e,n){return this.contacts$.pipe((0,x.q)(1),(0,f.w)(i=>this._httpClient.post("api/apps/contacts/avatar",{id:e,avatar:n},{headers:{"Content-Type":n.type}}).pipe((0,Z.U)(s=>{const l=i.findIndex(u=>u.id===e);return i[l]=s,this._contacts.next(i),s}),(0,f.w)(s=>this.contact$.pipe((0,x.q)(1),(0,G.h)(l=>l&&l.id===e),(0,y.b)(()=>(this._contact.next(s),s)))))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Kt.eN),t.LFG(j.x))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Gt=a(33601);const $t=function(o){return{"bg-slate-100":o}};function Wt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr",25),t.NdJ("dblclick",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onSelectUser(s.id))}),t.TgZ(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nz-avatar",27),t.qZA(),t.TgZ(5,"td",28)(6,"div",29),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"transloco"),t.qZA()()}if(2&o){const e=c.$implicit,n=c.index;t.oxw();const i=t.MAs(2),s=t.oxw();t.Q6J("ngClass",t.VKq(10,$t,e.id===s.contactIdSelected)),t.xp6(2),t.Oqu((i.nzPageIndex-1)*i.nzPageSize+n+1),t.xp6(2),t.Q6J("nzSrc","https://localhost:5001"+e.imageUrl),t.xp6(1),t.Q6J("matTooltip",e.id),t.xp6(2),t.hij(" ",e.id,""),t.xp6(2),t.Oqu(e.userName),t.xp6(2),t.Oqu(e.fullName),t.xp6(2),t.Oqu(t.lcZ(14,8,!0===e.isActive?"system.activated":"system.inActive"))}}function Bt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-table",18,19)(3,"thead")(4,"tr")(5,"th",20),t._uU(6,"STT"),t.qZA(),t.TgZ(7,"th",21),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t.TgZ(10,"th",22),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"th",23),t._uU(14),t.ALo(15,"transloco"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"transloco"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"transloco"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,Wt,15,12,"tr",24),t.qZA()(),t.BQk()),2&o){const e=c.ngIf,n=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("nzFrontPagination",!0)("nzShowPagination",!0)("nzData",e),t.xp6(7),t.Oqu(t.lcZ(9,10,"avatar")),t.xp6(3),t.Oqu(t.lcZ(12,12,"system.userId")),t.xp6(3),t.Oqu(t.lcZ(15,14,"system.userName")),t.xp6(3),t.Oqu(t.lcZ(18,16,"system.fullName")),t.xp6(3),t.Oqu(t.lcZ(21,18,"system.activated")),t.xp6(3),t.Q6J("ngForOf",n.data)("ngForTrackBy",i.trackByFn)}}function Vt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"div",30),t._UZ(2,"contacts-details",31),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("contactId",e.contactIdSelected)}}function Xt(o,c){1&o&&(t.ynx(0),t.TgZ(1,"div",30),t._UZ(2,"contacts-create"),t.qZA(),t.BQk())}let F=(()=>{class o{constructor(e,n,i,s,l,u,_,U,B){this._activatedRoute=e,this._changeDetectorRef=n,this._contactsService=i,this._document=s,this._router=l,this._fuseMediaWatcherService=u,this._systemUserManagementService=_,this._fuseConfirmationService=U,this._translocoService=B,this.searchInputControl=new d.NI,this._unsubscribeAll=new A.x,this.isNewItem=!1,this.userSelected=!1,this.isEdit=!1,this.debounce$=new A.x}ngOnInit(){this.debounce$.pipe((0,it.b)(400),(0,C.R)(this._unsubscribeAll)).subscribe(()=>{this.onClickSearch()}),this._contactsService.getContacts().subscribe(),this.contacts$=this._contactsService.contacts$,this._contactsService.contact$.pipe((0,C.R)(this._unsubscribeAll)).subscribe(e=>{this.selectedContact=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(e,n){return n.id||e}onSearch(){this.debounce$.next()}onClickSearch(){this._contactsService.searchContacts(this.searchInputControl.value).subscribe()}onSelectUser(e){this.userSelected=!0,this.contactIdSelected=e}onClickAdd(){this.selectedContact=null,this.userSelected=!1,this.isNewItem=!0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(t.sBO),t.Y36($),t.Y36(p.K0),t.Y36(b.F0),t.Y36(Gt.T),t.Y36(j.x),t.Y36(q.R),t.Y36(g.Vn))},o.\u0275cmp=t.Xpm({type:o,selectors:[["contacts-list"]],decls:24,vars:17,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-slate-100","dark:bg-transparent",3,"backdropClick"],[1,"flex","flex-col","md:flex-row"],[1,"flex","flex-col","flex-1"],[1,"flex","flex-col","sm:flex-row","bg-card","border-b","dark:bg-transparent","mb-6","px-6","items-start","sm:items-center","sm:py-4","md:px-8","sm:justify-between"],[1,"leading-none","text-3xl","font-bold","tracking-tight"],[1,"space-x-4","mt-4","sm:mt-0"],["mat-flat-button","",1,"w-min",3,"color","click"],[1,"mr-2",3,"svgIcon"],["transloco","add"],["mat-flat-button","",3,"click"],[3,"svgIcon"],[1,"flex","flex-col","sm:flex-row","overflow-auto","h-full"],[1,"flex-1","bg-card","shadow","rounded-md","overflow-x-auto","p-6","mx-6","mb-6","space-y-6"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder","keyup"],[4,"ngIf"],["nzSize","small","nzBordered","",3,"nzFrontPagination","nzShowPagination","nzData"],["basicTable",""],["nzAlign","center","nzWidth","70px"],["nzAlign","center","nzWidth","120px"],["nzWidth","150px"],["nzWidth","300px"],["class","cursor-pointer",3,"ngClass","dblclick",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cursor-pointer",3,"ngClass","dblclick"],["nzAlign","center"],["nzIcon","user",3,"nzSrc"],[3,"matTooltip"],[1,"text-ellipsis","truncate","w-20"],[1,"flex-1","bg-card","shadow","rounded-md","overflow-x-auto","p-6","mr-6","mb-6","space-y-6","max-w-lg"],[3,"contactId"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return n.onBackdropClicked()}),t.TgZ(2,"mat-drawer-content",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.onClickAdd()}),t._UZ(10,"mat-icon",8)(11,"label",9),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return n.onClickSearch()}),t._UZ(13,"mat-icon",11),t.qZA()()(),t.TgZ(14,"div",12)(15,"div",13)(16,"mat-form-field",14),t._UZ(17,"mat-icon",15),t.TgZ(18,"input",16),t.NdJ("keyup",function(){return n.onSearch()}),t.ALo(19,"transloco"),t.qZA()(),t.YNc(20,Bt,24,20,"ng-container",17),t.ALo(21,"async"),t.qZA(),t.YNc(22,Vt,3,1,"ng-container",17),t.YNc(23,Xt,3,0,"ng-container",17),t.qZA()()()()()),2&e&&(t.xp6(6),t.hij(" ",t.lcZ(7,11,"nav.userManagement")," "),t.xp6(3),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","add"),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:arrow-path"),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder",t.lcZ(19,13,"placeholder.enterNameOrId")),t.xp6(2),t.Q6J("ngIf",t.lcZ(21,15,n.contacts$)),t.xp6(2),t.Q6J("ngIf",!0===n.userSelected),t.xp6(1),t.Q6J("ngIf",!1===n.userSelected&&!0===n.isNewItem))},encapsulation:2,changeDetection:0}),o})();const te=["avatarFileInput"],ee=["tagsPanel"],ne=["tagsPanelOrigin"];function ie(o,c){if(1&o&&t._UZ(0,"img",27),2&o){const e=t.oxw(2);t.Q6J("nzSrc","https://localhost:5001"+e.contact.imageUrl)}}function oe(o,c){if(1&o&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.contact.userName.charAt(0)," ")}}function se(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),t._UZ(5,"div",6),t.TgZ(6,"div",7)(7,"div")(8,"input",8,9),t.NdJ("change",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.selectFile(i))}),t.qZA(),t.TgZ(10,"label",10),t._UZ(11,"mat-icon",11),t.qZA()(),t.TgZ(12,"div")(13,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.removeAvatar())}),t._UZ(14,"mat-icon",11),t.qZA()()(),t.YNc(15,ie,1,1,"img",13),t.YNc(16,oe,2,1,"div",14),t.qZA()(),t.TgZ(17,"div",15)(18,"mat-form-field",16)(19,"mat-label"),t._uU(20),t.ALo(21,"transloco"),t.TgZ(22,"span",17),t._uU(23,"*"),t.qZA()(),t._UZ(24,"mat-icon",18),t.TgZ(25,"input",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.userName=i)}),t.ALo(26,"transloco"),t.qZA()()(),t.TgZ(27,"div",15)(28,"mat-form-field",16)(29,"mat-label"),t._uU(30),t.ALo(31,"transloco"),t.TgZ(32,"span",17),t._uU(33,"*"),t.qZA()(),t._UZ(34,"mat-icon",18),t.TgZ(35,"input",20),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.fullName=i)}),t.ALo(36,"transloco"),t.qZA()()(),t.TgZ(37,"div",15)(38,"mat-form-field",16)(39,"mat-label"),t._uU(40),t.ALo(41,"transloco"),t.qZA(),t._UZ(42,"mat-icon",18),t.TgZ(43,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.birthdayValue=i)}),t.ALo(44,"transloco"),t.qZA(),t._UZ(45,"mat-datepicker-toggle",22)(46,"mat-datepicker",null,23),t.qZA()(),t.TgZ(48,"div",15)(49,"mat-form-field",16)(50,"mat-label"),t._uU(51),t.ALo(52,"transloco"),t.qZA(),t._UZ(53,"mat-icon",18),t.TgZ(54,"input",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.email=i)}),t.ALo(55,"transloco"),t.qZA()()(),t.TgZ(56,"div",15)(57,"mat-form-field",16)(58,"mat-label"),t._uU(59),t.ALo(60,"transloco"),t.qZA(),t._UZ(61,"mat-icon",18),t.TgZ(62,"input",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.phoneNumber=i)}),t.ALo(63,"transloco"),t.qZA()()(),t.TgZ(64,"div",15)(65,"mat-form-field",16)(66,"mat-label"),t._uU(67),t.ALo(68,"transloco"),t.qZA(),t._UZ(69,"mat-icon",18),t.TgZ(70,"input",20),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.address=i)}),t.ALo(71,"transloco"),t.qZA()()(),t.TgZ(72,"div",24)(73,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateContact())}),t._UZ(74,"mat-icon",26),t._uU(75),t.ALo(76,"transloco"),t.qZA()()()()()}if(2&o){const e=t.MAs(47),n=t.oxw();t.xp6(8),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(1),t.Q6J("ngIf",n.contact.imageUrl),t.xp6(1),t.Q6J("ngIf",!n.contact.imageUrl),t.xp6(4),t.hij("",t.lcZ(21,38,"system.userName")," "),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(1),t.Q6J("ngModel",n.contact.userName)("placeholder",t.lcZ(26,40,"system.userName"))("spellcheck",!1),t.xp6(5),t.hij("",t.lcZ(31,42,"system.fullName")," "),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(1),t.Q6J("ngModel",n.contact.fullName)("placeholder",t.lcZ(36,44,"system.fullName")),t.xp6(5),t.Oqu(t.lcZ(41,46,"system.birthday")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:cake"),t.xp6(1),t.Q6J("matDatepicker",e)("ngModel",n.contact.birthdayValue)("placeholder",t.lcZ(44,48,"system.birthday")),t.xp6(2),t.Q6J("for",e),t.xp6(6),t.Oqu(t.lcZ(52,50,"system.email")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:mail"),t.xp6(1),t.Q6J("ngModel",n.contact.email)("placeholder",t.lcZ(55,52,"system.email"))("spellcheck",!1),t.xp6(5),t.Oqu(t.lcZ(60,54,"system.mobile")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:phone"),t.xp6(1),t.Q6J("ngModel",n.contact.phoneNumber)("placeholder",t.lcZ(63,56,"system.mobile"))("spellcheck",!1),t.xp6(5),t.Oqu(t.lcZ(68,58,"system.address")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:location-marker"),t.xp6(1),t.Q6J("ngModel",n.contact.address)("placeholder",t.lcZ(71,60,"system.address")),t.xp6(3),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","save"),t.xp6(1),t.hij(" ",t.lcZ(76,62,"save")," ")}}let ae=(()=>{class o{constructor(e,n,i,s,l,u,_,U){this._changeDetectorRef=e,this._contactsListComponent=n,this._contactsService=i,this._fuseConfirmationService=s,this._router=l,this._systemUserManagementService=u,this._uploadService=_,this._translocoService=U,this.editMode=!1,this.tagsEditMode=!1,this.contact={id:"",isActive:!0,isDelete:!1,userName:""},this._unsubscribeAll=new A.x,this.listDepartment=[],this.listRole=[],this.listUser=[],this.listJobTitle=[]}ngOnInit(){}selectFile(e){e.target.files.length>0&&("image"==e.target.files[0].type.split("/")[0]?this._uploadService.upLoadFile(e.target.files[0]).subscribe(n=>{n.success&&(this.contact.imageUrl=n.data,this._changeDetectorRef.markForCheck())}):(0,h.CK)(this._fuseConfirmationService,this._translocoService.translate("message.pleaseChooseAnImage")))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}toggleEditMode(e=null){null===e?this.editMode=!this.editMode:(this.editMode=e,this.editMode||(0,h.WD)(this._fuseConfirmationService,this._translocoService.translate("placeholder.discardChanges")).afterClosed().subscribe(n=>{"confirmed"===n&&this._router.navigate(["/SystemUserManagement"])})),this._changeDetectorRef.markForCheck()}updateContact(){this.contact.userName?this.contact.fullName?this._systemUserManagementService.create({...this.contact,password:"12345678"}).subscribe(({})=>{this._contactsListComponent.isNewItem=!1,this._contactsListComponent.selectedContact={...this.contact,password:"12345678"},this._contactsService.getContacts().subscribe()}):(0,h.CK)(this._fuseConfirmationService,"system.mustInputFullName"):(0,h.CK)(this._fuseConfirmationService,"system.mustInputUserName")}removeAvatar(){this.contact.imageUrl=null}resetPassword(){(0,h.WD)(this._fuseConfirmationService,"system.resetPass").afterClosed().subscribe(e=>{"confirmed"===e&&this._systemUserManagementService.resetPassword(this.contact.id).subscribe()})}trackByFn(e,n){return n.id||e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(F),t.Y36($),t.Y36(q.R),t.Y36(b.F0),t.Y36(j.x),t.Y36(D.C),t.Y36(g.Vn))},o.\u0275cmp=t.Xpm({type:o,selectors:[["contacts-create"]],viewQuery:function(e,n){if(1&e&&(t.Gf(te,5),t.Gf(ee,5),t.Gf(ne,5)),2&e){let i;t.iGM(i=t.CRH())&&(n._avatarFileInput=i.first),t.iGM(i=t.CRH())&&(n._tagsPanel=i.first),t.iGM(i=t.CRH())&&(n._tagsPanelOrigin=i.first)}},decls:1,vars:1,consts:[["class","flex flex-col w-full",4,"ngIf"],[1,"flex","flex-col","w-full"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-6"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","invisible","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["mat-icon-button","",3,"click"],["class","object-cover w-full h-full","nz-image","",3,"nzSrc",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"mt-8"],[1,"fuse-mat-no-subscript","w-full"],[1,"text-red-500","italic","font-semibold"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"ngModel","placeholder","spellcheck","ngModelChange"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["matInput","",3,"matDatepicker","ngModel","placeholder","ngModelChange"],["matSuffix","",3,"for"],["birthdayDatepicker",""],[1,"flex","items-center","justify-end","space-x-4","mt-4","sm:mt-0"],["mat-flat-button","",1,"w-min",3,"color","click"],[1,"mr-2",3,"svgIcon"],["nz-image","",1,"object-cover","w-full","h-full",3,"nzSrc"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"]],template:function(e,n){1&e&&t.YNc(0,se,77,64,"div",0),2&e&&t.Q6J("ngIf",n.contact)},dependencies:[v.lW,v.RK,m.KE,m.hX,m.qo,m.R9,I.Hw,J.Nt,p.O5,P.Ie,d.Fj,d.JJ,d.On,T.Mq,T.hl,T.nW,g.Ot],encapsulation:2,changeDetection:0}),o})();function ce(o,c){if(1&o&&t._UZ(0,"img",24),2&o){const e=t.oxw(2);t.Q6J("src","https://localhost:5001"+(null==e.contact?null:e.contact.imageUrl),t.LSH)}}function le(o,c){if(1&o&&(t.TgZ(0,"div",25),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",null==e.contact?null:e.contact.userName.charAt(0)," ")}}function re(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.YNc(5,ce,1,1,"img",5),t.YNc(6,le,2,1,"div",6),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleEditMode(!0))}),t._UZ(9,"mat-icon",9),t.TgZ(10,"span",10),t._uU(11,"Edit"),t.qZA()()()()()(),t.TgZ(12,"div",11)(13,"div",12),t._UZ(14,"div",13),t.TgZ(15,"div",14),t._uU(16),t.qZA()(),t.TgZ(17,"div",12),t._UZ(18,"div",15),t.TgZ(19,"div",14),t._uU(20),t.qZA()(),t.TgZ(21,"div",12),t._UZ(22,"div",16),t.TgZ(23,"div",14),t._uU(24),t.qZA()(),t.TgZ(25,"div",12),t._UZ(26,"div",17),t.TgZ(27,"div",14),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.TgZ(30,"div",12),t._UZ(31,"div",18),t.TgZ(32,"div",14),t._uU(33),t.qZA()(),t.TgZ(34,"div",12),t._UZ(35,"div",19),t.TgZ(36,"div",14),t._uU(37),t.qZA()(),t.TgZ(38,"div",12),t._UZ(39,"div",20),t.TgZ(40,"div",14),t._uU(41),t.qZA()(),t.TgZ(42,"div",21)(43,"div",22)(44,"mat-slide-toggle",23),t._uU(45),t.ALo(46,"transloco"),t.qZA()()()(),t.BQk()}if(2&o){const e=t.oxw();let n,i,s,l,u,_;t.xp6(5),t.Q6J("ngIf",null==e.contact?null:e.contact.imageUrl),t.xp6(1),t.Q6J("ngIf",!(null!=e.contact&&e.contact.imageUrl)),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:pencil-alt"),t.xp6(7),t.hij(" ",null!==(n=null==e.contact?null:e.contact.id)&&void 0!==n?n:"-"," "),t.xp6(4),t.hij(" ",null!==(i=null==e.contact?null:e.contact.userName)&&void 0!==i?i:"-"," "),t.xp6(4),t.hij(" ",null!==(s=null==e.contact?null:e.contact.fullName)&&void 0!==s?s:"-"," "),t.xp6(4),t.hij(" ",t.xi3(29,13,null==e.contact?null:e.contact.birthdayValue,"dd/MM/yyyy")," "),t.xp6(5),t.hij(" ",null!==(l=null==e.contact?null:e.contact.email)&&void 0!==l?l:"-"," "),t.xp6(4),t.hij(" ",null!==(u=null==e.contact?null:e.contact.phoneNumber)&&void 0!==u?u:"-"," "),t.xp6(4),t.hij(" ",null!==(_=null==e.contact?null:e.contact.address)&&void 0!==_?_:"-"," "),t.xp6(3),t.Q6J("color","primary")("ngModel","Y"==e.contact.isActive),t.xp6(1),t.hij(" ",t.lcZ(46,16,"system.activated")," ")}}function de(o,c){if(1&o&&t._UZ(0,"img",24),2&o){const e=t.oxw(2);t.Q6J("src","https://localhost:5001"+(null==e.contact?null:e.contact.imageUrl),t.LSH)}}function me(o,c){if(1&o&&(t.TgZ(0,"div",25),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",null==e.contact?null:e.contact.userName.charAt(0)," ")}}const ue=function(){return["../"]};function pe(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",26)(2,"button",27),t._UZ(3,"mat-icon",28),t.qZA()(),t.TgZ(4,"div",29)(5,"div",2)(6,"div",30)(7,"div",31),t._UZ(8,"div",32),t.TgZ(9,"div",33)(10,"div")(11,"input",34,35),t.NdJ("change",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.selectFile(i))}),t.qZA(),t.TgZ(13,"label",36),t._UZ(14,"mat-icon",37),t.qZA()(),t.TgZ(15,"div")(16,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.removeAvatar())}),t._UZ(17,"mat-icon",37),t.qZA()()(),t.YNc(18,de,1,1,"img",5),t.YNc(19,me,2,1,"div",6),t.qZA()(),t.TgZ(20,"div",39)(21,"mat-form-field",40)(22,"mat-label"),t._uU(23),t.ALo(24,"transloco"),t.TgZ(25,"span",41),t._uU(26,"*"),t.qZA()(),t._UZ(27,"mat-icon",42),t.TgZ(28,"input",43),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.userName=i)}),t.ALo(29,"transloco"),t.qZA()()(),t.TgZ(30,"div",39)(31,"mat-form-field",40)(32,"mat-label"),t._uU(33),t.ALo(34,"transloco"),t.TgZ(35,"span",41),t._uU(36,"*"),t.qZA()(),t._UZ(37,"mat-icon",42),t.TgZ(38,"input",44),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.fullName=i)}),t.ALo(39,"transloco"),t.qZA()()(),t.TgZ(40,"div",39)(41,"mat-form-field",40)(42,"mat-label"),t._uU(43),t.ALo(44,"transloco"),t.qZA(),t._UZ(45,"mat-icon",42),t.TgZ(46,"input",45),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.birthdayValue=i)}),t.ALo(47,"transloco"),t.qZA(),t._UZ(48,"mat-datepicker-toggle",46)(49,"mat-datepicker",null,47),t.qZA()(),t.TgZ(51,"div",39)(52,"mat-form-field",40)(53,"mat-label"),t._uU(54),t.ALo(55,"transloco"),t.qZA(),t._UZ(56,"mat-icon",42),t.TgZ(57,"input",43),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.email=i)}),t.ALo(58,"transloco"),t.qZA()()(),t.TgZ(59,"div",39)(60,"mat-form-field",40)(61,"mat-label"),t._uU(62),t.ALo(63,"transloco"),t.qZA(),t._UZ(64,"mat-icon",42),t.TgZ(65,"input",43),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.phoneNumber=i)}),t.ALo(66,"transloco"),t.qZA()()(),t.TgZ(67,"div",39)(68,"mat-form-field",40)(69,"mat-label"),t._uU(70),t.ALo(71,"transloco"),t.qZA(),t._UZ(72,"mat-icon",42),t.TgZ(73,"input",44),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.contact.address=i)}),t.ALo(74,"transloco"),t.qZA()()(),t.TgZ(75,"div",48)(76,"div",49)(77,"mat-slide-toggle",50),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.onChangeActive(i))}),t._uU(78),t.ALo(79,"transloco"),t.qZA()()(),t.TgZ(80,"div",51)(81,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resetPassword())}),t._UZ(82,"mat-icon",53)(83,"label",54),t.qZA(),t.TgZ(84,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteContact())}),t._UZ(85,"mat-icon",53)(86,"label",55),t.qZA(),t.TgZ(87,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateContact())}),t._UZ(88,"mat-icon",53),t._uU(89),t.ALo(90,"transloco"),t.qZA()()()(),t.BQk()}if(2&o){const e=t.MAs(50),n=t.oxw();t.xp6(2),t.Q6J("matTooltip","Close")("routerLink",t.DdM(75,ue)),t.xp6(9),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(1),t.Q6J("ngIf",n.contact.imageUrl),t.xp6(1),t.Q6J("ngIf",!n.contact.imageUrl),t.xp6(4),t.hij("",t.lcZ(24,47,"system.userName")," "),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(1),t.Q6J("ngModel",n.contact.userName)("placeholder",t.lcZ(29,49,"system.userName"))("spellcheck",!1),t.xp6(5),t.hij("",t.lcZ(34,51,"system.fullName")," "),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(1),t.Q6J("ngModel",n.contact.fullName)("placeholder",t.lcZ(39,53,"system.fullName")),t.xp6(5),t.Oqu(t.lcZ(44,55,"system.birthday")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:cake"),t.xp6(1),t.Q6J("matDatepicker",e)("ngModel",n.contact.birthdayValue)("placeholder",t.lcZ(47,57,"system.birthday")),t.xp6(2),t.Q6J("for",e),t.xp6(6),t.Oqu(t.lcZ(55,59,"system.email")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:mail"),t.xp6(1),t.Q6J("ngModel",n.contact.email)("placeholder",t.lcZ(58,61,"system.email"))("spellcheck",!1),t.xp6(5),t.Oqu(t.lcZ(63,63,"system.mobile")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:phone"),t.xp6(1),t.Q6J("ngModel",n.contact.phoneNumber)("placeholder",t.lcZ(66,65,"system.mobile"))("spellcheck",!1),t.xp6(5),t.Oqu(t.lcZ(71,67,"system.address")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:location-marker"),t.xp6(1),t.Q6J("ngModel",n.contact.address)("placeholder",t.lcZ(74,69,"system.address")),t.xp6(4),t.Q6J("color","primary")("ngModel",1==n.contact.isActive),t.xp6(1),t.hij(" ",t.lcZ(79,71,"system.activated")," "),t.xp6(3),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","delete"),t.xp6(2),t.Q6J("color","warn"),t.xp6(1),t.Q6J("svgIcon","delete"),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","save"),t.xp6(1),t.hij(" ",t.lcZ(90,73,"save")," ")}}let ge=(()=>{class o{constructor(e,n,i,s,l,u,_,U){this._activatedRoute=e,this._changeDetectorRef=n,this._contactsListComponent=i,this._contactsService=s,this._fuseConfirmationService=l,this._router=u,this._systemUserManagementService=_,this._uploadService=U,this.editMode=!1,this.tagsEditMode=!1,this._unsubscribeAll=new A.x,this.listDepartment=[],this.listRole=[],this.listJobTitle=[],this.isNewItem=!1,this.listUser=[]}ngOnChanges(){this.contactId&&this._contactsService.getContactById(this.contactId).pipe((0,C.R)(this._unsubscribeAll)).subscribe(e=>{this.contact=e,this._changeDetectorRef.markForCheck()})}ngOnInit(){this._contactsService.contacts$.pipe((0,C.R)(this._unsubscribeAll)).subscribe(e=>{this.contacts=e,this._changeDetectorRef.markForCheck()}),this._contactsService.getContactById(this.contactId).pipe((0,C.R)(this._unsubscribeAll)).subscribe(e=>{this.contact=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}toggleEditMode(e=null){null===e?this.editMode=!this.editMode:(this.editMode=e,this._contactsListComponent.isEdit=e,this.editMode||this._contactsService.searchContacts("").subscribe()),this._changeDetectorRef.markForCheck()}updateContact(){this.isNewItem?this._systemUserManagementService.create({...this.contact,password:"123456"}).subscribe(({success:e})=>{e&&(this.isNewItem=!1)}):this.isNewItem||this.saveUser().subscribe(()=>{this._contactsListComponent.isEdit=!1,this.editMode=!1,this._contactsListComponent.onClickSearch()})}saveUser(){return this._systemUserManagementService.edit(this.contact.id,{...this.contact,password:null})}deleteContact(){(0,h.WD)(this._fuseConfirmationService,"message.deleteUser").afterClosed().subscribe(e=>{if("confirmed"===e){const n=this.contact.id,i=this.contacts.findIndex(u=>u.id===n),l=1===this.contacts.length&&this.contacts[0].id===n?null:this.contacts[i+(i===this.contacts.length-1?-1:1)].id;this.contact.isDelete=!0,this._contactsService.updateContact(this.contact.id,this.contact).subscribe(()=>{this._router.navigate(l?["../",l]:["../"],{relativeTo:this._activatedRoute}),this.toggleEditMode(!1),this._contactsService.searchContacts("").subscribe()}),this._changeDetectorRef.markForCheck()}})}removeAvatar(){var e=this.contact.imageUrl.split("/")[3];this._uploadService.deleteFile(e).subscribe(n=>{}),this.contact.imageUrl=null}resetPassword(){(0,h.WD)(this._fuseConfirmationService,"system.resetPass").afterClosed().subscribe(e=>{"confirmed"===e&&this._systemUserManagementService.resetPassword(this.contact.id).subscribe(({data:n})=>{n&&(0,h.Hh)(this._fuseConfirmationService,"Password: "+n)})})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}trackByFn(e,n){return n.id||e}onChangeActive(e){e?(0,h.WD)(this._fuseConfirmationService,"message.unBlockUser").afterClosed().subscribe(n=>{"confirmed"===n&&(this.contact.isActive=!0,this.saveUser().subscribe(({success:i})=>{i&&(this.contact.isActive=e)}))}):(0,h.WD)(this._fuseConfirmationService,"message.blockUser").afterClosed().subscribe(n=>{"confirmed"===n&&(this.contact.isActive=!1,this.saveUser().subscribe(({success:i})=>{i&&(this.contact=null,this.contact.isActive=e)}))})}selectFile(e){e.target.files.length>0&&"image"==e.target.files[0].type.split("/")[0]&&this._uploadService.upLoadFile(e.target.files[0]).subscribe(n=>{n.success&&(this.contact.imageUrl=n.data,this._changeDetectorRef.markForCheck())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(t.sBO),t.Y36(F),t.Y36($),t.Y36(q.R),t.Y36(b.F0),t.Y36(j.x),t.Y36(D.C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["contacts-details"]],inputs:{contactId:"contactId"},features:[t.TTD],decls:3,vars:2,consts:[[4,"ngIf"],[1,"relative","mt-","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-6","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","items-center"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"flex","flex-col","space-y-6","md:space-y-8","p-6","pt-0","sm:p-12","sm:pt-0"],[1,""],["transloco","system.userId",1,"text-slate-500","text-md","font-semibold"],[1,"mt-1","text-base","font-normal"],["transloco","system.userName",1,"text-slate-500","text-md","font-semibold"],["transloco","system.fullName",1,"text-slate-500","text-md","font-semibold"],["transloco","system.birthday",1,"text-slate-500","text-md","font-semibold"],["transloco","system.email",1,"text-slate-500","text-md","font-semibold"],["transloco","system.mobile",1,"text-slate-500","text-md","font-semibold"],["transloco","system.address",1,"text-slate-500","text-md","font-semibold"],[1,"flex","flex-row","space-x-6"],[1,"flex-1","m-auto"],["disabled","",3,"color","ngModel"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto"],["mat-icon-button","",3,"matTooltip","routerLink"],["svgIcon","heroicons_solid:x-mark"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"flex","items-end"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"mt-8"],[1,"fuse-mat-no-subscript","w-full"],[1,"text-red-500","italic","font-semibold"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"ngModel","placeholder","spellcheck","ngModelChange"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["matInput","",3,"matDatepicker","ngModel","placeholder","ngModelChange"],["matSuffix","",3,"for"],["birthdayDatepicker",""],[1,"mt-8","flex","flex-row","space-x-6"],[1,"flex-1","m-auto","pb-4"],[3,"color","ngModel","ngModelChange"],[1,"flex","items-center","justify-end","space-x-4","mt-4","sm:mt-0"],["mat-flat-button","",1,"w-min",3,"color","click"],[1,"mr-2",3,"svgIcon"],["transloco","system.resetPass"],["transloco","delete"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.YNc(1,re,47,18,"ng-container",0),t.YNc(2,pe,91,76,"ng-container",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.editMode),t.xp6(1),t.Q6J("ngIf",n.editMode))},dependencies:[b.rH,v.lW,v.RK,m.KE,m.hX,m.qo,m.R9,I.Hw,J.Nt,p.O5,g.KI,d.Fj,d.JJ,d.On,O.Rr,S.gM,T.Mq,T.hl,T.nW,p.uU,g.Ot],encapsulation:2,changeDetection:0}),o})();var he=a(66550);let fe=(()=>{class o{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(he.H7,16))},o.\u0275pipe=t.Yjl({name:"safe",type:o,pure:!0}),o})(),W=(()=>{class o{constructor(e){this.route="";let n=e.snapshot.routeConfig?.path;"logs"===n?this.route="/logs/":"open-api"===n?this.route="/swagger/index.html":"background-jobs"===n&&(this.route="/jobs")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["master-dashboard-opportunity"]],decls:2,vars:3,consts:[[1,"w-full","h-full",3,"src"]],template:function(e,n){1&e&&(t._UZ(0,"iframe",0),t.ALo(1,"safe")),2&e&&t.Q6J("src",t.lcZ(1,1,"https://localhost:5001"+n.route),t.uOi)},dependencies:[fe],encapsulation:2}),o})();(0,p.qS)(rt.Z);const _e=[{path:"tenant-settings",component:Ht},{path:"user-settings",component:F},{path:"logs",component:W},{path:"open-api",component:W},{path:"background-jobs",component:W}];let xe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:N._A,useClass:nt.t$,deps:[N.Ad]},{provide:N.sG,useValue:nt.lv},{provide:tt.u7,useValue:tt.iF},{provide:N.Ad,useValue:"vi-VN"},{provide:t.soG,useValue:"en-US"}],imports:[b.Bz.forChild(_e),xt.Xo,v.ot,ut.To,m.lN,I.Ps,J.c,gt.LD,mt.p9,ht.Nh,w.Is,et.w,dt.QW,Zt.Co,bt.c,p.ez,ft.Wr,vt.PV,g.y4,P.Gb,et.w,d.u5,R.SJ,pt.Fk,r.HQ,O.rP,r.HQ,_t.Hb,X.Cq,Ct.ZJ,k.Rt,S.AV,Q.Tx,T.FA,d.UX,Tt.PG]}),o})();t.B6R(F,function(){return[v.lW,m.KE,m.qo,I.Hw,J.Nt,p.mk,p.sg,p.O5,g.KI,d.Fj,d.JJ,R.kh,R.LW,r.N8,r.Uo,r._C,r.Om,r.p0,r.$Z,r.UX,k.Dz,S.gM,d.oH,ae,ge]},function(){return[p.Ov,g.Ot]})}}]);