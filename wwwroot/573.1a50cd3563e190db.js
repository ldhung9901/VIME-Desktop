"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[573],{32950:(O,x,a)=>{a.d(x,{F:()=>m});var u=a(22223);let m=(()=>{class r{constructor(f){this.el=f,this.fallbackSrc="assets/images/fallback-image/blank-image.svg"}onError(){const f=this.el.nativeElement;f&&(f.src=this.fallbackSrc)}}return r.\u0275fac=function(f){return new(f||r)(u.Y36(u.SBq))},r.\u0275dir=u.lG2({type:r,selectors:[["img","nzSrc",""]],hostBindings:function(f,D){1&f&&u.NdJ("error",function(){return D.onError()})},inputs:{fallbackSrc:"fallbackSrc"}}),r})()},92982:(O,x,a)=>{a.d(x,{F:()=>m});var u=a(22223);let m=(()=>{class r{}return r.\u0275fac=function(f){return new(f||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({}),r})()},3914:(O,x,a)=>{a.d(x,{G:()=>m});var u=a(22223);let m=(()=>{class r{}return r.\u0275fac=function(f){return new(f||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({}),r})()},84573:(O,x,a)=>{a.r(x),a.d(x,{StaffModule:()=>qe});var u=a(44755),m=a(39401),r=a(51728),v=a(11292),f=a(430),D=a(69609),q=a(17406),P=a(50877),j=a(13617),W=a(83649),p=a(31531),K=a(74473),_=a(30430),ee=a(54259),F=a(23697),w=a(74050),R=a(8551),G=a(43042),h=a(58016),M=a(21352),e=a(22223);let te=(()=>{class o{constructor(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["staff"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"router-outlet")},dependencies:[p.lC],encapsulation:2}),o})();var C=a(77579),ne=a(78372),d=a(82722),z=a(28746),ie=a(3144);let U=(()=>{class o{constructor(n){this._httpClient=n}getAll(n){return this._httpClient.get("/api/staffs",{params:n})}getById(n){return this._httpClient.get(`/api/staffs/${n}`)}create(n){return this._httpClient.post("/api/staffs",n)}update(n,t){return this._httpClient.put(`/api/staffs/${n}`,t)}delete(n){return this._httpClient.delete(`/api/staffs/${n}`)}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(ie.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var I=a(68957),N=a(5270),Q=a(47148),Y=a(90504),k=a(32950);function le(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"tr",24),e.NdJ("dblclick",function(){const i=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.onViewStaff(i.staffId))}),e.TgZ(1,"td",25)(2,"span",26)(3,"button",27)(4,"mat-icon"),e._uU(5," more_vert "),e.qZA(),e.TgZ(6,"mat-menu",null,28),e.ynx(8),e.TgZ(9,"button",29),e.NdJ("click",function(){const i=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.onViewStaff(i.staffId))}),e.TgZ(10,"mat-icon"),e._uU(11,"visibility"),e.qZA(),e._uU(12),e.ALo(13,"transloco"),e.qZA(),e.TgZ(14,"button",29),e.NdJ("click",function(){const i=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.onEditStaff(i.staffId))}),e.TgZ(15,"mat-icon"),e._uU(16,"edit"),e.qZA(),e._uU(17),e.ALo(18,"transloco"),e.qZA(),e.BQk(),e.qZA()()()(),e.TgZ(19,"td",30),e._uU(20),e.qZA(),e.TgZ(21,"td")(22,"div",25),e._UZ(23,"img",31),e.qZA()(),e.TgZ(24,"td",32)(25,"div",33),e._uU(26),e.qZA()(),e.TgZ(27,"td",34)(28,"div",33),e._uU(29),e.qZA()(),e.TgZ(30,"td",35)(31,"div",33),e._uU(32),e.qZA()(),e.TgZ(33,"td",35)(34,"div",33),e._uU(35),e.qZA()(),e.TgZ(36,"td",35)(37,"div",33),e._uU(38),e.qZA()(),e.TgZ(39,"td",35)(40,"div",33),e._uU(41),e.qZA()(),e.TgZ(42,"td",35)(43,"div",33),e._uU(44),e.qZA()(),e.TgZ(45,"td",35)(46,"div",33),e._uU(47),e.qZA()(),e.TgZ(48,"td",35)(49,"div",33),e._uU(50),e.qZA()()()}if(2&o){const n=s.$implicit,t=s.index,l=e.MAs(7);e.oxw();const i=e.MAs(22);e.xp6(3),e.Q6J("matMenuTriggerFor",l),e.xp6(9),e.hij(" ",e.lcZ(13,23,"view")," "),e.xp6(5),e.hij(" ",e.lcZ(18,25,"edit")," "),e.xp6(3),e.Oqu((i.nzPageIndex-1)*i.nzPageSize+t+1),e.xp6(3),e.Q6J("nzSrc","https://localhost:5001"+n.avatar),e.xp6(1),e.Q6J("matTooltip",n.staffCode),e.xp6(2),e.hij(" ",n.staffCode," "),e.xp6(1),e.Q6J("matTooltip",n.fullName),e.xp6(2),e.hij(" ",n.fullName," "),e.xp6(1),e.Q6J("matTooltip",n.phoneNumber),e.xp6(2),e.hij(" ",n.phoneNumber," "),e.xp6(1),e.Q6J("matTooltip",n.email),e.xp6(2),e.hij(" ",n.email," "),e.xp6(1),e.Q6J("matTooltip",n.departmentName),e.xp6(2),e.hij(" ",n.departmentName," "),e.xp6(1),e.Q6J("matTooltip",n.jobTitleName),e.xp6(2),e.hij(" ",n.jobTitleName," "),e.xp6(1),e.Q6J("matTooltip",n.cardCount),e.xp6(2),e.hij(" ",n.cardCount," "),e.xp6(1),e.Q6J("matTooltip",n.faceCount),e.xp6(2),e.hij(" ",n.faceCount," "),e.xp6(1),e.Q6J("matTooltip",n.qrCodeCount),e.xp6(2),e.hij(" ",n.qrCodeCount," ")}}let oe=(()=>{class o{constructor(n,t,l,i,c,g){this._staffService=n,this._departmentService=t,this._jobTitleService=l,this._translocoService=i,this._router=c,this._activationRoute=g,this._unsubscribeAll=new C.x,this._debounce=new C.x,this.isTableLoading=!1,this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.jobTitles=[],this.departments=[],this.staffs=[]}onRefreshData(){this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.getAllStaffs()}ngOnInit(){this.getAllStaffs(),this.getDepartments(),this.getJobTitles(),this._debounce.pipe((0,ne.b)(400),(0,d.R)(this._unsubscribeAll)).subscribe(()=>{this.getAllStaffs()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getAllStaffs(){this.isTableLoading=!0,this._staffService.getAll({textSearch:this.filter.textSearch,jobTitleId:this.filter.jobTitleId,departmentId:this.filter.departmentId,isUse:this.filter.isUse}).pipe((0,z.x)(()=>this.isTableLoading=!1),(0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.staffs=n)})}getDepartments(){this._departmentService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.departments=n.map(t=>({id:t.departmentId,name:this._translocoService.translate(t.departmentName)})))})}getJobTitles(){this._jobTitleService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.jobTitles=n.map(t=>({id:t.jobTitleId,name:this._translocoService.translate(t.jobTitleName)})))})}onSearch(){this._debounce.next()}onViewStaff(n){this._router.navigate([n],{relativeTo:this._activationRoute})}onAddStaff(){this._router.navigate(["create"],{relativeTo:this._activationRoute})}onEditStaff(n){this._router.navigate([`edit/${n}`],{relativeTo:this._activationRoute})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(U),e.Y36(I.n),e.Y36(N.n),e.Y36(_.Vn),e.Y36(p.F0),e.Y36(p.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["staffs"]],decls:63,vars:57,consts:[[1,"flex","flex-col","w-full","flex-1"],[1,"bg-card","flex","flex-col","sm:flex-row","items-start","sm:items-center","sm:justify-between","px-8","py-5","border-b"],[1,"flex-1","tracking-tight","text-3xl","font-extrabold","font-inter","leading-9"],["mat-flat-button","","color","primary",1,"mr-4","w-min","text-white",3,"click"],[3,"svgIcon"],["transloco","add",1,"ml-2"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","heroicons_outline:arrow-path",1,"text-slate-500"],[1,"flex-1","flex","flex-col","rounded-md","shadow","p-6","gap-6"],[1,"flex-1","flex","flex-col","rounded-md","shadow","p-6","gap-6","bg-card"],[1,"flex","md:flex-row","gap-4","sm:flex-col"],["label","search",1,"flex-1","w-full",3,"model","placeholder","isDisableLength","modelChange"],["label","master.department",1,"flex-1","w-full",3,"model","listData","modelChange"],["label","nav.jobTitles",1,"flex-1","w-full",3,"model","listData","modelChange"],["color","primary",1,"text-lg","font-medium","flex-1","flex","items-end",3,"ngModel","ngModelChange"],[1,"border-b"],["nzShowSizeChanger","","nzBordered","true",3,"nzData","nzLoading"],["basicTable",""],["nzWidth","102px","nzAlign","center"],["nzWidth","70px","nzAlign","center"],["nzWidth","115px","nzAlign","center"],["nzWidth","150px"],["nzWidth","200px"],["class","hover:cursor-pointer",3,"dblclick",4,"ngFor","ngForOf"],[1,"hover:cursor-pointer",3,"dblclick"],[1,"flex","justify-center"],[1,"items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["headerMenu",""],["mat-menu-item","",3,"click"],["nzAlign","center"],["nz-image","",1,"h-8","w-8","rounded-full",3,"nzSrc"],[1,"w-50",3,"matTooltip"],[1,"w-50","text-ellipsis","truncate"],[1,"w-50","text-ellipsis","truncate",3,"matTooltip"],[3,"matTooltip"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.onAddStaff()}),e._UZ(6,"mat-icon",4)(7,"label",5),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return t.onRefreshData()}),e.ALo(9,"transloco"),e._UZ(10,"mat-icon",7),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"cm-input",11),e.NdJ("modelChange",function(i){return t.filter.textSearch=i})("modelChange",function(){return t.onSearch()}),e.qZA(),e.TgZ(15,"cm-select",12),e.NdJ("modelChange",function(i){return t.filter.departmentId=i})("modelChange",function(){return t.onSearch()}),e.qZA(),e.TgZ(16,"cm-select",13),e.NdJ("modelChange",function(i){return t.filter.jobTitleId=i})("modelChange",function(){return t.onSearch()}),e.qZA(),e.TgZ(17,"mat-slide-toggle",14),e.NdJ("ngModelChange",function(i){return t.filter.isUse=i})("ngModelChange",function(){return t.onSearch()}),e._uU(18),e.ALo(19,"transloco"),e.qZA()(),e._UZ(20,"div",15),e.TgZ(21,"nz-table",16,17)(23,"thead")(24,"tr")(25,"th",18),e._uU(26),e.ALo(27,"transloco"),e.qZA(),e.TgZ(28,"th",19),e._uU(29),e.ALo(30,"transloco"),e.qZA(),e.TgZ(31,"th",20),e._uU(32),e.ALo(33,"transloco"),e.qZA(),e.TgZ(34,"th",21),e._uU(35),e.ALo(36,"transloco"),e.qZA(),e.TgZ(37,"th",22),e._uU(38),e.ALo(39,"transloco"),e.qZA(),e.TgZ(40,"th",22),e._uU(41),e.ALo(42,"transloco"),e.qZA(),e.TgZ(43,"th",22),e._uU(44),e.ALo(45,"transloco"),e.qZA(),e.TgZ(46,"th",22),e._uU(47),e.ALo(48,"transloco"),e.qZA(),e.TgZ(49,"th",22),e._uU(50),e.ALo(51,"transloco"),e.qZA(),e.TgZ(52,"th",21),e._uU(53),e.ALo(54,"transloco"),e.qZA(),e.TgZ(55,"th",21),e._uU(56),e.ALo(57,"transloco"),e.qZA(),e.TgZ(58,"th",21),e._uU(59),e.ALo(60,"transloco"),e.qZA()()(),e.TgZ(61,"tbody"),e.YNc(62,le,51,27,"tr",23),e.qZA()()()()()),2&n){const l=e.MAs(22);e.xp6(3),e.hij(" ",e.lcZ(4,27,"nav.staffs")," "),e.xp6(3),e.Q6J("svgIcon","add"),e.xp6(2),e.s9C("matTooltip",e.lcZ(9,29,"com.refresh")),e.xp6(6),e.Q6J("model",t.filter.textSearch)("placeholder","vime.findByCardCodeOrName")("isDisableLength",!0),e.xp6(1),e.Q6J("model",t.filter.departmentId)("listData",t.departments),e.xp6(1),e.Q6J("model",t.filter.jobTitleId)("listData",t.jobTitles),e.xp6(1),e.Q6J("ngModel",t.filter.isUse),e.xp6(1),e.hij(" ",e.lcZ(19,31,"used")," "),e.xp6(3),e.Q6J("nzData",t.staffs)("nzLoading",t.isTableLoading),e.xp6(5),e.Oqu(e.lcZ(27,33,"master.function")),e.xp6(3),e.Oqu(e.lcZ(30,35,"no")),e.xp6(3),e.Oqu(e.lcZ(33,37,"avatar")),e.xp6(3),e.Oqu(e.lcZ(36,39,"vime.staffCode")),e.xp6(3),e.Oqu(e.lcZ(39,41,"fullName")),e.xp6(3),e.Oqu(e.lcZ(42,43,"master.phoneNumber")),e.xp6(3),e.Oqu(e.lcZ(45,45,"master.email")),e.xp6(3),e.Oqu(e.lcZ(48,47,"master.department")),e.xp6(3),e.Oqu(e.lcZ(51,49,"nav.jobTitles")),e.xp6(3),e.Oqu(e.lcZ(54,51,"vime.cardCount*")),e.xp6(3),e.Oqu(e.lcZ(57,53,"vime.faceCount*")),e.xp6(3),e.Oqu(e.lcZ(60,55,"vime.qrcodeCount*")),e.xp6(3),e.Q6J("ngForOf",l.data)}},dependencies:[r.lW,r.RK,f.Hw,_.KI,Q.f,Y.W,u.sg,W.gM,P.Rr,h.N8,h.Uo,h._C,h.Om,h.p0,h.$Z,h.UX,q.VK,q.OP,q.p6,m.JJ,m.On,w.Ie,k.F,_.Ot],encapsulation:2}),o})();var S=a(82004),A=a(96119),J=a(32202),y=a(71683),V=a(92369),$=a(99114),H=a(2242);const ae=function(){return{width:"100%"}};function se(o,s){if(1&o&&e._UZ(0,"img",30),2&o){const n=e.oxw();e.Q6J("src","https://localhost:5001"+n._uploadService.previewImage,e.LSH)("ngStyle",e.DdM(2,ae))}}const re=function(){return{showDownloadIcon:!1,showPreviewIcon:!0,showRemoveIcon:!0}};let ce=(()=>{class o{constructor(n,t,l,i,c,g,b,Z,T){this._staffService=n,this._departmentService=t,this._jobTitleService=l,this._translocoService=i,this._notificationService=c,this._router=g,this._fuseConfirmationService=b,this._activationRoute=Z,this._uploadService=T,this._unsubscribeAll=new C.x,this._debounce=new C.x,this.isLoading=!1,this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.jobTitles=[],this.departments=[],this.staffs=[],this.req={staffCode:null,fullName:null,jobTitleId:null,departmentId:null,email:null,phoneNumber:null,avatar:null,description:null,isUse:!0},this.imageFileLists=[]}ngOnInit(){this.getDepartments(),this.getJobTitles()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getDepartments(){this._departmentService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.departments=n.map(t=>({id:t.departmentId,name:this._translocoService.translate(t.departmentName)})))})}getJobTitles(){this._jobTitleService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.jobTitles=n.map(t=>({id:t.jobTitleId,name:this._translocoService.translate(t.jobTitleName)})))})}onSave(){(0,A.TF)(this.req.fullName)||(0,A.TF)(this.req.staffCode)?this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3}):(this.isLoading=!0,this.req.avatar=this.imageFileLists[0]?.response?.data,this._staffService.create(this.req).pipe((0,d.R)(this._unsubscribeAll),(0,z.x)(()=>this.isLoading=!1)).subscribe(n=>{n&&((0,S.Hh)(this._fuseConfirmationService,"message.saveSuccess"),this._router.navigate([`../${n.data.staffId}`],{relativeTo:this._activationRoute}))}))}onCancel(){(0,S.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(n=>{"confirmed"==n&&this._router.navigate(["../"],{relativeTo:this._activationRoute})})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(U),e.Y36(I.n),e.Y36(N.n),e.Y36(_.Vn),e.Y36(J.zb),e.Y36(p.F0),e.Y36(y.R),e.Y36(p.gz),e.Y36(V.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["staff-create"]],decls:52,vars:44,consts:[[1,"flex","flex-col","min-w-0","w-full","mb-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"flex","flex-col","gap-0","bg-card","dark:bg-transparent","mb-6","px-6","items-start","sm:pt-5","md:px-8"],[1,"flex","flex-col","flex-1","w-full","sm:flex-row","bg-card","dark:bg-transparent","items-start","sm:items-center","sm:justify-between","pb-5"],[1,"leading-none","text-3xl","font-bold","tracking-tight"],[1,"flex","md:flex-row","flex-col","md:gap-2.5","gap-2"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-col","w-full","px-6","gap-4"],[1,"flex","flex-col","gap-5","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"font-medium"],["nzListType","picture-card","nzAccept","image/*",1,"flex","mt-2.5",3,"nzAction","nzShowUploadList","nzRemove","nzMultiple","nzFileList","nzPreview","nzShowButton","nzFileListChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5"],["label","vime.staffCode","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","fullName","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","master.phoneNumber","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.email","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.department",1,"flex-1","w-full",3,"model","listData","modelChange"],["label","nav.jobTitles",1,"flex-1","w-full",3,"model","listData","modelChange"],[1,"flex-1"],["label","master.description","type","textarea","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],[1,"flex","items-center"],["color","primary",3,"ngModel","ngModelChange"],[3,"src","ngStyle"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.onCancel()}),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"transloco"),e.qZA()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return t.onSave()}),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"transloco"),e.qZA()()()()(),e.TgZ(17,"div",9)(18,"div",10)(19,"div",11)(20,"span",12),e._uU(21),e.ALo(22,"transloco"),e.qZA()(),e.TgZ(23,"div",2)(24,"mat-label",13),e._uU(25),e.ALo(26,"transloco"),e.qZA(),e.TgZ(27,"nz-upload",14),e.NdJ("nzFileListChange",function(i){return t.imageFileLists=i}),e.TgZ(28,"div"),e._UZ(29,"span",15),e.TgZ(30,"div",16),e._uU(31),e.ALo(32,"transloco"),e.qZA()()(),e.TgZ(33,"nz-modal",17),e.NdJ("nzOnCancel",function(){return t._uploadService.previewVisible=!1}),e.YNc(34,se,1,3,"ng-template",null,18,e.W1O),e.qZA()(),e.TgZ(36,"div",19)(37,"cm-input",20),e.NdJ("modelChange",function(i){return t.req.staffCode=i}),e.qZA(),e.TgZ(38,"cm-input",21),e.NdJ("modelChange",function(i){return t.req.fullName=i}),e.qZA(),e.TgZ(39,"cm-input",22),e.NdJ("modelChange",function(i){return t.req.phoneNumber=i}),e.qZA(),e.TgZ(40,"cm-input",23),e.NdJ("modelChange",function(i){return t.req.email=i}),e.qZA()(),e.TgZ(41,"div",19)(42,"cm-select",24),e.NdJ("modelChange",function(i){return t.req.departmentId=i}),e.qZA(),e.TgZ(43,"cm-select",25),e.NdJ("modelChange",function(i){return t.req.jobTitleId=i}),e.qZA(),e._UZ(44,"div",26)(45,"div",26),e.qZA(),e.TgZ(46,"div",19)(47,"cm-input",27),e.NdJ("modelChange",function(i){return t.req.description=i}),e.qZA()(),e.TgZ(48,"div",28)(49,"mat-checkbox",29),e.NdJ("ngModelChange",function(i){return t.req.isUse=i}),e.qZA(),e._uU(50),e.ALo(51,"transloco"),e.qZA()()()()()()),2&n){const l=e.MAs(35);e.xp6(6),e.Oqu(e.lcZ(7,29,"vime.addStaff")),e.xp6(5),e.Oqu(e.lcZ(12,31,"cancel")),e.xp6(4),e.Oqu(e.lcZ(16,33,"save")),e.xp6(6),e.Oqu(e.lcZ(22,35,"master.general")),e.xp6(4),e.Oqu(e.lcZ(26,37,"nav.pictureUpload")),e.xp6(2),e.Q6J("nzAction",t._uploadService.uploadUrl)("nzShowUploadList",e.DdM(43,re))("nzRemove",t._uploadService.deleteFileNz)("nzMultiple",!0)("nzFileList",t.imageFileLists)("nzPreview",t._uploadService.handlePreview)("nzShowButton",0==t.imageFileLists.length),e.xp6(4),e.Oqu(e.lcZ(32,39,"vime.pictureUpload")),e.xp6(2),e.Q6J("nzVisible",t._uploadService.previewVisible)("nzContent",l)("nzFooter",null),e.xp6(4),e.Q6J("model",t.req.staffCode)("isRequired",!0),e.xp6(1),e.Q6J("model",t.req.fullName)("isRequired",!0),e.xp6(1),e.Q6J("model",t.req.phoneNumber),e.xp6(1),e.Q6J("model",t.req.email),e.xp6(2),e.Q6J("model",t.req.departmentId)("listData",t.departments),e.xp6(1),e.Q6J("model",t.req.jobTitleId)("listData",t.jobTitles),e.xp6(4),e.Q6J("model",t.req.description),e.xp6(2),e.Q6J("ngModel",t.req.isUse),e.xp6(1),e.hij(" ",e.lcZ(51,41,"using")," ")}},dependencies:[r.lW,Q.f,Y.W,u.PC,$.hX,v.oG,m.JJ,m.On,M.FY,H.w,F.Ls,R.du,_.Ot],encapsulation:2}),o})();const de=function(){return{width:"100%"}};function ue(o,s){if(1&o&&e._UZ(0,"img",30),2&o){const n=e.oxw();e.Q6J("src","https://localhost:5001"+n._uploadService.previewImage,e.LSH)("ngStyle",e.DdM(2,de))}}const fe=function(){return{showDownloadIcon:!1,showPreviewIcon:!0,showRemoveIcon:!0}};let me=(()=>{class o{constructor(n,t,l,i,c,g,b,Z,T){this._staffService=n,this._departmentService=t,this._jobTitleService=l,this._translocoService=i,this._notificationService=c,this._router=g,this._fuseConfirmationService=b,this._activationRoute=Z,this._uploadService=T,this._unsubscribeAll=new C.x,this._debounce=new C.x,this.isLoading=!1,this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.jobTitles=[],this.departments=[],this.staffs=[],this.req={staffId:null,staffCode:null,fullName:null,jobTitleId:null,departmentId:null,email:null,phoneNumber:null,avatar:null,description:null,isUse:!0},this.imageFileLists=[]}ngOnInit(){this.getDepartments(),this.getJobTitles(),this._activationRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(n=>{n&&this.getById(n.id)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getById(n){this._staffService.getById(n).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:t})=>{t&&(this.req={staffId:t.staffId,staffCode:t.staffCode,fullName:t.fullName,jobTitleId:t.jobTitleId,departmentId:t.departmentId,email:t.email,phoneNumber:t.phoneNumber,avatar:t.avatar,description:t.description,isUse:t.isUse},this.req.avatar&&(this.imageFileLists=[{uid:"-1",name:"image.png",status:"done",url:this.req.avatar,response:{data:this.req.avatar}}]))})}getDepartments(){this._departmentService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.departments=n.map(t=>({id:t.departmentId,name:this._translocoService.translate(t.departmentName)})))})}getJobTitles(){this._jobTitleService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.jobTitles=n.map(t=>({id:t.jobTitleId,name:this._translocoService.translate(t.jobTitleName)})))})}onSave(){(0,A.TF)(this.req.fullName)||(0,A.TF)(this.req.staffCode)?this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3}):(this.isLoading=!0,this.req.avatar=this.imageFileLists[0]?.response?.data,this._staffService.update(this.req.staffId,this.req).pipe((0,d.R)(this._unsubscribeAll),(0,z.x)(()=>this.isLoading=!1)).subscribe(n=>{n.success&&(0,S.Hh)(this._fuseConfirmationService,"message.saveSuccess").afterClosed().subscribe(()=>{this._router.navigate([`../../${n.data.staffId}`],{relativeTo:this._activationRoute})})}))}onCancel(){(0,S.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(n=>{"confirmed"==n&&this._router.navigate(["../../"],{relativeTo:this._activationRoute})})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(U),e.Y36(I.n),e.Y36(N.n),e.Y36(_.Vn),e.Y36(J.zb),e.Y36(p.F0),e.Y36(y.R),e.Y36(p.gz),e.Y36(V.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["staff-edit"]],decls:52,vars:44,consts:[[1,"flex","flex-col","min-w-0","w-full","mb-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"flex","flex-col","gap-0","bg-card","dark:bg-transparent","mb-6","px-6","items-start","sm:pt-5","md:px-8"],[1,"flex","flex-col","flex-1","w-full","sm:flex-row","bg-card","dark:bg-transparent","items-start","sm:items-center","sm:justify-between","pb-5"],[1,"leading-none","text-3xl","font-extrabold","tracking-tight"],[1,"flex","md:flex-row","flex-col","md:gap-2.5","gap-2"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"flex","flex-col","w-full","px-6","gap-4"],[1,"flex","flex-col","gap-5","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"font-medium"],["nzListType","picture-card","nzAccept","image/*",1,"flex","mt-2.5",3,"nzAction","nzShowUploadList","nzMultiple","nzFileList","nzPreview","nzShowButton","nzFileListChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5"],["label","vime.staffCode","isDisableLength","true",1,"flex-1","w-full",3,"actionEnum","model","isRequired","modelChange"],["label","fullName","isDisableLength","true",1,"flex-1","w-full",3,"model","isRequired","modelChange"],["label","master.phoneNumber","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.email","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],["label","master.department",1,"flex-1","w-full",3,"model","listData","modelChange"],["label","nav.jobTitles",1,"flex-1","w-full",3,"model","listData","modelChange"],[1,"flex-1"],["label","master.description","type","textarea","isDisableLength","true",1,"flex-1","w-full",3,"model","modelChange"],[1,"flex","items-center"],["color","primary",3,"ngModel","ngModelChange"],[3,"src","ngStyle"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.onCancel()}),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"transloco"),e.qZA()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return t.onSave()}),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"transloco"),e.qZA()()()()(),e.TgZ(17,"div",9)(18,"div",10)(19,"div",11)(20,"span",12),e._uU(21),e.ALo(22,"transloco"),e.qZA()(),e.TgZ(23,"div",2)(24,"mat-label",13),e._uU(25),e.ALo(26,"transloco"),e.qZA(),e.TgZ(27,"nz-upload",14),e.NdJ("nzFileListChange",function(i){return t.imageFileLists=i}),e.TgZ(28,"div"),e._UZ(29,"span",15),e.TgZ(30,"div",16),e._uU(31),e.ALo(32,"transloco"),e.qZA()()(),e.TgZ(33,"nz-modal",17),e.NdJ("nzOnCancel",function(){return t._uploadService.previewVisible=!1}),e.YNc(34,ue,1,3,"ng-template",null,18,e.W1O),e.qZA()(),e.TgZ(36,"div",19)(37,"cm-input",20),e.NdJ("modelChange",function(i){return t.req.staffCode=i}),e.qZA(),e.TgZ(38,"cm-input",21),e.NdJ("modelChange",function(i){return t.req.fullName=i}),e.qZA(),e.TgZ(39,"cm-input",22),e.NdJ("modelChange",function(i){return t.req.phoneNumber=i}),e.qZA(),e.TgZ(40,"cm-input",23),e.NdJ("modelChange",function(i){return t.req.email=i}),e.qZA()(),e.TgZ(41,"div",19)(42,"cm-select",24),e.NdJ("modelChange",function(i){return t.req.departmentId=i}),e.qZA(),e.TgZ(43,"cm-select",25),e.NdJ("modelChange",function(i){return t.req.jobTitleId=i}),e.qZA(),e._UZ(44,"div",26)(45,"div",26),e.qZA(),e.TgZ(46,"div",19)(47,"cm-input",27),e.NdJ("modelChange",function(i){return t.req.description=i}),e.qZA()(),e.TgZ(48,"div",28)(49,"mat-checkbox",29),e.NdJ("ngModelChange",function(i){return t.req.isUse=i}),e.qZA(),e._uU(50),e.ALo(51,"transloco"),e.qZA()()()()()()),2&n){const l=e.MAs(35);e.xp6(6),e.Oqu(e.lcZ(7,29,"vime.editStaff")),e.xp6(5),e.Oqu(e.lcZ(12,31,"cancel")),e.xp6(4),e.Oqu(e.lcZ(16,33,"save")),e.xp6(6),e.Oqu(e.lcZ(22,35,"master.general")),e.xp6(4),e.Oqu(e.lcZ(26,37,"nav.pictureUpload")),e.xp6(2),e.Q6J("nzAction",t._uploadService.uploadUrl)("nzShowUploadList",e.DdM(43,fe))("nzMultiple",!0)("nzFileList",t.imageFileLists)("nzPreview",t._uploadService.handlePreview)("nzShowButton",0==t.imageFileLists.length),e.xp6(4),e.Oqu(e.lcZ(32,39,"vime.pictureUpload")),e.xp6(2),e.Q6J("nzVisible",t._uploadService.previewVisible)("nzContent",l)("nzFooter",null),e.xp6(4),e.Q6J("actionEnum","view")("model",t.req.staffCode)("isRequired",!0),e.xp6(1),e.Q6J("model",t.req.fullName)("isRequired",!0),e.xp6(1),e.Q6J("model",t.req.phoneNumber),e.xp6(1),e.Q6J("model",t.req.email),e.xp6(2),e.Q6J("model",t.req.departmentId)("listData",t.departments),e.xp6(1),e.Q6J("model",t.req.jobTitleId)("listData",t.jobTitles),e.xp6(4),e.Q6J("model",t.req.description),e.xp6(2),e.Q6J("ngModel",t.req.isUse),e.xp6(1),e.hij(" ",e.lcZ(51,41,"using")," ")}},dependencies:[r.lW,Q.f,Y.W,u.PC,$.hX,v.oG,m.JJ,m.On,M.FY,H.w,F.Ls,R.du,_.Ot],encapsulation:2}),o})();function pe(o,s){if(1&o&&(e.TgZ(0,"a",28,29)(2,"span"),e._uU(3),e.ALo(4,"transloco"),e.qZA()()),2&o){const n=s.$implicit,t=e.MAs(1),l=e.oxw();e.Tol("edit"===l.action?"cursor-not-allowed":"cursor-pointer"),e.Q6J("disabled","edit"===l.action)("routerLink",n.path)("queryParams",n.query)("active",t.isActive),e.xp6(3),e.Oqu(e.lcZ(4,7,n.name))}}let he=(()=>{class o{constructor(n,t,l,i,c,g,b,Z){this._staffService=n,this._departmentService=t,this._jobTitleService=l,this._translocoService=i,this._notificationService=c,this._router=g,this._fuseConfirmationService=b,this._activationRoute=Z,this._unsubscribeAll=new C.x,this.isLoading=!1,this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.jobTitles=[],this.departments=[],this.staffs=[],this.res={staffId:null,staffCode:null,fullName:null,jobTitleId:null,departmentId:null,email:null,phoneNumber:null,avatar:null,description:null,isUse:!0,cardCount:null,faceCount:null,qrCodeCount:null,departmentName:null,jobTitleName:null}}initialTabs(){this.tabs=[{name:"master.generalInformation",path:"general"}]}ngOnInit(){this.initialTabs(),this._activationRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(n=>{n&&this.getById(n.id)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getById(n){this._staffService.getById(n).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:t})=>{t&&(this.res={staffCode:t.staffCode,fullName:t.fullName,jobTitleId:t.jobTitleId,departmentId:t.departmentId,email:t.email,phoneNumber:t.phoneNumber,avatar:t.avatar,description:t.description,isUse:t.isUse,staffId:t.staffId,cardCount:t.cardCount,faceCount:t.faceCount,qrCodeCount:t.qrCodeCount,departmentName:t.departmentName,jobTitleName:t.jobTitleName})})}onCancel(){(0,S.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(n=>{"confirmed"==n&&this._router.navigate(["../"],{relativeTo:this._activationRoute})})}onBack(){this._router.navigate(["../"],{relativeTo:this._activationRoute})}onEdit(){this._router.navigate([`../edit/${this.res.staffId}`],{relativeTo:this._activationRoute})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(U),e.Y36(I.n),e.Y36(N.n),e.Y36(_.Vn),e.Y36(J.zb),e.Y36(p.F0),e.Y36(y.R),e.Y36(p.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["staff-details"]],decls:40,vars:13,consts:[[1,"flex","flex-col","min-w-0","w-full","mb-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"flex","flex-col","bg-card","dark:bg-transparent","p-8","pb-0","items-center","border-b","shadow-md"],[1,"flex","flex-row","items-center","justify-between","w-full"],[1,"flex","flex-col","w-full","sm:flex-row","bg-card","dark:bg-transparent","items-start","sm:items-center","justify-between","pb-5"],[1,"flex","gap-6"],[1,"w-20","h-20","object-contain","overflow-hidden","flex","items-center"],["nz-image","",3,"nzSrc"],[1,"flex","flex-col","gap-3","flex-1"],[1,"text-3xl","font-medium","tracking-tight"],[1,"flex","flex-col","sm:flex-row","space-x-3","w-full"],[1,"flex","gap-2","items-center"],["svgIcon","heroicons_solid:rectangle-stack",1,"icon-size-4"],[1,"px-2.5","justify-center","items-center","rounded","bg-slate-100"],[1,"text-slate-500","md","leading-6"],["svgIcon","heroicons_solid:swatch",1,"icon-size-4"],[1,"flex","flex-col","gap-2","w-full","items-end","justify-end","flex-1"],[1,"flex","gap-4","md:flex-row","flex-col"],["mat-flat-button","","color","accent",1,"flex","items-center","justify-center","gap-2",3,"click"],["svgIcon","heroicons_solid:arrow-uturn-left"],["mat-flat-button","","color","primary",1,"flex","items-center","justify-center","gap-2",3,"click"],["svgIcon","heroicons_solid:pencil",1,"icon-size-5"],[1,"z-10","relative","flex","flex-col","flex-0","w-full","bg-card"],["mat-tab-nav-bar","","mat-align-tabs","start","mat-stretch-tabs","false",1,"w-full",3,"tabPanel"],["class","px-6","fitInkBarToContent","","routerLinkActive","","mat-tab-link","",3,"disabled","class","routerLink","queryParams","active",4,"ngFor","ngForOf"],["tabPanel",""],[1,"flex","p-6"],["fitInkBarToContent","","routerLinkActive","","mat-tab-link","",1,"px-6",3,"disabled","routerLink","queryParams","active"],["rla","routerLinkActive"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10),e._uU(11),e.qZA(),e.TgZ(12,"div",11)(13,"div",12),e._UZ(14,"mat-icon",13),e.TgZ(15,"div",14)(16,"span",15),e._uU(17),e.qZA()()(),e.TgZ(18,"div",12),e._UZ(19,"mat-icon",16),e.TgZ(20,"div",14)(21,"span",15),e._uU(22),e.qZA()()()()()(),e.TgZ(23,"div",17)(24,"div",18)(25,"button",19),e.NdJ("click",function(){return t.onBack()}),e._UZ(26,"mat-icon",20),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"button",21),e.NdJ("click",function(){return t.onEdit()}),e._UZ(30,"mat-icon",22),e._uU(31),e.ALo(32,"transloco"),e.qZA()()()()(),e.TgZ(33,"div",23)(34,"nav",24),e.YNc(35,pe,5,9,"a",25),e.qZA(),e._UZ(36,"mat-tab-nav-panel",null,26),e.qZA()(),e.TgZ(38,"div",27),e._UZ(39,"router-outlet"),e.qZA()()()()),2&n){const l=e.MAs(37);let i,c;e.xp6(8),e.Q6J("nzSrc","https://localhost:5001"+t.res.avatar),e.xp6(3),e.AsE(" [",t.res.staffCode,"] ",t.res.fullName," "),e.xp6(6),e.hij(" ",null!==(i=t.res.departmentName)&&void 0!==i?i:"_",""),e.xp6(5),e.hij(" ",null!==(c=t.res.jobTitleName)&&void 0!==c?c:"_",""),e.xp6(5),e.hij(" ",e.lcZ(28,9,"master.back"),""),e.xp6(4),e.hij(" ",e.lcZ(32,11,"edit"),""),e.xp6(3),e.Q6J("tabPanel",l),e.xp6(1),e.Q6J("ngForOf",t.tabs)}},dependencies:[p.lC,p.rH,p.Od,r.lW,f.Hw,u.sg,j.BU,j.sW,j.Nj,w.Ie,k.F,_.Ot],encapsulation:2}),o})();var ge=a(42198),_e=a(15614),ve=a(25580),be=a(3990);function Ze(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const n=s.$implicit,t=s.index;e.oxw();const l=e.MAs(70);let i,c;e.xp6(2),e.Oqu((l.nzPageIndex-1)*l.nzPageSize+t+1),e.xp6(2),e.Oqu(null!==(i=n.cardName)&&void 0!==i?i:"_"),e.xp6(2),e.Oqu(null!==(c=n.cardCode)&&void 0!==c?c:"_")}}function Ce(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"img",28),e.qZA()()),2&o){const n=s.$implicit,t=s.index;e.oxw();const l=e.MAs(86);e.xp6(2),e.Oqu((l.nzPageIndex-1)*l.nzPageSize+t+1),e.xp6(2),e.Q6J("nzSrc","https://localhost:5001"+n)}}function Te(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"nz-qrcode",29),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const n=s.$implicit,t=s.index;e.oxw();const l=e.MAs(99);let i;e.xp6(2),e.Oqu((l.nzPageIndex-1)*l.nzPageSize+t+1),e.xp6(2),e.Q6J("nzValue",n)("nzSize",32),e.xp6(2),e.Oqu(null!==(i=n)&&void 0!==i?i:"_")}}const X=function(){return{y:"240px"}},xe=[{path:"staffs",component:te,children:[{path:"",component:oe},{path:"edit/:id",component:me},{path:"create",component:ce},{path:":id",component:he,children:[{path:"",pathMatch:"full",redirectTo:"general"},{path:"general",component:(()=>{class o{constructor(n,t,l,i,c,g,b,Z,T,L){this._staffService=n,this._departmentService=t,this._jobTitleService=l,this._translocoService=i,this._biostationService=c,this._notificationService=g,this._router=b,this._fuseConfirmationService=Z,this._activationRoute=T,this._matDialog=L,this._unsubscribeAll=new C.x,this._debounce=new C.x,this.isLoading=!1,this.filter={jobTitleId:null,departmentId:null,textSearch:null,isUse:!0},this.jobTitles=[],this.departments=[],this.staffs=[],this.res={staffId:null,staffCode:null,fullName:null,jobTitleId:null,departmentId:null,email:null,phoneNumber:null,avatar:null,description:null,isUse:!0,cardCount:null,faceCount:null,qrCodeCount:null,departmentName:null,jobTitleName:null},this.qrCodes=[],this.rfIdCards=[],this.faces=[]}initialTabs(){this.tabs=[{name:"master.generalInformation",path:":id"}]}ngOnInit(){this.getDepartments(),this.getJobTitles(),this.initialTabs(),this._activationRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(n=>{n&&this.getById(n.id)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getById(n){this._staffService.getById(n).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:t})=>{t&&(this.res={staffCode:t.staffCode,fullName:t.fullName,jobTitleId:t.jobTitleId,departmentId:t.departmentId,email:t.email,phoneNumber:t.phoneNumber,avatar:t.avatar,description:t.description,isUse:t.isUse,staffId:t.staffId,cardCount:t.cardCount,faceCount:t.faceCount,qrCodeCount:t.qrCodeCount,departmentName:t.departmentName,jobTitleName:t.jobTitleName},this.getBiostationConfig())})}getDepartments(){this._departmentService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.departments=n.map(t=>({id:t.departmentId,name:this._translocoService.translate(t.departmentName)})))})}getJobTitles(){this._jobTitleService.get({isUse:!0}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(({data:n})=>{n&&(this.jobTitles=n.map(t=>({id:t.jobTitleId,name:this._translocoService.translate(t.jobTitleName)})))})}getBiostationConfig(){this.isLoading=!0,this._biostationService.getBiostationInformation({staffId:this.res.staffId}).pipe((0,d.R)(this._unsubscribeAll),(0,z.x)(()=>this.isLoading=!1)).subscribe(({data:n})=>{n&&(this.biostationInformation=n,this.qrCodes=n.card.filter(t=>"QR_CODE"==t.cardTypeId).map(t=>t.cardCode),this.rfIdCards=n.card.filter(t=>"RFID"==t.cardTypeId),this.faces=n.face.map(t=>`data:image/jpeg;base64,${t}`))})}onSave(){(0,A.TF)(this.res.fullName)||(0,A.TF)(this.res.staffCode)?this._notificationService.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3}):(this.isLoading=!0,this._staffService.create(this.res).pipe((0,d.R)(this._unsubscribeAll),(0,z.x)(()=>this.isLoading=!1)).subscribe(n=>{n&&((0,S.Hh)(this._fuseConfirmationService,"message.saveSuccess"),this._router.navigate([`../${n.data.staffId}`],{relativeTo:this._activationRoute}))}))}onCancel(){(0,S.WD)(this._fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(n=>{"confirmed"==n&&this._router.navigate(["../"],{relativeTo:this._activationRoute})})}onBack(){this._router.navigate(["../"],{relativeTo:this._activationRoute})}onEdit(){this._router.navigate([`../edit/${this.res.staffId}`],{relativeTo:this._activationRoute})}openBiostationConfig(){this._matDialog.open(ge.I,{disableClose:!1,data:{staffId:this.res.staffId,customerId:null,outsideCustomerId:null}}).afterClosed().subscribe(t=>{t&&this.getById(this.res.staffId)})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(U),e.Y36(I.n),e.Y36(N.n),e.Y36(_.Vn),e.Y36(_e.h),e.Y36(J.zb),e.Y36(p.F0),e.Y36(y.R),e.Y36(p.gz),e.Y36(ve.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["staff-detail-general"]],decls:113,vars:80,consts:[[1,"flex","flex-1","flex-col","dark:bg-gray-900","rounded-md","gap-6","w-full"],[1,"flex","flex-1","flex-col","gap-6","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"pb-4","flex","border-b"],[1,"text-xl","font-medium"],[1,"flex","md:flex-row","flex-col","md:gap-4","gap-2.5"],[1,"flex","flex-1","flex-col","gap-2.5"],[1,"flex-1","text-slate-500","font-medium"],[1,"flex-1"],[1,"flex-1","flex","items-center"],["color","primary",1,"w-10","h-10","-ml-2",3,"ngModel","readOnly","ngModelChange"],[1,"text-secondary","font-medium"],[1,"flex","flex-col","gap-2.5"],[1,"flex","flex-col","p-6","bg-card","dark:bg-gray-900","rounded-md","shadow"],[1,"mb-4","flex","justify-between","items-center"],["mat-flat-button","",1,"gap-2",3,"color","click"],["svgIcon","heroicons_solid:cog-6-tooth",1,"icon-size-5"],[1,"border-b"],[1,"mt-5","flex","flex-row","gap-4","overflow-x-auto"],["nzShowSizeChanger","","nzBordered","true","nzSize","small",1,"flex-1",3,"nzData","nzLoading"],["cardTable",""],["nzWidth","70px","nzAlign","center"],["nzWidth","100px"],[4,"ngFor","ngForOf"],[1,"border-r"],["nzShowSizeChanger","","nzBordered","true","nzSize","small",1,"flex-1",3,"nzData","nzLoading","nzScroll"],["faceTable",""],["qrTable",""],["nzAlign","center"],["nz-image","",1,"w-12","h-12","object-contain",3,"nzSrc"],[3,"nzValue","nzSize"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"transloco"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6),e._uU(9),e.ALo(10,"transloco"),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()(),e.TgZ(13,"div",5)(14,"div",6),e._uU(15),e.ALo(16,"transloco"),e.qZA(),e.TgZ(17,"div",7),e._uU(18),e.qZA()(),e.TgZ(19,"div",5)(20,"div",6),e._uU(21),e.ALo(22,"transloco"),e.qZA(),e.TgZ(23,"div",7),e._uU(24),e.qZA()(),e.TgZ(25,"div",5)(26,"div",6),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"div",7),e._uU(30),e.qZA()()(),e.TgZ(31,"div",4)(32,"div",5)(33,"div",6),e._uU(34),e.ALo(35,"transloco"),e.qZA(),e.TgZ(36,"div",7),e._uU(37),e.qZA()(),e.TgZ(38,"div",5)(39,"div",6),e._uU(40),e.ALo(41,"transloco"),e.qZA(),e.TgZ(42,"div",7),e._uU(43),e.qZA()(),e.TgZ(44,"div",8)(45,"mat-checkbox",9),e.NdJ("ngModelChange",function(i){return t.res.isUse=i}),e.qZA(),e.TgZ(46,"span",10),e._uU(47),e.ALo(48,"transloco"),e.qZA()(),e._UZ(49,"div",7),e.qZA(),e.TgZ(50,"div",11)(51,"div",6),e._uU(52),e.ALo(53,"transloco"),e.qZA(),e.TgZ(54,"div",7),e._uU(55),e.qZA()()(),e.TgZ(56,"div",12)(57,"div",13)(58,"div")(59,"span",3),e._uU(60),e.ALo(61,"transloco"),e.qZA()(),e.TgZ(62,"button",14),e.NdJ("click",function(){return t.openBiostationConfig()}),e._UZ(63,"mat-icon",15),e.TgZ(64,"span"),e._uU(65),e.ALo(66,"transloco"),e.qZA()()(),e._UZ(67,"div",16),e.TgZ(68,"div",17)(69,"nz-table",18,19)(71,"thead")(72,"tr")(73,"th",20),e._uU(74),e.ALo(75,"transloco"),e.qZA(),e.TgZ(76,"th",21),e._uU(77),e.ALo(78,"transloco"),e.qZA(),e.TgZ(79,"th",21),e._uU(80),e.ALo(81,"transloco"),e.qZA()()(),e.TgZ(82,"tbody"),e.YNc(83,Ze,7,3,"tr",22),e.qZA()(),e._UZ(84,"div",23),e.TgZ(85,"nz-table",24,25)(87,"thead")(88,"tr")(89,"th",20),e._uU(90),e.ALo(91,"transloco"),e.qZA(),e.TgZ(92,"th",21),e._uU(93),e.ALo(94,"transloco"),e.qZA()()(),e.TgZ(95,"tbody"),e.YNc(96,Ce,5,2,"tr",22),e.qZA()(),e._UZ(97,"div",23),e.TgZ(98,"nz-table",24,26)(100,"thead")(101,"tr")(102,"th",20),e._uU(103),e.ALo(104,"transloco"),e.qZA(),e.TgZ(105,"th",21),e._uU(106),e.ALo(107,"transloco"),e.qZA(),e.TgZ(108,"th",21),e._uU(109),e.ALo(110,"transloco"),e.qZA()()(),e.TgZ(111,"tbody"),e.YNc(112,Te,7,4,"tr",22),e.qZA()()()()()),2&n){const l=e.MAs(70),i=e.MAs(86),c=e.MAs(99);let g,b,Z,T,L,B,E;e.xp6(4),e.Oqu(e.lcZ(5,40,"master.general")),e.xp6(5),e.hij(" ",e.lcZ(10,42,"vime.staffCode")," "),e.xp6(3),e.hij(" ",null!==(g=t.res.staffCode)&&void 0!==g?g:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(16,44,"fullName")," "),e.xp6(3),e.hij(" ",null!==(b=t.res.fullName)&&void 0!==b?b:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(22,46,"master.phoneNumber")," "),e.xp6(3),e.hij(" ",null!==(Z=t.res.phoneNumber)&&void 0!==Z?Z:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(28,48,"master.email")," "),e.xp6(3),e.hij(" ",null!==(T=t.res.email)&&void 0!==T?T:"_"," "),e.xp6(4),e.hij(" ",e.lcZ(35,50,"nav.departments")," "),e.xp6(3),e.hij(" ",null!==(L=t.res.departmentName)&&void 0!==L?L:"_"," "),e.xp6(3),e.hij(" ",e.lcZ(41,52,"nav.jobTitles")," "),e.xp6(3),e.hij(" ",null!==(B=t.res.jobTitleName)&&void 0!==B?B:"_"," "),e.xp6(2),e.Q6J("ngModel",t.res.isUse)("readOnly",!0),e.xp6(2),e.Oqu(e.lcZ(48,54,"using")),e.xp6(5),e.hij(" ",e.lcZ(53,56,"system.description")," "),e.xp6(3),e.hij(" ",null!==(E=t.res.description)&&void 0!==E?E:"_"," "),e.xp6(5),e.Oqu(e.lcZ(61,58,"vime.checkInOutSettings")),e.xp6(2),e.Q6J("color","primary"),e.xp6(3),e.Oqu(e.lcZ(66,60,"vime.checkInOutSettings")),e.xp6(4),e.Q6J("nzData",t.rfIdCards)("nzLoading",t.isLoading),e.xp6(5),e.Oqu(e.lcZ(75,62,"no")),e.xp6(3),e.Oqu(e.lcZ(78,64,"vime.cardName")),e.xp6(3),e.Oqu(e.lcZ(81,66,"vime.cardCode")),e.xp6(3),e.Q6J("ngForOf",l.data),e.xp6(2),e.Q6J("nzData",t.faces)("nzLoading",t.isLoading)("nzScroll",e.DdM(78,X)),e.xp6(5),e.Oqu(e.lcZ(91,68,"no")),e.xp6(3),e.Oqu(e.lcZ(94,70,"vime.face")),e.xp6(3),e.Q6J("ngForOf",i.data),e.xp6(2),e.Q6J("nzData",t.qrCodes)("nzLoading",t.isLoading)("nzScroll",e.DdM(79,X)),e.xp6(5),e.Oqu(e.lcZ(104,72,"no")),e.xp6(3),e.Oqu(e.lcZ(107,74,"vime.qrCode")),e.xp6(3),e.Oqu(e.lcZ(110,76,"content")),e.xp6(3),e.Q6J("ngForOf",c.data)}},dependencies:[r.lW,f.Hw,G.D,u.sg,h.N8,h.Uo,h._C,h.Om,h.p0,h.$Z,h.UX,v.oG,m.JJ,m.On,w.Ie,k.F,be.i,_.Ot],encapsulation:2}),o})()}]}]}];var Se=a(92982),Ae=a(3914);let qe=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[u.uU],imports:[p.Bz.forChild(xe),r.ot,f.Ps,G.x,_.y4,K.c,u.ez,D.c,W.AV,P.rP,h.HQ,q.Tx,v.p9,m.u5,M.cS,ee.sL,F.PV,R.Qp,j.Nh,w.Gb,Se.F,Ae.G]}),o})()}}]);