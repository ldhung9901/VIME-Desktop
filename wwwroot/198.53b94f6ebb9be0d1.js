"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[198],{15614:(j,w,s)=>{s.d(w,{h:()=>I});var v=s(22223),C=s(3144),b=s(71683);let I=(()=>{class l{constructor(d,m){this._httpClient=d,this._fuseConfirmationService=m}getAccessGroup(){return this._httpClient.get("api/biostation-configs/access-groups")}getBiostationInformation(d){return this._httpClient.get("api/biostation-configs/informations",{params:d})}createBiostationConfig(d){return this._httpClient.post("api/biostation-configs",d)}updateBiostationConfig(d,m){return this._httpClient.put(`api/biostation-configs/${d}`,m)}}return l.\u0275fac=function(d){return new(d||l)(v.LFG(C.eN),v.LFG(b.R))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},42198:(j,w,s)=>{s.d(w,{I:()=>gt});var v=s(15861),C=s(44755),b=s(39401),I=s(11292),l=s(25580),x=s(430),d=s(50877),m=s(13617),D=s(74473),q=s(11737),_=s(30430),N=s(12017),f=s(82004),g=s(58016),Z=s(77579),k=s(61135),F=s(78372),u=s(82722),h=s(28746),Q=s(15439),A=s.n(Q),B=s(99114),P=s(12965),J=s(8551),S=s(22497),z=s(74050),T=s(51728),y=s(43042),t=s(22223),U=s(71683),L=s(3144);function O(n,r){if(1&n&&(t.TgZ(0,"div",10),t.ynx(1),t._UZ(2,"img",11),t.BQk(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("src",e.imgSrc,t.LSH)}}function G(n,r){if(1&n&&(t.TgZ(0,"div",12),t._UZ(1,"nz-qrcode",13,14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzValue",e.imgSrc)("nzSize",256)("nzLevel","M")}}let M=(()=>{class n extends N.Y{constructor(e,i,o,a,c){super(i,e,a),this.fuseConfirmationService=e,this.translocoService=i,this.http=o,this.dialogRef=a,this._unsubscribeAll=new Z.x,this.type="image",console.log(c),c&&(this.imgSrc=c.imgSrc,this.type=c.type)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U.R),t.Y36(_.Vn),t.Y36(L.eN),t.Y36(l.so),t.Y36(l.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["biostation-config-img-popup"]],standalone:!0,features:[t._Bn([J.Sf,q.A,{provide:S.u7,useValue:S.iF}]),t.qOj,t.jDz],decls:10,vars:3,consts:[[1,"md:w-auto","md:min-w-160","max-h-200","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","image",1,"text-lg","font-medium","text-white"],["mat-icon-button","","mat-dialog-close",""],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-90","px-6","pt-6","pb-3","sm:p-8","space-y-6","overflow-y-auto","bg-slate-100"],[1,"bg-card","rounded-md","p-6","gap-5","shadow","flex","flex-col"],[1,"flex-col","flex"],["class","flex space-x-4",4,"ngIf"],["class","flex justify-center",4,"ngIf"],[1,"flex","space-x-4"],[3,"src"],[1,"flex","justify-center"],[3,"nzValue","nzSize","nzLevel"],["parent",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"button",3),t._UZ(4,"mat-icon",4),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7),t.YNc(8,O,3,1,"div",8),t.YNc(9,G,3,3,"div",9),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(4),t.Q6J("ngIf","qrCode"!==i.type),t.xp6(1),t.Q6J("ngIf","qrCode"==i.type))},dependencies:[C.ez,C.O5,D.c,T.RK,x.Ps,x.Hw,d.rP,m.Nh,B.lN,T.ot,l.Is,l.ZT,g.HQ,I.p9,b.u5,P.Tm,z.Gb,_.y4,_.KI,y.x,y.D],encapsulation:2}),n})();var Y=s(58177),E=s(15614),K=s(32202),W=s(47148),H=s(90504);const $=["download"];function V(n,r){1&n&&(t._uU(0),t.ALo(1,"transloco")),2&n&&t.hij(" ",t.lcZ(1,1,"vime.general")," ")}function X(n,r){1&n&&(t._uU(0),t.ALo(1,"transloco")),2&n&&t.hij(" ",t.lcZ(1,1,"master.card")," ")}function tt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",63)(2,"div",17),t._UZ(3,"mat-icon",64),t.TgZ(4,"div")(5,"div",65),t._uU(6),t.qZA(),t.TgZ(7,"div",66),t._uU(8),t.qZA()()(),t.TgZ(9,"div")(10,"mat-checkbox",67),t.NdJ("ngModelChange",function(o){const c=t.CHM(e).$implicit;return t.KtG(c.isAdded=o)}),t.qZA()()(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(6),t.Oqu(e.cardName),t.xp6(2),t.Oqu(e.cardCode),t.xp6(2),t.Q6J("disabled",e.isDisabled)("ngModel",e.isAdded)}}function et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",68),t._uU(2),t.qZA(),t.TgZ(3,"td",68),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"button",69),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onClickRemoveItem(a,"card"))}),t._UZ(7,"mat-icon",70),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",e.cardName," "),t.xp6(2),t.hij(" ",e.cardCode," "),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:trash")}}function it(n,r){1&n&&(t._uU(0),t.ALo(1,"transloco")),2&n&&t.hij(" ",t.lcZ(1,1,"vime.face")," ")}function ot(n,r){if(1&n&&t._UZ(0,"img",71),2&n){const e=t.oxw();t.Q6J("nzSrc",e.faceImageSubject.value)}}function nt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",73),t.NdJ("imageCapture",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleImage(o))})("initError",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleInitError(o))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("height",140)("width",250)("trigger",e.getTriggerObservable())}}function st(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,nt,1,3,"webcam",72),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.faceImageSubject.value)}}function at(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.isShowWebcam=!o.isShowWebcam)}),t._UZ(1,"mat-icon",80),t.qZA()}}function rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e),t.oxw(2);const o=t.MAs(63);return t.KtG(o.click())}),t._UZ(1,"mat-icon",81),t.qZA()}}function ct(n,r){if(1&n&&(t.TgZ(0,"div",74)(1,"div",75)(2,"div",76),t.YNc(3,at,2,0,"button",77),t.TgZ(4,"span",78),t._uU(5),t.ALo(6,"transloco"),t.qZA()(),t.TgZ(7,"div",76),t.YNc(8,rt,2,0,"button",77),t.TgZ(9,"span",78),t._uU(10),t.ALo(11,"transloco"),t.qZA()()(),t.TgZ(12,"span",78),t._uU(13),t.ALo(14,"transloco"),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.isShowWebcam&&!e.faceImageSubject.value),t.xp6(2),t.Oqu(t.lcZ(6,5,"master.takePicture")),t.xp6(3),t.Q6J("ngIf",!e.faceImageSubject.value&&!e.isShowWebcam),t.xp6(2),t.Oqu(t.lcZ(11,7,"master.selectNewImgFromComputer")),t.xp6(3),t.hij("(",t.lcZ(14,9,"message.pleaseChooseAPhoto"),")")}}function lt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteFile())}),t.qZA()}}function dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.triggerSnapshot())}),t._uU(1),t.ALo(2,"transloco"),t.qZA()}2&n&&(t.Q6J("color","primary"),t.xp6(1),t.hij(" ",t.lcZ(2,2,"system.takePicture")," "))}function mt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",84),t.NdJ("dblclick",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.onClickImgOpen(c.listFaceData[a]))}),t.TgZ(1,"td",85),t.ynx(2),t._UZ(3,"img",86),t.BQk(),t.qZA(),t.TgZ(4,"td")(5,"button",69),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onClickRemoveItem(a,"face"))}),t._UZ(6,"mat-icon",70),t.qZA()()()}if(2&n){const e=r.index,i=t.oxw();t.xp6(3),t.Q6J("src",i.listFaceData[e],t.LSH),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:trash")}}function ut(n,r){1&n&&(t._uU(0),t.ALo(1,"transloco")),2&n&&t.hij(" ",t.lcZ(1,1,"vime.qrCode")," ")}function pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",87),t.NdJ("dblclick",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onClickImgOpen(a,"qrCode"))}),t.TgZ(1,"td",88)(2,"div",89),t._UZ(3,"nz-qrcode",90)(4,"a",null,91),t.qZA()(),t.TgZ(6,"td",85),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"div",92)(10,"button",93),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.downloadImg())}),t._UZ(11,"mat-icon",94),t.qZA(),t.TgZ(12,"button",69),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onClickRemoveItem(a,"qrCode"))}),t._UZ(13,"mat-icon",94),t.qZA()()()()}if(2&n){const e=r.$implicit;t.xp6(3),t.Q6J("nzValue",e)("nzSize",48)("nzLevel","M"),t.xp6(4),t.hij(" ",e," "),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:arrow-down-tray"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:trash")}}const ft=function(){return{y:"140px"}};let gt=(()=>{class n extends N.Y{constructor(e,i,o,a,c,R,ht,Ct,p){super(o,R,i),this._cardService=e,this._dialogRef=i,this._translocoService=o,this._serialPortService=a,this._biostationService=c,this.fuseConfirmationService=R,this._notification=ht,this._matDialog=Ct,this._unsubscribeAll=new Z.x,this._debounce=new Z.x,this.faceReq={image:[]},this.triggerFaceImage=new Z.x,this.faceImageSubject=new k.X(null),this.isShowWebcam=!1,this.listFaceData=[],this.errors=[],this.selectedTab="general",this.isLoading=!1,this.cardTypes=[],this.accessGroup=[],this.createReq={cardCode:null,cardTypeId:null,cardName:null},this.res={biostationConfigId:null,isActivated:!0,face:[],card:[],startTime:A()().startOf("day").toISOString(),expiredTime:A()().endOf("day").toISOString(),accessGroupIds:[]},this.filter={textSearch:null},this.qrCodes=[],this.cards=[],this.rfIdCards=[],this.res.staffId=p.staffId,this.res.customerId=p.customerId,this.res.outsideCustomerId=p.outsideCustomerId,p.startDate&&(this.res.startTime=p.startDate),p.endDate&&(this.res.expiredTime=p.endDate),p.areaIds&&(this.res.accessGroupIds=p.areaIds)}ngOnInit(){this.getCardTypes(),this.getCards(),this._debounce.pipe((0,F.b)(400),(0,u.R)(this._unsubscribeAll)).subscribe(()=>{this.getCards()}),this.getAccessGroup(),this.getBiostationConfig()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onSearch(){this._debounce.next()}getBiostationConfig(){this._biostationService.getBiostationInformation({customerId:this.res.customerId,outsideCustomerId:this.res.outsideCustomerId,staffId:this.res.staffId}).pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(({data:e})=>{e&&(this.res=e,this.qrCodes=e.card.filter(i=>"QR_CODE"==i.cardTypeId).map(i=>i.cardCode),this.rfIdCards=e.card.filter(i=>"RFID"==i.cardTypeId),this.cards.map(i=>{i.isAdded=this.rfIdCards.map(o=>o.cardId).includes(i.cardId),i.isDisabled=i.isAdded}),this.listFaceData=e.face.map(i=>`data:image/jpeg;base64,${i}`))})}getCards(){this._cardService.getAll({textSearch:this.filter.textSearch,status:"NOT_USED"}).pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(({data:e})=>{e&&(this.cards=e.filter(i=>"RFID"===i.cardTypeId).map(i=>({cardId:i.cardId,cardCode:i.cardCode,cardName:i.cardName,cardTypeId:i.cardTypeId,isAdded:!1})),this.cards.map(i=>{i.isAdded=this.res.card.map(o=>o.cardId).includes(i.cardId),i.isDisabled=i.isAdded}))})}getCardTypes(){this._cardService.getCardTypes().pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(({data:e})=>{e&&(this.cardTypes=e.map(i=>({id:i.id,name:this._translocoService.translate(i.name)})))})}onClose(){(0,f.WD)(this.fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(e=>{"confirmed"===e&&this._dialogRef.close()})}changeAccessGroup(e){this.res.accessGroupIds=e.map(i=>i)}getAccessGroup(){this._biostationService.getAccessGroup().pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(({data:e})=>{e&&(this.accessGroup=e)})}onClickCancel(){(0,f.WD)(this.fuseConfirmationService,this._translocoService.translate("message.confirmUnSaveChange"),this._translocoService.translate("message.unsavedChangesAreYouSure")).afterClosed().subscribe(e=>{"confirmed"===e&&this.closePopup(!1)})}onClickSubmit(){}onClickScanCard(){this.isLoading=!0,this._serialPortService.readCard$().pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this._cardService.checkCardAvailable(e).pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(({data:i})=>{i&&(this.filter.textSearch=e)})})}onClickAddCard(){const i=this.cards.filter(o=>o.isAdded).map(o=>({cardId:o.cardId,cardCode:o.cardCode,cardName:o.cardName,cardTypeId:o.cardTypeId})).filter(o=>!this.rfIdCards.some(a=>a.cardCode===o.cardCode));this.rfIdCards=[...this.rfIdCards,...i],this.cards.filter(o=>o.isAdded).map(o=>{o.isDisabled=!0})}getTriggerObservable(){return this.triggerFaceImage.asObservable()}handleImage(e){var i=this;return(0,v.Z)(function*(){i.faceImageSubject.next(e.imageAsDataUrl)})()}handleInitError(e){this.errors.push(e)}deleteFile(){this.faceImageSubject.next(null)}triggerSnapshot(){this.triggerFaceImage.next(),this.isShowWebcam=!1}onImportImageChange(e){const i=e.currentTarget;if(i.files.length){this.currentFileUpload=i.files[0];const o=new FileReader;o.readAsDataURL(this.currentFileUpload),o.onload=()=>{this.faceImageSubject.next(o.result)}}}onClickAddFaceImg(){this.listFaceData||(this.listFaceData=[]),null!=this.faceImageSubject.value?(this.listFaceData=[...this.listFaceData,this.faceImageSubject.value],this.deleteFile()):(0,f.CK)(this.fuseConfirmationService,this._translocoService.translate("error.faceImageInputIsEmpty"))}onClickAddQr(){this.res.card.map(e=>e.cardCode).includes(this.qrReq)||this.res.card.map(e=>e.cardCode).includes(this.qrReq)?(0,f.CK)(this.fuseConfirmationService,this._translocoService.translate("error.qrCodeDuplicate")):null!=this.qrReq&&""!=this.qrReq?isNaN(Number(this.qrReq))?(0,f.CK)(this.fuseConfirmationService,this._translocoService.translate("error.qrCodeInputIsNotDigit")):(this.qrCodes=[...this.qrCodes,this.qrReq],this.qrReq=null):(0,f.CK)(this.fuseConfirmationService,this._translocoService.translate("error.qrCodeInputIsEmpty"))}onClickImgOpen(e,i){this._matDialog.open(M,{disableClose:!1,data:{imgSrc:e,type:i}}).afterClosed().subscribe()}onClickRemoveItem(e,i){switch(i){case"card":this.rfIdCards=this.rfIdCards.filter(o=>o.cardCode!==e.cardCode),this.cards=this.cards.map(o=>(o.cardId===e.cardId&&(o.isAdded=!1,o.isDisabled=!1),o));break;case"face":this.listFaceData=this.listFaceData.filter(o=>o!==e),this.faceReq.image=this.faceReq.image.filter(o=>o!==e);break;case"qrCode":this.qrCodes=this.qrCodes.filter(o=>o!==e)}}downloadImg(){const e=document.getElementById("download")?.querySelector("canvas");if(e){this.download.nativeElement.href=e.toDataURL("image/png"),this.download.nativeElement.download="ng-zorro-antd";const i=new MouseEvent("click");this.download.nativeElement.dispatchEvent(i)}}onSave(){if(0!==this.res.accessGroupIds.length&&this.res.startTime&&this.res.expiredTime)if(A()(this.res.startTime)>A()(this.res.expiredTime))this._notification.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.endDateMustAfterStartDate"),{nzDuration:3e3});else if(new Date(this.res.expiredTime).getFullYear()-new Date(this.res.startTime).getFullYear()>30)this._notification.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.durationExceeds"),{nzDuration:3e3});else{if(this.faceReq.image=[],this.listFaceData&&this.listFaceData.length)for(const e of this.listFaceData){let i=e.replace(/^data:image\/[a-z]+;base64,/,"");this.faceReq.image.push(i)}if(this.res.face=this.faceReq.image,this.res.card=[...this.rfIdCards,...this.qrCodes.map(e=>({cardCode:e,cardTypeId:"QR_CODE",cardId:null,cardName:e}))],this.rfIdCards.forEach(e=>{this.res.card.some(i=>i.cardCode===e.cardCode&&i.cardTypeId===e.cardTypeId)||this.res.card.push(e)}),this.isLoading=!0,this.res.biostationConfigId){let e={biostationConfigId:this.res.biostationConfigId,biostationUserId:this.res.biostationUserId,isActivated:this.res.isActivated,faces:this.res.face,cards:this.res.card.map(i=>({cardCode:i.cardCode,cardId:i.cardId,cardTypeId:i.cardTypeId,cardName:i.cardName})),staffId:this.res.staffId,customerId:this.res.customerId,outsideCustomerId:this.res.outsideCustomerId,startTime:this.res.startTime,expiredTime:this.res.expiredTime,accessGroupIds:this.res.accessGroupIds};this._biostationService.updateBiostationConfig(this.res.biostationConfigId,e).pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(i=>{i.success&&(0,f.Hh)(this.fuseConfirmationService,"message.success"),this.closePopup(!0)})}else{let e={biostationConfigId:this.res.biostationConfigId,biostationUserId:this.res.biostationUserId,isActivated:this.res.isActivated,faces:this.res.face,cards:this.res.card.map(i=>({cardCode:i.cardCode,cardId:i.cardId,cardTypeId:i.cardTypeId,cardName:i.cardName})),staffId:this.res.staffId,customerId:this.res.customerId,outsideCustomerId:this.res.outsideCustomerId,startTime:this.res.startTime,expiredTime:this.res.expiredTime,accessGroupIds:this.res.accessGroupIds};this._biostationService.createBiostationConfig(e).pipe((0,u.R)(this._unsubscribeAll),(0,h.x)(()=>this.isLoading=!1)).subscribe(i=>{i.success&&(0,f.Hh)(this.fuseConfirmationService,"message.success"),this.closePopup(!0)})}}else this._notification.warning(this._translocoService.translate("warning"),this._translocoService.translate("message.mustInputRequired"),{nzDuration:3e3})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.J),t.Y36(l.so),t.Y36(_.Vn),t.Y36(q.A),t.Y36(E.h),t.Y36(U.R),t.Y36(K.zb),t.Y36(l.uw),t.Y36(l.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["biostation-config"]],viewQuery:function(e,i){if(1&e&&t.Gf($,5),2&e){let o;t.iGM(o=t.CRH())&&(i.download=o.first)}},standalone:!0,features:[t._Bn([J.Sf,q.A,{provide:S.u7,useValue:S.iF}]),t.qOj,t.jDz],decls:105,vars:54,consts:[[1,"flex","flex-col","flex-auto","md:w-auto","lg:min-w-160","-m-6","md:max-w-240"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],["transloco","vime.checkInOutSettings",1,"text-lg","font-medium","text-white"],["mat-icon-button","","mat-dialog-close",""],[1,"icon-size-7","text-white",3,"svgIcon"],[1,"max-h-screen-80","max-w-screen-60","px-6","pt-6","pb-0","space-y-6","overflow-y-auto","bg-slate-100"],["animationDuration","0ms",1,"text-xs","flex","flex-col","gap-6"],["label","generalInformation"],["mat-tab-label",""],[1,"bg-card","rounded-md","p-6","gap-5","shadow","flex","flex-col","h-full"],["label","master.zone",3,"type","listData","isRequired","model","modelChange"],[1,"flex","md:space-x-2","flex-col","md:flex-row","h-full"],["type","datetimepicker","label","vime.startTime",1,"w-full",3,"isRequired","model","modelChange"],["type","datetimepicker","label","vime.endTime",1,"w-full",3,"isRequired","model","modelChange"],[1,"ml-1","mt-3",3,"color","ngModel","ngModelChange"],["label","card"],[1,"space-y-4"],[1,"flex","gap-4"],[1,"w-full",3,"model","placeholder","isDisableLength","modelChange"],["mat-flat-button","","color","primary",3,"disabled","click"],["svgIcon","heroicons_outline:magnifying-glass"],["transloco","vime.scanCard",1,"text-base","leading-6","font-medium","cursor-pointer"],[1,"bg-card","rounded-md","p-6","gap-5","shadow","flex","flex-col"],[1,"flex","flex-col","max-h-72","overflow-auto","gap-4"],[4,"ngFor","ngForOf"],[1,"flex","justify-end","space-x-2"],["mat-flat-button","","color","primary",3,"click"],["transloco","vime.chooseCard",1,"text-base","leading-6","font-medium","cursor-pointer"],["nzSize","middle","nzBordered","","nzShowSizeChanger","",1,"w-full",3,"nzData","nzScroll"],["columnTable",""],["nzWidth","60px"],["label","face"],[1,"items-center","justify-center","flex","flex-col","h-full"],[1,"text-lg","font-semibold","pb-5"],[1,"flex-1","border-2","border-dashed","rounded-lg","sm:w-[300px]","w-full","h-[140px]"],[1,"sm:w-[300px]","w-full","h-[140px]","flex","flex-col","sm:flex-row","items-center","justify-center"],["nz-image","","class","object-fit h-[140px] sm:w-[300px] w-full","style","\n                                            height: inherit;\n                                            width: 100%;\n                                            object-fit: contain;\n                                        ",3,"nzSrc",4,"ngIf"],[4,"ngIf"],["class","flex flex-col space-y-6 px-5",4,"ngIf"],[1,"flex","justify-center","items-center","sm:space-x-4","flex-col","sm:flex-row"],["class","mt-4","color","primary","mat-flat-button","","transloco","master.deleteCurrentImg",3,"click",4,"ngIf"],["class","mt-4","mat-flat-button","",3,"color","click",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],["faceImg",""],[1,"md:flex","md:justify-end"],["mat-flat-button","","color","primary",1,"w-full","md:w-max",3,"click"],["transloco","add",1,"text-base","leading-6","font-medium","cursor-pointer"],["nzSize","middle","nzShowSizeChanger","",1,"overflow-auto",3,"nzData"],["columnTable1",""],["nzWidth","300px"],[3,"dblclick",4,"ngFor","ngForOf"],["label","qrCode"],[1,"flex","flex-col","gap-6"],["placeholder","placeholder.enterQrCode",1,"flex","bg-card","rounded-md","shadow","p-6",3,"model","isDisableLength","modelChange"],[1,"flex","justify-end"],["qrTable",""],["nzWidth","100px"],["nzWidth","200px"],["class","text-overflow: ellipsis",3,"dblclick",4,"ngFor","ngForOf"],[1,"flex","space-x-2","px-10","py-5","justify-end"],["mat-flat-button","",1,"bg-slate-200",3,"disabled","click"],["transloco","cancel",1,"text-base","leading-6","font-medium","cursor-pointer"],["transloco","save",1,"text-base","leading-6","font-medium","cursor-pointer"],[1,"flex","border-b","justify-between","items-center"],["svgIcon","heroicons_outline:credit-card"],[1,"text-md","font-medium"],[1,"text-md","text-secondary"],["color","primary",3,"disabled","ngModel","ngModelChange"],["nzWidth","300px",1,"overflow-ellipsis","overflow-hidden","max-w-xs"],["mat-icon-button","","color","warn",3,"click"],[1,"icon-size-5","text-white",3,"svgIcon"],["nz-image","",1,"object-fit","h-[140px]","sm:w-[300px]","w-full",2,"height","inherit","width","100%","object-fit","contain",3,"nzSrc"],["class","rounded-md",3,"height","width","trigger","imageCapture","initError",4,"ngIf"],[1,"rounded-md",3,"height","width","trigger","imageCapture","initError"],[1,"flex","flex-col","space-y-6","px-5"],[1,"flex","gap-6","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"text-md","font-medium","text-slate-500"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:camera"],["svgIcon","heroicons_outline:arrow-up-tray"],["color","primary","mat-flat-button","","transloco","master.deleteCurrentImg",1,"mt-4",3,"click"],["mat-flat-button","",1,"mt-4",3,"color","click"],[3,"dblclick"],[1,"overflow-ellipsis","overflow-hidden","max-w-xs"],[1,"max-w-20","max-h-10",3,"src"],[1,"text-overflow:","ellipsis",3,"dblclick"],[1,"flex","justify-center"],["id","download"],[3,"nzValue","nzSize","nzLevel"],["download",""],[1,"items-center","flex","justify-center"],["mat-icon-button","","color","primary",3,"click"],[1,"icon-size-6","text-white",3,"svgIcon"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"button",3),t._UZ(4,"mat-icon",4),t.qZA()(),t.TgZ(5,"div",5)(6,"mat-tab-group",6)(7,"mat-tab",7),t.YNc(8,V,2,3,"ng-template",8),t.TgZ(9,"div",9)(10,"cm-select",10),t.NdJ("modelChange",function(a){return i.changeAccessGroup(a)}),t.qZA(),t.TgZ(11,"div",11)(12,"cm-input",12),t.NdJ("modelChange",function(a){return i.res.startTime=a}),t.qZA(),t.TgZ(13,"cm-input",13),t.NdJ("modelChange",function(a){return i.res.expiredTime=a}),t.qZA()(),t.TgZ(14,"mat-slide-toggle",14),t.NdJ("ngModelChange",function(a){return i.res.isActivated=a}),t._uU(15),t.ALo(16,"transloco"),t.qZA()()(),t.TgZ(17,"mat-tab",15),t.YNc(18,X,2,3,"ng-template",8),t.TgZ(19,"div",16)(20,"div",17)(21,"cm-input",18),t.NdJ("modelChange",function(a){return i.filter.textSearch=a})("modelChange",function(){return i.onSearch()}),t.qZA(),t.TgZ(22,"button",19),t.NdJ("click",function(){return i.onClickScanCard()}),t._UZ(23,"mat-icon",20)(24,"label",21),t.qZA()(),t.TgZ(25,"div",22)(26,"div",23),t.YNc(27,tt,11,4,"ng-container",24),t.qZA()(),t.TgZ(28,"div",25)(29,"button",26),t.NdJ("click",function(){return i.onClickAddCard()}),t._UZ(30,"label",27),t.qZA()(),t.TgZ(31,"div",22)(32,"nz-table",28,29)(34,"thead")(35,"tr")(36,"th"),t._uU(37),t.ALo(38,"transloco"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"transloco"),t.qZA(),t._UZ(42,"th",30),t.qZA()(),t.TgZ(43,"tbody"),t.YNc(44,et,8,3,"tr",24),t.qZA()()()()(),t.TgZ(45,"mat-tab",31),t.YNc(46,it,2,3,"ng-template",8),t.TgZ(47,"div",16)(48,"div",22)(49,"div",32)(50,"mat-label",33),t._uU(51),t.ALo(52,"transloco"),t.qZA(),t.TgZ(53,"div",34)(54,"div",35),t.YNc(55,ot,1,1,"img",36),t.YNc(56,st,2,1,"div",37),t.YNc(57,ct,15,11,"div",38),t.qZA()(),t.TgZ(58,"div",39),t.ynx(59),t.YNc(60,lt,1,0,"button",40),t.YNc(61,dt,3,4,"button",41),t.TgZ(62,"input",42,43),t.NdJ("change",function(a){return i.onImportImageChange(a)}),t.qZA(),t.BQk(),t.qZA()()(),t.TgZ(64,"div",44)(65,"button",45),t.NdJ("click",function(){return i.onClickAddFaceImg()}),t._UZ(66,"label",46),t.qZA()(),t.TgZ(67,"div",22)(68,"nz-table",47,48)(70,"thead")(71,"tr")(72,"th",49),t._uU(73),t.ALo(74,"transloco"),t.qZA(),t._UZ(75,"th",30),t.qZA()(),t.TgZ(76,"tbody"),t.YNc(77,mt,7,2,"tr",50),t.qZA()()()()(),t.TgZ(78,"mat-tab",51),t.YNc(79,ut,2,3,"ng-template",8),t.TgZ(80,"div",52)(81,"div",16)(82,"cm-input",53),t.NdJ("modelChange",function(a){return i.qrReq=a}),t.qZA(),t.TgZ(83,"div",54)(84,"button",26),t.NdJ("click",function(){return i.onClickAddQr()}),t._UZ(85,"label",46),t.qZA()()(),t.TgZ(86,"div",22)(87,"nz-table",47,55)(89,"thead")(90,"tr")(91,"th",56),t._uU(92),t.ALo(93,"transloco"),t.qZA(),t.TgZ(94,"th",57),t._uU(95),t.ALo(96,"transloco"),t.qZA(),t._UZ(97,"th",30),t.qZA()(),t.TgZ(98,"tbody"),t.YNc(99,pt,14,6,"tr",58),t.qZA()()()()()()(),t.TgZ(100,"div",59)(101,"button",60),t.NdJ("click",function(){return i.onClickCancel()}),t._UZ(102,"label",61),t.qZA(),t.TgZ(103,"button",19),t.NdJ("click",function(){return i.onSave()}),t._UZ(104,"label",62),t.qZA()()()),2&e){const o=t.MAs(33),a=t.MAs(69),c=t.MAs(88);t.xp6(4),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(6),t.Q6J("type","multiple")("listData",i.accessGroup)("isRequired",!0)("model",i.res.accessGroupIds),t.xp6(2),t.Q6J("isRequired",!0)("model",i.res.startTime),t.xp6(1),t.Q6J("isRequired",!0)("model",i.res.expiredTime),t.xp6(1),t.Q6J("color","primary")("ngModel",i.res.isActivated),t.xp6(1),t.hij(" ",t.lcZ(16,39,"used")," "),t.xp6(6),t.Q6J("model",i.filter.textSearch)("placeholder","vime.findByCardCodeOrName")("isDisableLength",!0),t.xp6(1),t.Q6J("disabled",i.isLoading),t.xp6(5),t.Q6J("ngForOf",i.cards),t.xp6(5),t.Q6J("nzData",i.rfIdCards)("nzScroll",t.DdM(53,ft)),t.xp6(5),t.hij(" ",t.lcZ(38,41,"vime.cardName")," "),t.xp6(3),t.hij(" ",t.lcZ(41,43,"vime.cardCode")," "),t.xp6(4),t.Q6J("ngForOf",o.data),t.xp6(7),t.hij(" ",t.lcZ(52,45,"faceImage"),""),t.xp6(4),t.Q6J("ngIf",i.faceImageSubject.value),t.xp6(1),t.Q6J("ngIf",i.isShowWebcam),t.xp6(1),t.Q6J("ngIf",!i.isShowWebcam&&!i.faceImageSubject.value),t.xp6(3),t.Q6J("ngIf",i.faceImageSubject.value),t.xp6(1),t.Q6J("ngIf",i.isShowWebcam),t.xp6(7),t.Q6J("nzData",i.listFaceData),t.xp6(5),t.hij(" ",t.lcZ(74,47,"faceImage")," "),t.xp6(4),t.Q6J("ngForOf",a.data),t.xp6(5),t.Q6J("model",i.qrReq)("isDisableLength",!0),t.xp6(5),t.Q6J("nzData",i.qrCodes),t.xp6(5),t.hij(" ",t.lcZ(93,49,"vime.qrCode")," "),t.xp6(3),t.hij(" ",t.lcZ(96,51,"content")," "),t.xp6(4),t.Q6J("ngForOf",c.data),t.xp6(2),t.Q6J("disabled",i.isLoading),t.xp6(2),t.Q6J("disabled",i.isLoading)}},dependencies:[C.ez,C.sg,C.O5,D.c,W.f,H.W,T.lW,T.RK,x.Ps,x.Hw,d.rP,d.Rr,m.Nh,m.uD,m.uX,m.SP,B.lN,B.hX,T.ot,l.Is,l.ZT,g.HQ,g.N8,g.Uo,g._C,g.Om,g.p0,g.$Z,I.p9,I.oG,b.u5,b.JJ,b.On,P.Tm,P.i3,z.Gb,z.Ie,_.y4,_.KI,_.Ot,y.x,y.D],encapsulation:2}),n})()}}]);